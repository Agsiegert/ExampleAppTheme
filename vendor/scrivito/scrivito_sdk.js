!function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=640)}([function(t,e,r){var n,i;(function(){function r(t){function e(e,r,n,i,o,a){for(;o>=0&&o<a;o+=t){var u=i?i[o]:o;n=r(n,e[u],u,e)}return n}return function(r,n,i,o){n=j(n,o,4);var a=!x(r)&&k.keys(r),u=(a||r).length,s=t>0?0:u-1;return arguments.length<3&&(i=r[a?a[s]:s],s+=t),e(r,n,i,a,s,u)}}function o(t){return function(e,r,n){r=O(r,n);for(var i=S(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(r(e[o],o,e))return o;return-1}}function a(t,e,r){return function(n,i,o){var a=0,u=S(n);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+u,a):u=o>=0?Math.min(o+1,u):o+u+1;else if(r&&o&&u)return o=r(n,i),n[o]===i?o:-1;if(i!==i)return o=e(h.call(n,a,u),k.isNaN),o>=0?o+a:-1;for(o=t>0?a:u-1;o>=0&&o<u;o+=t)if(n[o]===i)return o;return-1}}function u(t,e){var r=R.length,n=t.constructor,i=k.isFunction(n)&&n.prototype||f,o="constructor";for(k.has(t,o)&&!k.contains(e,o)&&e.push(o);r--;)(o=R[r])in t&&t[o]!==i[o]&&!k.contains(e,o)&&e.push(o)}var s=this,c=s._,l=Array.prototype,f=Object.prototype,d=Function.prototype,p=l.push,h=l.slice,v=f.toString,y=f.hasOwnProperty,_=Array.isArray,g=Object.keys,m=d.bind,b=Object.create,w=function(){},k=function(t){return t instanceof k?t:this instanceof k?void(this._wrapped=t):new k(t)};void 0!==t&&t.exports&&(e=t.exports=k),e._=k,k.VERSION="1.8.3";var j=function(t,e,r){if(void 0===e)return t;switch(null==r?3:r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)};case 4:return function(r,n,i,o){return t.call(e,r,n,i,o)}}return function(){return t.apply(e,arguments)}},O=function(t,e,r){return null==t?k.identity:k.isFunction(t)?j(t,e,r):k.isObject(t)?k.matcher(t):k.property(t)};k.iteratee=function(t,e){return O(t,e,1/0)};var C=function(t,e){return function(r){var n=arguments.length;if(n<2||null==r)return r;for(var i=1;i<n;i++)for(var o=arguments[i],a=t(o),u=a.length,s=0;s<u;s++){var c=a[s];e&&void 0!==r[c]||(r[c]=o[c])}return r}},P=function(t){if(!k.isObject(t))return{};if(b)return b(t);w.prototype=t;var e=new w;return w.prototype=null,e},E=function(t){return function(e){return null==e?void 0:e[t]}},A=Math.pow(2,53)-1,S=E("length"),x=function(t){var e=S(t);return"number"==typeof e&&e>=0&&e<=A};k.each=k.forEach=function(t,e,r){e=j(e,r);var n,i;if(x(t))for(n=0,i=t.length;n<i;n++)e(t[n],n,t);else{var o=k.keys(t);for(n=0,i=o.length;n<i;n++)e(t[o[n]],o[n],t)}return t},k.map=k.collect=function(t,e,r){e=O(e,r);for(var n=!x(t)&&k.keys(t),i=(n||t).length,o=Array(i),a=0;a<i;a++){var u=n?n[a]:a;o[a]=e(t[u],u,t)}return o},k.reduce=k.foldl=k.inject=r(1),k.reduceRight=k.foldr=r(-1),k.find=k.detect=function(t,e,r){var n;if(void 0!==(n=x(t)?k.findIndex(t,e,r):k.findKey(t,e,r))&&-1!==n)return t[n]},k.filter=k.select=function(t,e,r){var n=[];return e=O(e,r),k.each(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n},k.reject=function(t,e,r){return k.filter(t,k.negate(O(e)),r)},k.every=k.all=function(t,e,r){e=O(e,r);for(var n=!x(t)&&k.keys(t),i=(n||t).length,o=0;o<i;o++){var a=n?n[o]:o;if(!e(t[a],a,t))return!1}return!0},k.some=k.any=function(t,e,r){e=O(e,r);for(var n=!x(t)&&k.keys(t),i=(n||t).length,o=0;o<i;o++){var a=n?n[o]:o;if(e(t[a],a,t))return!0}return!1},k.contains=k.includes=k.include=function(t,e,r,n){return x(t)||(t=k.values(t)),("number"!=typeof r||n)&&(r=0),k.indexOf(t,e,r)>=0},k.invoke=function(t,e){var r=h.call(arguments,2),n=k.isFunction(e);return k.map(t,function(t){var i=n?e:t[e];return null==i?i:i.apply(t,r)})},k.pluck=function(t,e){return k.map(t,k.property(e))},k.where=function(t,e){return k.filter(t,k.matcher(e))},k.findWhere=function(t,e){return k.find(t,k.matcher(e))},k.max=function(t,e,r){var n,i,o=-1/0,a=-1/0;if(null==e&&null!=t){t=x(t)?t:k.values(t);for(var u=0,s=t.length;u<s;u++)(n=t[u])>o&&(o=n)}else e=O(e,r),k.each(t,function(t,r,n){((i=e(t,r,n))>a||i===-1/0&&o===-1/0)&&(o=t,a=i)});return o},k.min=function(t,e,r){var n,i,o=1/0,a=1/0;if(null==e&&null!=t){t=x(t)?t:k.values(t);for(var u=0,s=t.length;u<s;u++)(n=t[u])<o&&(o=n)}else e=O(e,r),k.each(t,function(t,r,n){((i=e(t,r,n))<a||i===1/0&&o===1/0)&&(o=t,a=i)});return o},k.shuffle=function(t){for(var e,r=x(t)?t:k.values(t),n=r.length,i=Array(n),o=0;o<n;o++)e=k.random(0,o),e!==o&&(i[o]=i[e]),i[e]=r[o];return i},k.sample=function(t,e,r){return null==e||r?(x(t)||(t=k.values(t)),t[k.random(t.length-1)]):k.shuffle(t).slice(0,Math.max(0,e))},k.sortBy=function(t,e,r){return e=O(e,r),k.pluck(k.map(t,function(t,r,n){return{value:t,index:r,criteria:e(t,r,n)}}).sort(function(t,e){var r=t.criteria,n=e.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return t.index-e.index}),"value")};var T=function(t){return function(e,r,n){var i={};return r=O(r,n),k.each(e,function(n,o){var a=r(n,o,e);t(i,n,a)}),i}};k.groupBy=T(function(t,e,r){k.has(t,r)?t[r].push(e):t[r]=[e]}),k.indexBy=T(function(t,e,r){t[r]=e}),k.countBy=T(function(t,e,r){k.has(t,r)?t[r]++:t[r]=1}),k.toArray=function(t){return t?k.isArray(t)?h.call(t):x(t)?k.map(t,k.identity):k.values(t):[]},k.size=function(t){return null==t?0:x(t)?t.length:k.keys(t).length},k.partition=function(t,e,r){e=O(e,r);var n=[],i=[];return k.each(t,function(t,r,o){(e(t,r,o)?n:i).push(t)}),[n,i]},k.first=k.head=k.take=function(t,e,r){if(null!=t)return null==e||r?t[0]:k.initial(t,t.length-e)},k.initial=function(t,e,r){return h.call(t,0,Math.max(0,t.length-(null==e||r?1:e)))},k.last=function(t,e,r){if(null!=t)return null==e||r?t[t.length-1]:k.rest(t,Math.max(0,t.length-e))},k.rest=k.tail=k.drop=function(t,e,r){return h.call(t,null==e||r?1:e)},k.compact=function(t){return k.filter(t,k.identity)};var F=function(t,e,r,n){for(var i=[],o=0,a=n||0,u=S(t);a<u;a++){var s=t[a];if(x(s)&&(k.isArray(s)||k.isArguments(s))){e||(s=F(s,e,r));var c=0,l=s.length;for(i.length+=l;c<l;)i[o++]=s[c++]}else r||(i[o++]=s)}return i};k.flatten=function(t,e){return F(t,e,!1)},k.without=function(t){return k.difference(t,h.call(arguments,1))},k.uniq=k.unique=function(t,e,r,n){k.isBoolean(e)||(n=r,r=e,e=!1),null!=r&&(r=O(r,n));for(var i=[],o=[],a=0,u=S(t);a<u;a++){var s=t[a],c=r?r(s,a,t):s;e?(a&&o===c||i.push(s),o=c):r?k.contains(o,c)||(o.push(c),i.push(s)):k.contains(i,s)||i.push(s)}return i},k.union=function(){return k.uniq(F(arguments,!0,!0))},k.intersection=function(t){for(var e=[],r=arguments.length,n=0,i=S(t);n<i;n++){var o=t[n];if(!k.contains(e,o)){for(var a=1;a<r&&k.contains(arguments[a],o);a++);a===r&&e.push(o)}}return e},k.difference=function(t){var e=F(arguments,!0,!0,1);return k.filter(t,function(t){return!k.contains(e,t)})},k.zip=function(){return k.unzip(arguments)},k.unzip=function(t){for(var e=t&&k.max(t,S).length||0,r=Array(e),n=0;n<e;n++)r[n]=k.pluck(t,n);return r},k.object=function(t,e){for(var r={},n=0,i=S(t);n<i;n++)e?r[t[n]]=e[n]:r[t[n][0]]=t[n][1];return r},k.findIndex=o(1),k.findLastIndex=o(-1),k.sortedIndex=function(t,e,r,n){r=O(r,n,1);for(var i=r(e),o=0,a=S(t);o<a;){var u=Math.floor((o+a)/2);r(t[u])<i?o=u+1:a=u}return o},k.indexOf=a(1,k.findIndex,k.sortedIndex),k.lastIndexOf=a(-1,k.findLastIndex),k.range=function(t,e,r){null==e&&(e=t||0,t=0),r=r||1;for(var n=Math.max(Math.ceil((e-t)/r),0),i=Array(n),o=0;o<n;o++,t+=r)i[o]=t;return i};var M=function(t,e,r,n,i){if(!(n instanceof e))return t.apply(r,i);var o=P(t.prototype),a=t.apply(o,i);return k.isObject(a)?a:o};k.bind=function(t,e){if(m&&t.bind===m)return m.apply(t,h.call(arguments,1));if(!k.isFunction(t))throw new TypeError("Bind must be called on a function");var r=h.call(arguments,2),n=function(){return M(t,n,e,this,r.concat(h.call(arguments)))};return n},k.partial=function(t){var e=h.call(arguments,1),r=function(){for(var n=0,i=e.length,o=Array(i),a=0;a<i;a++)o[a]=e[a]===k?arguments[n++]:e[a];for(;n<arguments.length;)o.push(arguments[n++]);return M(t,r,this,this,o)};return r},k.bindAll=function(t){var e,r,n=arguments.length;if(n<=1)throw new Error("bindAll must be passed function names");for(e=1;e<n;e++)r=arguments[e],t[r]=k.bind(t[r],t);return t},k.memoize=function(t,e){var r=function(n){var i=r.cache,o=""+(e?e.apply(this,arguments):n);return k.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return r.cache={},r},k.delay=function(t,e){var r=h.call(arguments,2);return setTimeout(function(){return t.apply(null,r)},e)},k.defer=k.partial(k.delay,k,1),k.throttle=function(t,e,r){var n,i,o,a=null,u=0;r||(r={});var s=function(){u=!1===r.leading?0:k.now(),a=null,o=t.apply(n,i),a||(n=i=null)};return function(){var c=k.now();u||!1!==r.leading||(u=c);var l=e-(c-u);return n=this,i=arguments,l<=0||l>e?(a&&(clearTimeout(a),a=null),u=c,o=t.apply(n,i),a||(n=i=null)):a||!1===r.trailing||(a=setTimeout(s,l)),o}},k.debounce=function(t,e,r){var n,i,o,a,u,s=function(){var c=k.now()-a;c<e&&c>=0?n=setTimeout(s,e-c):(n=null,r||(u=t.apply(o,i),n||(o=i=null)))};return function(){o=this,i=arguments,a=k.now();var c=r&&!n;return n||(n=setTimeout(s,e)),c&&(u=t.apply(o,i),o=i=null),u}},k.wrap=function(t,e){return k.partial(e,t)},k.negate=function(t){return function(){return!t.apply(this,arguments)}},k.compose=function(){var t=arguments,e=t.length-1;return function(){for(var r=e,n=t[e].apply(this,arguments);r--;)n=t[r].call(this,n);return n}},k.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},k.before=function(t,e){var r;return function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=null),r}},k.once=k.partial(k.before,2);var I=!{toString:null}.propertyIsEnumerable("toString"),R=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];k.keys=function(t){if(!k.isObject(t))return[];if(g)return g(t);var e=[];for(var r in t)k.has(t,r)&&e.push(r);return I&&u(t,e),e},k.allKeys=function(t){if(!k.isObject(t))return[];var e=[];for(var r in t)e.push(r);return I&&u(t,e),e},k.values=function(t){for(var e=k.keys(t),r=e.length,n=Array(r),i=0;i<r;i++)n[i]=t[e[i]];return n},k.mapObject=function(t,e,r){e=O(e,r);for(var n,i=k.keys(t),o=i.length,a={},u=0;u<o;u++)n=i[u],a[n]=e(t[n],n,t);return a},k.pairs=function(t){for(var e=k.keys(t),r=e.length,n=Array(r),i=0;i<r;i++)n[i]=[e[i],t[e[i]]];return n},k.invert=function(t){for(var e={},r=k.keys(t),n=0,i=r.length;n<i;n++)e[t[r[n]]]=r[n];return e},k.functions=k.methods=function(t){var e=[];for(var r in t)k.isFunction(t[r])&&e.push(r);return e.sort()},k.extend=C(k.allKeys),k.extendOwn=k.assign=C(k.keys),k.findKey=function(t,e,r){e=O(e,r);for(var n,i=k.keys(t),o=0,a=i.length;o<a;o++)if(n=i[o],e(t[n],n,t))return n},k.pick=function(t,e,r){var n,i,o={},a=t;if(null==a)return o;k.isFunction(e)?(i=k.allKeys(a),n=j(e,r)):(i=F(arguments,!1,!1,1),n=function(t,e,r){return e in r},a=Object(a));for(var u=0,s=i.length;u<s;u++){var c=i[u],l=a[c];n(l,c,a)&&(o[c]=l)}return o},k.omit=function(t,e,r){if(k.isFunction(e))e=k.negate(e);else{var n=k.map(F(arguments,!1,!1,1),String);e=function(t,e){return!k.contains(n,e)}}return k.pick(t,e,r)},k.defaults=C(k.allKeys,!0),k.create=function(t,e){var r=P(t);return e&&k.extendOwn(r,e),r},k.clone=function(t){return k.isObject(t)?k.isArray(t)?t.slice():k.extend({},t):t},k.tap=function(t,e){return e(t),t},k.isMatch=function(t,e){var r=k.keys(e),n=r.length;if(null==t)return!n;for(var i=Object(t),o=0;o<n;o++){var a=r[o];if(e[a]!==i[a]||!(a in i))return!1}return!0};var D=function(t,e,r,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof k&&(t=t._wrapped),e instanceof k&&(e=e._wrapped);var i=v.call(t);if(i!==v.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,u=e.constructor;if(a!==u&&!(k.isFunction(a)&&a instanceof a&&k.isFunction(u)&&u instanceof u)&&"constructor"in t&&"constructor"in e)return!1}r=r||[],n=n||[];for(var s=r.length;s--;)if(r[s]===t)return n[s]===e;if(r.push(t),n.push(e),o){if((s=t.length)!==e.length)return!1;for(;s--;)if(!D(t[s],e[s],r,n))return!1}else{var c,l=k.keys(t);if(s=l.length,k.keys(e).length!==s)return!1;for(;s--;)if(c=l[s],!k.has(e,c)||!D(t[c],e[c],r,n))return!1}return r.pop(),n.pop(),!0};k.isEqual=function(t,e){return D(t,e)},k.isEmpty=function(t){return null==t||(x(t)&&(k.isArray(t)||k.isString(t)||k.isArguments(t))?0===t.length:0===k.keys(t).length)},k.isElement=function(t){return!(!t||1!==t.nodeType)},k.isArray=_||function(t){return"[object Array]"===v.call(t)},k.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},k.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){k["is"+t]=function(e){return v.call(e)==="[object "+t+"]"}}),k.isArguments(arguments)||(k.isArguments=function(t){return k.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(k.isFunction=function(t){return"function"==typeof t||!1}),k.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},k.isNaN=function(t){return k.isNumber(t)&&t!==+t},k.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===v.call(t)},k.isNull=function(t){return null===t},k.isUndefined=function(t){return void 0===t},k.has=function(t,e){return null!=t&&y.call(t,e)},k.noConflict=function(){return s._=c,this},k.identity=function(t){return t},k.constant=function(t){return function(){return t}},k.noop=function(){},k.property=E,k.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},k.matcher=k.matches=function(t){return t=k.extendOwn({},t),function(e){return k.isMatch(e,t)}},k.times=function(t,e,r){var n=Array(Math.max(0,t));e=j(e,r,1);for(var i=0;i<t;i++)n[i]=e(i);return n},k.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},k.now=Date.now||function(){return(new Date).getTime()};var N={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},z=k.invert(N),B=function(t){var e=function(e){return t[e]},r="(?:"+k.keys(t).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(i,e):t}};k.escape=B(N),k.unescape=B(z),k.result=function(t,e,r){var n=null==t?void 0:t[e];return void 0===n&&(n=r),k.isFunction(n)?n.call(t):n};var L=0;k.uniqueId=function(t){var e=++L+"";return t?t+e:e},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var U=/(.)^/,W={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},q=/\\|'|\r|\n|\u2028|\u2029/g,V=function(t){return"\\"+W[t]};k.template=function(t,e,r){!e&&r&&(e=r),e=k.defaults({},e,k.templateSettings);var n=RegExp([(e.escape||U).source,(e.interpolate||U).source,(e.evaluate||U).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(n,function(e,r,n,a,u){return o+=t.slice(i,u).replace(q,V),i=u+e.length,r?o+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":n?o+="'+\n((__t=("+n+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj","_",o)}catch(t){throw t.source=o,t}var u=function(t){return a.call(this,t,k)};return u.source="function("+(e.variable||"obj")+"){\n"+o+"}",u},k.chain=function(t){var e=k(t);return e._chain=!0,e};var Q=function(t,e){return t._chain?k(e).chain():e};k.mixin=function(t){k.each(k.functions(t),function(e){var r=k[e]=t[e];k.prototype[e]=function(){var t=[this._wrapped];return p.apply(t,arguments),Q(this,r.apply(k,t))}})},k.mixin(k),k.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=l[t];k.prototype[t]=function(){var r=this._wrapped;return e.apply(r,arguments),"shift"!==t&&"splice"!==t||0!==r.length||delete r[0],Q(this,r)}}),k.each(["concat","join","slice"],function(t){var e=l[t];k.prototype[t]=function(){return Q(this,e.apply(this._wrapped,arguments))}}),k.prototype.value=function(){return this._wrapped},k.prototype.valueOf=k.prototype.toJSON=k.prototype.value,k.prototype.toString=function(){return""+this._wrapped},n=[],void 0!==(i=function(){return k}.apply(e,n))&&(t.exports=i)}).call(this)},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];Error.apply(this,e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();a.prototype=Object.create(Error.prototype),Object.setPrototypeOf?Object.setPrototypeOf(a,Error):a.__proto__=Error;var s=function(t){function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(o.message=t,o._captureStackTrace=r,r)if(Error.captureStackTrace)Error.captureStackTrace(o,o.constructor);else{var a=void 0;try{throw new Error}catch(t){a=t.stack}Object.defineProperty(o,"stack",{value:a})}return o}return o(e,t),u(e,[{key:"name",get:function(){return this.constructor.name}},{key:"captureStackTrace",get:function(){return!!this._captureStackTrace}}]),e}(a),c=function(t){function e(t,r,o){n(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.httpCode=r,a.backendCode=o,a}return o(e,t),u(e,null,[{key:"for",value:function(t,r,n){return"binary.unprocessable.image.transform.source.too_large"===n?new m(t,r,n):n&&-1!==n.indexOf("binary.unprocessable.image.transform.source.")?new b(t,r,n):new e(t,r,n)}}]),e}(s),l=function(t){function e(t,r,o){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,o))}return o(e,t),e}(c),f=function(t){function e(t){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),e}(s),d=function(t){function e(t,r){n(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return o.httpCode=r,o}return o(e,t),e}(s),p=function(t){function e(t,r){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r))}return o(e,t),e}(d),h=function(t){function e(t){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),e}(s),v=function(t){function e(t){n(this,e);var r=t.status,o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,0===r?t.statusText:t.responseText,r));return o.response=t,o}return o(e,t),e}(d),y=function(t){function e(t,r){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r))}return o(e,t),e}(d),_=function(t){function e(t){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),e}(s),g=function(t){function e(t,r,o,a){n(this,e);var u=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,o));return u.details=a||{},u}return o(e,t),e}(c),m=function(t){function e(t,r,o){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,o))}return o(e,t),e}(c),b=function(t){function e(t,r,o){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,o))}return o(e,t),e}(c),w=function(t){function e(t){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),e}(h),k=function(t){function e(t){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),e}(h),j=function(t){function e(t){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),e}(h),O=function(t){function e(t){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),e}(w);e.AccessDeniedError=l,e.ArgumentError=f,e.BackendError=p,e.ClientError=c,e.InternalError=h,e.InterpolationError=O,e.CurrentPageNotFoundError=j,e.NavigateToEmptyBinaryError=k,e.NetworkError=v,e.RateLimitExceededError=y,e.ResourceNotFoundError=_,e.ScrivitoError=s,e.TransformationSourceInvalidError=b,e.TransformationSourceTooLargeError=m,e.TranslationError=w,e.UnauthorizedError=g},,function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t){if(!t)throw new N.ArgumentError('Please provide an obj class as the "_objClass" property.')}function f(t){var e={},r={};return D.default.each(t,function(t,n){if(D.default.isArray(t)&&"widgetlist"===D.default.first(t)){var i=D.default.map(D.default.last(t),function(t){return x.default.newWithSerializedAttributes(t)}),o=(0,q.camelCase)(n);r[o]=[i,["widgetlist"]]}else e[n]=t}),e._id||(e._id=G.generateId()),[e,r]}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return"/"===t?["/"].concat(a(e)):d(p(t),[t].concat(a(e)))}function p(t){var e=t.split("/");return e.pop(),1===e.length?"/":e.join("/")}function h(t){var e=["_path"];if(D.default.difference(D.default.keys(t),e).length)throw new N.ArgumentError('Currently only "_path" copy option is supported.')}Object.defineProperty(e,"__esModule",{value:!0});var v=function(){function t(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),y=function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},_=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),g=r(118),m=i(g),b=r(143),w=i(b),k=r(211),j=i(k),O=r(46),C=r(57),P=n(C),E=r(105),A=n(E),S=r(32),x=i(S),T=r(64),F=i(T),M=r(109),I=i(M),R=r(0),D=i(R),N=r(1),z=r(51),B=i(z),L=r(112),U=r(34),W=i(U),q=r(21),V=r(113),Q=r(5),H={_id:"id",_obj_class:"objClass",_path:"path",_permalink:"permalink",_created_at:"createdAt",_created_by:"createdBy",_last_changed:"lastChanged",_last_changed_by:"lastChangedBy"},G=function(t){function e(t){u(this,e);var r=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.objData=t,r}return c(e,t),_(e,null,[{key:"fetch",value:function(t){scrivito.asyncMethodStub()}},{key:"fetchIncludingDeleted",value:function(t){scrivito.asyncMethodStub()}},{key:"get",value:function(t){var e=this;if(D.default.isArray(t))return(0,m.default)(t,function(t){return e.get(t)});var r=this.getIncludingDeleted(t);if(r&&!r.isDeleted())return r}},{key:"getIncludingDeleted",value:function(t){var r=this;if(D.default.isArray(t))return(0,m.default)(t,function(t){return r.getIncludingDeleted(t)});var n=P.get(t);if(n){var i=new e(n);if(!i.isFinallyDeleted())return i}}},{key:"create",value:function(t){var e=scrivito.typeInfo.normalizeAttrs(t);l(e._objClass),e._id||(e._id=[this.generateId()]);var r={_id:e._id,_obj_class:e._objClass};return this.createWithSerializedAttributes(scrivito.typeInfo.unwrapAttributes(r),D.default.omit(t,"_objClass","_id"))}},{key:"addChildWithSerializedAttributes",value:function(t,r){var n=e.generateId();return this.createWithSerializedAttributes(D.default.extend({},r,{_id:n,_path:t+"/"+n}))}},{key:"createWithSerializedAttributes",value:function(t,r){if(!r)return this.createWithSerializedAttributes.apply(this,a(f(t)));var n=P.createObjData(t._id);n.update(t);var i=new e(n);return i.update(r),i}},{key:"generateId",value:function(){return(0,L.randomId)()}},{key:"all",value:function(){return(new F.default).batchSize(1e3)}},{key:"root",value:function(){return e.getByPath("/")}},{key:"where",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(new F.default).and(t,e,r,n)}},{key:"getByPath",value:function(t){var e=(0,V.firstValueFromIterable)(this.where("_path","equals",t));if(e)return e}},{key:"getByPermalink",value:function(t){var e=this.where("_permalink","equals",t),r=(0,V.firstValueFromIterable)(e);if(r)return r}}]),_(e,[{key:"id",value:function(){return this._current._id}},{key:"objClass",value:function(){return this._current._obj_class}},{key:"createdAt",value:function(){return(0,O.parseStringToDate)(this._current._created_at)}},{key:"createdBy",value:function(){return this._current._created_by}},{key:"lastChanged",value:function(){return this._current._last_changed?(0,O.parseStringToDate)(this._current._last_changed):null}},{key:"lastChangedBy",value:function(){return this._current._last_changed_by?this._current._last_changed_by:null}},{key:"version",value:function(){return this._current._version}},{key:"path",value:function(){return this._current._path||null}},{key:"permalink",value:function(){return this._current._permalink||null}},{key:"parentPath",value:function(){if(this.path()&&"/"!==this.path())return p(this.path())}},{key:"parent",value:function(){var t=this.parentPath();if(t)return e.getByPath(t)}},{key:"hasConflicts",value:function(){return!!this._current._conflicts}},{key:"modification",value:function(){return this._current._deleted?"deleted":this._current._modification||null}},{key:"isModified",value:function(){return!!this.modification()}},{key:"isNew",value:function(){return"new"===this.modification()}},{key:"isEdited",value:function(){return"edited"===this.modification()}},{key:"isDeleted",value:function(){return"deleted"===this.modification()}},{key:"isFinallyDeleted",value:function(){return!!this._current._deleted}},{key:"isBinary",value:function(){if(!this._objClass)return!1;var t=this._objClass.attribute("blob");return!!t&&"binary"===t.type}},{key:"isImage",value:function(){if(this.isBinary()){var t=this.get("blob","binary");if(t)return t.isImage()}return!1}},{key:"contentLength",value:function(){return this._binaryData("contentLength")}},{key:"contentType",value:function(){return this._binaryData("contentType")}},{key:"contentUrl",value:function(){return this._binaryData("url")}},{key:"metadata",value:function(){return this._binaryData("metadata")}},{key:"fetchParent",value:function(){scrivito.asyncMethodStub()}},{key:"children",value:function(){if(this.path()){var t=e.all().and("_parentPath","equals",this.path());return(0,V.arrayFromIterable)(t)}return[]}},{key:"hasChildren",value:function(){return!!this.children().length}},{key:"orderedChildren",value:function(){var t=this.children(),e=this.get("childOrder","referencelist");return D.default.isArray(e)?D.default.sortBy(t,function(t){var r=D.default.invoke(e,"id"),n=r.indexOf(t.id());return-1===n?e.length:n}):t}},{key:"backlinks",value:function(){return(0,V.arrayFromIterable)(e.where("*","linksTo",this))}},{key:"ancestors",value:function(){var t=this.parentPath();return t?d(t).map(function(t){return e.getByPath(t)}):[]}},{key:"update",value:function(t){var e=this,r=scrivito.typeInfo.normalizeAttrs(t);(0,Q.withBatchedUpdates)(function(){e._persistWidgets(e,r);var t=A.serialize(r);e.objData.update(t)}),this._linkResolution.start()}},{key:"destroy",value:function(){this.update({_modification:["deleted"]})}},{key:"insertWidget",value:function(t,e){var r=e.before,n=e.after,i=(r||n).id(),u=this._widgetPlacementFor(i),s=u.attributeValue,c=u.attributeName,l=u.container,f=u.index,d=r?f:f+1,p=[].concat(a(s.slice(0,d)),[t],a(s.slice(d)));l.update(o({},c,[p,"widgetlist"]))}},{key:"removeWidget",value:function(t){var e=this.fieldContainingWidget(t);e.update(D.default.reject(e.get(),function(e){return e.equals(t)}))}},{key:"copyAsync",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h(t),this._copyAttributes().then(function(r){var n=D.default.extend(r,t),i=e.createWithSerializedAttributes(n);return i.finishSaving().then(function(){return i})})}},{key:"moveToAsync",value:function(t){return this.update({_path:[t+"/"+this.id()]}),this.finishSaving()}},{key:"markResolvedAsync",value:function(){return this.update({_conflicts:[null]}),this.finishSaving()}},{key:"finishSaving",value:function(){var t=this,e=this._linkResolution.finishResolving().then(function(){return t.objData.finishSaving()});return new scrivito.PublicPromise(e)}},{key:"equals",value:function(t){return t instanceof e&&this.id()===t.id()}},{key:"widget",value:function(t){return this.widgetData(t)?x.default.build(t,this):null}},{key:"widgets",value:function(){var t=this;return D.default.map(D.default.keys(this._widgetPool),function(e){return t.widget(e)})}},{key:"widgetData",value:function(t){return this._widgetPool[t]}},{key:"fieldContainingWidget",value:function(t){var e=this._widgetPlacementFor(t.id()),r=e.container,n=e.attributeName;return r.field(n,"widgetlist")}},{key:"generateWidgetId",value:function(){for(var t=0;t<10;t++){var e=(0,L.randomHex)();if(!this.widget(e))return e}throw new N.InternalError("Could not generate a new unused widget id.")}},{key:"serializeAttributes",value:function(){var t=y(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"serializeAttributes",this).call(this);return delete t._conflicts,delete t._modification,delete t._created_at,delete t._created_by,delete t._last_changed,delete t._last_changed_by,t}},{key:"slug",value:function(){var t=this.get("title","string");return(0,j.default)(t)}},{key:"toPrettyPrint",value:function(){return"[object "+this.objClass()+' id="'+this.id()+'"]'}},{key:"_binaryData",value:function(t){var e=this.get("blob","binary");return e&&e.raw()[t]()}},{key:"_hasParentPath",value:function(){return this.path()&&"/"!==this.path()}},{key:"_copyAttributes",value:function(){var t=e.generateId(),r=this.serializeAttributes(),n=[];return D.default.each(r,function(e,i){if("_"===i[0])return void delete r[i];var o=v(e,2),a=o[0],u=o[1];if("binary"===a&&u){var s=new B.default({idToCopy:u.id}),c=s.intoId(t).then(function(t){return{name:i,binary:t}});n.push(c)}}),r._id=t,r._obj_class=this.objClass(),this.path()&&(r._path=this.parentPath()+"/"+t),scrivito.PublicPromise.all(n).then(function(t){return D.default.each(t,function(t){var e=t.name,n=t.binary;r[e]=["binary",{id:n.id()}]}),r})}},{key:"_widgetPlacementFor",value:function(t){var e=(0,w.default)(this._current,t),r=e.parentWidgetId?this.widget(e.parentWidgetId):this,n=(0,q.camelCase)(e.attributeName),i=r.get(n,"widgetlist");return D.default.extend(e,{container:r,attributeName:n,attributeValue:i})}},{key:"_widgetPool",get:function(){return this._current._widget_pool||{}}},{key:"_systemAttributes",get:function(){return H}},{key:"_current",get:function(){return this.objData.current}},{key:"_objClass",get:function(){return W.default.find(this.objClass())}},{key:"_linkResolution",get:function(){return scrivito.uiAdapter.linkResolutionFor(this.objData)}}]),e}(I.default);e.default=G,scrivito.provideAsyncClassMethods(G,{get:"fetch",getByPermalink:"fetchByPermalink",getIncludingDeleted:"fetchIncludingDeleted"}),scrivito.provideAsyncInstanceMethods(G,{parent:"fetchParent"})},function(t,e,r){function n(t,e){!0!==t&&(i(e)?e=e():o(e)&&(e='Assert failed (turn on "Pause on exceptions" in your Source panel)'),n.fail(e))}var i=r(9),o=r(20),a=r(165),u=r(91);n.fail=a,n.stringify=u,t.exports=n},function(t,e,r){"use strict";function n(t){t?(l=void 0,f=t.stateController(),e.appState=t.createAppState(),e.cmsState=t.cmsState()):(l=new p.default,f=l,e.appState=i(),e.cmsState=l.subState("cms"),e.uiState=l.subState("ui"))}function i(){if(!l)throw new d.InternalError;var t=(h++).toString();return l.subState("apps").subState(t)}function o(t){return f.withBatchedUpdates(t)}function a(t){return f.subscribe(t)}function u(t){return f.trackChanges(t)}function s(){if(!l)throw new d.InternalError;return l.listenerCount()}function c(){if(!l)throw new d.InternalError;l.clear()}Object.defineProperty(e,"__esModule",{value:!0});var l,f,d=r(1),p=r(162);e.initializeGlobalState=n;var h=0;e.createAppState=i,e.withBatchedUpdates=o,e.subscribe=a,e.trackChanges=u,e.listenerCount=s,e.reset=c},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t){if("function"!=typeof t)throw new h.ArgumentError("Scrivito.connect expects either a plain function or a subclass of React.Component");return s((0,y.default)(t)?t:c(t))}function s(t){var e=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),l(e,[{key:"componentWillMount",value:function(){var t=this;this._scrivitoUnsubscribeModelState=(0,_.subscribe)(function(){t._scrivitoIsStateChangeDetected&&t._scrivitoIsStateChangeDetected()&&t.forceUpdate()}),f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"componentWillMount",this)&&f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"componentWillMount",this).call(this)}},{key:"componentWillUnmount",value:function(){this._scrivitoUnsubscribeModelState(),f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"componentWillUnmount",this)&&f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"componentWillUnmount",this).call(this)}},{key:"render",value:function(){var t=this,r=void 0;return this._scrivitoIsStateChangeDetected=(0,_.trackChanges)(function(){try{var n=void 0;if(p.default.capture(function(){n=p.default.run(function(){return f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",t).call(t)})}).loadRequiredData(),n.allDataLoaded)r=n.result;else{var i=n.success?n.result:null;r=t._scrivitoHandleLoading(i)}}catch(e){r=t._scrivitoHandleError(e)}}),r}},{key:"_scrivitoHandleLoading",value:function(t){return this._scrivitoRenderWhileLoading?this._scrivitoRenderWhileLoading():t}},{key:"_scrivitoHandleError",value:function(t){return scrivito.printError(t),this._scrivitoRenderOnError?this._scrivitoRenderOnError():null}}]),e}(t);return e.displayName=(0,m.default)(t),e}function c(t){var e=function(e){function r(){return i(this,r),o(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return a(r,e),l(r,[{key:"render",value:function(){return t(this.props)}}]),r}(React.Component);return e.displayName=(0,m.default)(t),e}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),f=function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)};e.default=u;var d=r(8),p=n(d),h=r(1),v=r(227),y=n(v),_=r(5),g=r(127),m=n(g)},function(t,e,r){var n=r(10),i=r(49);t.exports=function(t){return n(t)?t.displayName:i(t)}},function(t,e,r){"use strict";function n(t){var e=c;try{return c=!1,t()}finally{c=e}}Object.defineProperty(e,"__esModule",{value:!0});var i,o=r(1),a=r(160),u=r(161),s=0,c=!0,l=function(){function t(t){var e=t.state,r=t.loader,n=t.invalidation,i=t.throwNotLoaded;if(!e)throw new o.InternalError("LoadableData needs state");this.value=new u.default(e),this.loader=r,this.invalidation=n,this.throwNotLoaded=i||!1}return t.throwNotLoaded=function(){throw i=!1,new scrivito.NotLoadedError(c)},t.capture=function(t){return a.capture(t)},t.run=function(t){var e=i;i=!0;try{return{success:!0,result:n(t),allDataLoaded:i}}catch(t){if(i)throw t;return{success:!1,allDataLoaded:!1}}finally{i=e}},t.prototype.get=function(){var e=this;if(this.isAvailable())return this.reloadIfOutdated(),this.value.value();if(this.isError())throw this.reloadIfOutdated(),this.value.error();i=!1,a.notifyMissingData(function(){return e.progressLoading()}),this.throwNotLoaded&&t.throwNotLoaded()},t.prototype.set=function(t){this.value.transitionToAvailable(t,this.currentVersion())},t.prototype.setError=function(t){this.transitionToError(t)},t.prototype.reset=function(){this.value.transitionToMissing()},t.prototype.isMissing=function(){return"MISSING"===this.value.status()},t.prototype.isLoading=function(){return void 0!==this.value.getLoading()},t.prototype.isAvailable=function(){return"AVAILABLE"===this.value.status()},t.prototype.isError=function(){return"ERROR"===this.value.status()},t.prototype.triggerLoading=function(){var t=this;if(!this.isLoading()){var e=s++,r=function(r){t.value.getLoading()===e&&r()},n=this.currentVersion(),i=[],o=function(t){return i.push(t)},a=function(){return i.forEach(function(t){return t()})};this.loader(o).then(function(e){return r(function(){return scrivito.batchedStateUpdater.add(function(){t.value.transitionToAvailable(e,n),a()})})},function(e){return r(function(){return scrivito.batchedStateUpdater.add(function(){t.transitionToError(e,n),a()})})}),this.value.setLoading(e)}},t.prototype.transitionToError=function(t,e){void 0===e&&(e=this.currentVersion()),this.value.transitionToError(t,e)},t.prototype.reloadIfOutdated=function(){var t=this;this.hasBeenInvalidated()&&a.notifyOutdatedData(function(){return t.progressLoading()})},t.prototype.progressLoading=function(){(this.hasBeenInvalidated()||!this.isAvailable()&&!this.isError())&&this.triggerLoading()},t.prototype.hasBeenInvalidated=function(){return!!this.invalidation&&this.currentVersion()!==this.value.version()},t.prototype.currentVersion=function(){var t=this.invalidation;if(t){var e=t();if("number"==typeof e&&isNaN(e)){var r="invalidation callback returned unsuitable version "+e;throw new o.InternalError(r)}return e}},t}();e.default=l},function(t,e){t.exports=function(t){return"function"==typeof t}},function(t,e,r){var n=r(9),i=r(22);t.exports=function(t){return n(t)&&i(t.meta)}},,function(t,e,r){r(4),r(61),r(9),r(50);t.exports=function(t,e){function r(t,e){return t}return r.meta={kind:"irreducible",name:t,predicate:e,identity:!0},r.displayName=t,r.is=e,r}},,function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function t(){var e=this;n(this,t),this.promise=new scrivito.Promise(function(t,r){e.resolve=t,e.reject=r})};e.default=i},function(t,e,r){var n=r(20),i=r(61);t.exports=function(t){return n(t)||i(t)}},,function(t,e){t.exports=React},,function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){function e(){var r=void 0,n=void 0,i=s.default.capture(function(){try{r=s.default.run(t)}catch(t){n=t}});if(!i.isAllDataUpToDate()){i.loadRequiredData();var o=new a.default,u=(0,c.subscribe)(function(){o.resolve(),u()});return o.promise.then(e)}if(n)throw n;return r.result}return d(t),new scrivito.Promise(function(t){return t(e())})}Object.defineProperty(e,"__esModule",{value:!0});var o=r(14),a=n(o),u=r(8),s=n(u),c=r(5),l=r(39),f=r(30),d=(0,l.checkArgumentsFor)("load",[["loadableFunction",f.tcomb.Function]],{docPermalink:"js-sdk/load"});e.default=i},function(t,e){t.exports=function(t){return null===t||void 0===t}},function(t,e,r){"use strict";function n(t){return y.test(t)}function i(t){return p.test(t)}function o(t){return t.replace(f,function(t,e){return"_"+e.toLowerCase()})}function a(t){return t.replace(l,function(t,e,r,n){return n?r.toUpperCase()===r?t:""+e.substr(1)+r.toUpperCase():t})}function u(t){var e=a(t);return e.charAt(0).toUpperCase()+e.slice(1)}function s(t){return t.replace(h," ").replace(v,function(t){return" "+t.toLowerCase()}).replace(d,function(t){return" "+t}).trim().replace(/./,c)}function c(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()}Object.defineProperty(e,"__esModule",{value:!0});var l=/(_+)(\w)/g,f=/([A-Z])/g,d=/[A-Z]+|\d+/g,p=/^_?(_+[A-Z0-9]|[^_])+$/,h=/[_\s]+/g,v=/[A-Z][a-z]+/g,y=/^[a-z0-9_:]+$/;scrivito.attributeInflection={camelCase:a,classify:u,isCamelCase:i,isUnderscore:n,underscore:o},e.camelCase=a,e.classify=u,e.isCamelCase=i,e.isUnderscore=n,e.sentenceCase=s,e.underscore=o},function(t,e,r){var n=r(20),i=r(23);t.exports=function(t){return!n(t)&&"object"==typeof t&&!i(t)}},function(t,e){t.exports=function(t){return Array.isArray?Array.isArray(t):t instanceof Array}},function(t,e,r){var n=(r(4),r(92),r(10));r(7);t.exports=function(t){return!n(t)||t.meta.identity}},function(t,e,r){var n=r(10);r(49),r(4),r(91);t.exports=function(t,e,r){return n(t)?t.meta.identity||"object"!=typeof e||null===e?t(e,r):new t(e,r):e}},function(t,e,r){var n=r(10);t.exports=function(t,e){return n(e)?e.is(t):t instanceof e}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){return(0,h.isArray)(e)?(0,h.map)(e,function(e){return i(t,e)}):e instanceof c.default?o(e,t.objClassFor(e.objClass())):e instanceof f.default?o(e,t.widgetClassFor(e.objClass())):e instanceof p.default?t.defaultClassForLinks.build(e.buildAttributes()):e}function o(t,e){var r=Object.create(e.prototype);return r._scrivitoPrivateContent=t,r}function a(t){return(0,h.isArray)(t)?(0,h.map)(t,u):u(t)}function u(t){return t&&t._scrivitoPrivateContent?t._scrivitoPrivateContent:t}Object.defineProperty(e,"__esModule",{value:!0}),e.wrapInAppClass=i,e.buildAppClassInstance=o,e.unwrapAppClassValues=a,e.unwrapAppClassValue=u;var s=r(3),c=n(s),l=r(32),f=n(l),d=r(37),p=n(d),h=r(0)},,function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){var r=scrivito.computeCacheKey([t,e]);return _.cmsState.subState("binary").subState(r)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(53),s=n(u),c=r(8),l=n(c),f=r(0),d=r(1),p=r(51),h=n(p),v=r(119),y=n(v),_=r(5),g=r(30),m=r(83),b=r(39),w="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",k={public_access:{get:{url:w}},private_access:{get:{url:w}}},j=function(){function t(e,r,n){var a=this;i(this,t),this._id=e,this._isPublic=r,this._definition=n,this._loadableData=new l.default({state:o(e,n),loader:function(){return a._loadUrlData()}})}return a(t,[{key:"id",value:function(){return this._id}},{key:"copy",value:function(t){return new h.default({idToCopy:this._id},t)}},{key:"isPrivate",value:function(){return!this._isPublic}},{key:"transform",value:function(e){return new t(this._id,this._isPublic,(0,f.extend)({},this._definition,e))}},{key:"original",value:function(){return new t(this._id,this._isPublic,{})}},{key:"raw",value:function(){return new t(this._id,this._isPublic)}},{key:"isTransformed",value:function(){return!!this._definition}},{key:"isExplicitlyTransformed",value:function(){return this.isTransformed()&&!(0,f.isEmpty)(this._definition)}},{key:"isRaw",value:function(){return!this.isTransformed()}},{key:"url",value:function(){return this._urlData()[this._accessType()].get.url}},{key:"filename",value:function(){var t=this.url();return t.match(/^data:/)?"":(0,s.default)(t).path().split("/").pop()}},{key:"metadata",value:function(){return this._assertNotTransformed("Metadata"),new y.default(this._id)}},{key:"contentType",value:function(){return this._assertNotTransformed("Content type"),this.metadata().get("contentType")}},{key:"contentLength",value:function(){return this._assertNotTransformed("Content length"),this.metadata().get("contentLength")||0}},{key:"extname",value:function(){if(this.raw().filename().indexOf(".")>-1){return/[^.\\]*$/.exec(this.raw().filename())[0].toLowerCase()}}},{key:"equals",value:function(e){return e instanceof t&&e.id()===this.id()&&e.isPrivate()===this.isPrivate()&&(0,f.isEqual)(e.definition(),this.definition())}},{key:"isImage",value:function(){var t=this.raw().contentType();return!!t&&"image"===t.split("/")[0]}},{key:"definition",value:function(){return this._definition||null}},{key:"_accessType",value:function(){return this.isPrivate()?"private_access":"public_access"}},{key:"_urlData",value:function(){return this._loadableData.get()||k}},{key:"_loadUrlData",value:function(){var t="blobs/"+encodeURIComponent(this._id),e=void 0;return this._definition&&(t+="/transform",e={transformation:this._definition}),scrivito.CmsRestApi.get(t,e)}},{key:"_assertNotTransformed",value:function(t){if(this.isTransformed())throw new d.ScrivitoError('"'+t+'" is not available for transformed images. Use "Scrivito.Binary#raw" to access the untransformed version of the image.')}}],[{key:"upload",value:function(t,e){if(P(t,e),!(m.FileType.is(t)||e&&e.filename))throw new d.ArgumentError("Expected a filename to be passed with Blob as the source.");return new h.default({source:t},e)}},{key:"store",value:function(e,r,n){var i=r.transformation;new l.default({state:o(e,i)}).set(n);var a=new t(e);return i?a.transform(i):a}},{key:"storeMetadata",value:function(t,e){return y.default.store(t,e)}}]),t}(),O=g.tcomb.struct({contentType:g.tcomb.maybe(g.tcomb.String),filename:g.tcomb.maybe(g.tcomb.String)}),C=g.tcomb.refinement(g.tcomb.Object,function(t){return m.BlobType.is(t)||m.FileType.is(t)},"Blob or File"),P=(0,b.checkArgumentsFor)("Binary.upload",[["source",C],["options",g.tcomb.maybe(O)]],{docPermalink:"js-sdk/Binary-static-upload"});e.default=j},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tcomb=void 0;var n=r(163),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(n);i.struct.strict=!0,i.interface.strict=!0,e.tcomb=i},function(t,e,r){"use strict";function n(t){try{return(0,s.isFunction)(t)?o(t):(0,s.isObject)(t)?i(t):a(t)}catch(t){return""}}function i(t){var e=t._scrivitoPrivateContent;return e&&(0,s.isFunction)(e.toPrettyPrint)?e.toPrettyPrint():(0,s.isElement)(t)?"[object HTMLElement "+a(t.outerHTML)+"]":a(t)}function o(t){var e=t._scrivitoPrivateSchema;if(e)return"[class "+e.name+"]";if(t.prototype&&t.prototype.isReactComponent){return'[class React.Component "'+(t.displayName||t.name)+'"]'}return u(t.toString())}function a(t){var e=JSON.stringify(t);return e?u(e):e}function u(t){return t.length>100?t.slice(0,100)+"...":t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var s=r(0)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){if(!t)throw new _.ArgumentError('Please provide a widget class as the "_objClass" property.')}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=r(105),f=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(l),d=r(109),p=n(d),h=r(0),v=n(h),y=r(21),_=r(1),g=r(5),m={_id:"id",_obj_class:"objClass"},b=function(t){function e(t){o(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r._attributesToBeSaved=scrivito.typeInfo.normalizeAttrs(t),s(t._objClass),r}return u(e,t),c(e,null,[{key:"build",value:function(t,r){var n=Object.create(e.prototype);return n._obj=r,n._id=t,n}},{key:"newWithSerializedAttributes",value:function(t){var r={},n={};v.default.each(t,function(t,i){if("_obj_class"===i)return void(r._objClass=[t]);if(v.default.isArray(t)&&"widgetlist"===v.default.first(t)){var o=v.default.map(v.default.last(t),function(t){return e.newWithSerializedAttributes(t)}),a=(0,y.camelCase)(i);return void(r[a]=[o,["widgetlist"]])}n[i]=t});var i=new e(r);return i.preserializedAttributes=n,i}}]),c(e,[{key:"id",value:function(){if(this.isPersisted())return this._id;this._throwUnpersistedError()}},{key:"objClass",value:function(){return this._current._obj_class}},{key:"obj",value:function(){if(this.isPersisted())return this._obj;this._throwUnpersistedError()}},{key:"widget",value:function(t){return this.obj().widget(t)}},{key:"update",value:function(t){var e=this,r=scrivito.typeInfo.normalizeAttrs(t);(0,g.withBatchedUpdates)(function(){e._persistWidgets(e.obj(),r);var t=f.serialize(r);e._updateSelf(t)})}},{key:"insertBefore",value:function(t){t.obj().insertWidget(this,{before:t})}},{key:"insertAfter",value:function(t){t.obj().insertWidget(this,{after:t})}},{key:"remove",value:function(){this.obj().removeWidget(this)}},{key:"copy",value:function(){var t=this.serializeAttributes();return e.newWithSerializedAttributes(t)}},{key:"persistInObj",value:function(t){this._persistWidgets(t,this._attributesToBeSaved);var e=f.serialize(this._attributesToBeSaved);v.default.extend(e,this.preserializedAttributes||{}),this._obj=t,this._id=t.generateWidgetId(),this._updateSelf(e),this._executeDidPersistCallback()}},{key:"isPersisted",value:function(){return!!this._obj}},{key:"onDidPersist",value:function(t){if(this.isPersisted())throw new _.ScrivitoError('Cannot call "onDidPersist" of an already persisted widget');this._onDidPersistCallback=t}},{key:"hasOnDidPersistCallback",value:function(){return!!this._onDidPersistCallback}},{key:"finishSaving",value:function(){return this.obj().finishSaving()}},{key:"equals",value:function(t){return t instanceof e&&(this.id()===t.id()&&this.obj().id()===t.obj().id())}},{key:"containingField",value:function(){return this.obj().fieldContainingWidget(this)}},{key:"toPrettyPrint",value:function(){return"[object "+this.objClass()+' id="'+this.id()+'" objId="'+this.obj().id()+'"]'}},{key:"_throwUnpersistedError",value:function(){throw new _.ScrivitoError("Can not access a new widget before it has been saved.")}},{key:"_updateSelf",value:function(t){var e={_widgetPool:[i({},this.id(),t)]};this.obj().update(e)}},{key:"_executeDidPersistCallback",value:function(){this._onDidPersistCallback&&(this._onDidPersistCallback(),delete this._onDidPersistCallback)}},{key:"attributesToBeSaved",get:function(){return this._attributesToBeSaved}},{key:"_current",get:function(){if(this.isPersisted())return this.obj().widgetData(this.id());throw new _.ScrivitoError("Can not access an unpersisted widget.")}},{key:"_systemAttributes",get:function(){return m}}]),e}(p.default);e.default=b},,function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t){var e=t._obj_class,r=t._path,n=t.blob,i={_objClass:[e]};return r&&(i._path=[r]),n&&(i.blob=[n,"binary"]),i}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=r(3),l=n(c),f=r(82),d=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(f),p=r(0),h=n(p),v=r(1),y=r(31),_=n(y),g=r(110),m=n(g),b=r(210),w=r(47),k=["_path","blob"],j=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"createObjWithDefaults",value:function(t){var e=h.default.without.apply(h.default,[h.default.keys(t)].concat(k));if(t._obj_class=this.name,!h.default.isEmpty(e))throw new v.InternalError("Unexpected attributes "+(0,_.default)(e)+". Available attributes: "+(0,_.default)(k));if(this._classData.usesServerCallbacks)return d.createObjFromLegacyAttributes(t);var r=l.default.create(u(t));return scrivito.AppConfig.initializeContentForObj(r.id()),scrivito.Promise.resolve(r)}},{key:"isBinary",value:function(){var t=this.attribute("blob");return!(!t||"binary"!==t.type)}},{key:"hasChildOrder",value:function(){var t=this.attribute("childOrder");return!(!t||"referencelist"!==t.type)}}],[{key:"type",value:function(){return"Obj"}},{key:"validPageClasses",value:function(t){if((0,w.useRailsEngine)()){return(0,b.validRailsPageClasses)(t).reduce(function(t,r){var n=e.find(r);return n&&t.push(n),t},[])}return e.all().filter(function(t){return!t.isHiddenFromEditors()&&!t.isBinary()})}}]),e}(m.default);e.default=j},,,function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){var e=l.default.without.apply(l.default,[l.default.keys(t)].concat(y));if(!l.default.isEmpty(e))throw new p.ArgumentError("Unexpected attributes "+(0,v.default)(e)+". Available attributes: "+(0,v.default)(y))}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(3),s=n(u),c=r(0),l=n(c),f=r(53),d=n(f),p=r(1),h=r(31),v=n(h),y=["hash","obj","query","target","title","url"],_=function(){function t(e){i(this,t),o(e),this._hash=e.hash||null,this._query=e.query||null,this._target=e.target||null,this._title=e.title||null,this._url=e.url||null,this._objId=null,e.obj&&(this._objId=e.obj.id())}return a(t,null,[{key:"build",value:function(t){var e=t.objId;delete t.objId;var r=new this(t);return e&&(r._objId=e),r}}]),a(t,[{key:"title",value:function(){return this._title}},{key:"query",value:function(){return this._query}},{key:"hash",value:function(){return this._hash}},{key:"target",value:function(){return this._target}},{key:"url",value:function(){return this._url}},{key:"objId",value:function(){return this._objId}},{key:"obj",value:function(){return this.objId()?s.default.get(this.objId()):null}},{key:"queryParameters",value:function(){return d.default.parseQuery(this.query())}},{key:"fetchObj",value:function(){return this.isExternal()?scrivito.PublicPromise.reject(new p.ScrivitoError("The link is external and does not reference an object.")):s.default.fetch(this.objId())}},{key:"isExternal",value:function(){return!!this.url()}},{key:"isInternal",value:function(){return!this.isExternal()}},{key:"copy",value:function(t){o(t);var e=this.buildAttributes();return l.default.has(t,"obj")&&delete e.objId,l.default.extend(e,t),this.constructor.build(e)}},{key:"buildAttributes",value:function(){return{title:this.title(),query:this.query(),hash:this.hash(),target:this.target(),url:this.url(),objId:this.objId()}}},{key:"isBroken",value:function(){return!this.isExternal()&&!this.obj()}},{key:"toPrettyPrint",value:function(){return this.isInternal()?'[object Link objId="'+this.objId()+'"]':'[object Link url="'+this.url()+'"]'}}]),t}();e.default=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t){return function(e){return!e.isHiddenFromEditors()&&e.isValidContainerClass(t)}}function s(t){var e=t instanceof v.default?"Widget":"Obj";return w.default.findByType(e,t.objClass())}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=r(145),f=n(l),d=r(82),p=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(d),h=r(32),v=n(h),y=r(0),_=n(y),g=r(110),m=n(g),b=r(111),w=n(b),k=function(t){function e(t){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.embeds=t.embeds,r._embeddingAttribute=t.embeddingAttribute,r}return a(e,t),c(e,null,[{key:"type",value:function(){return"Widget"}},{key:"validClassNamesForField",value:function(t){return this.validClassesForField(t).map(function(t){return t.name})}},{key:"validClassesForField",value:function(t){var e=t.container(),r=s(e);if(r&&r.usesServerCallbacks()){return(0,f.default)(t).reduce(function(t,e){var r=w.default.findByType("Widget",e);return r&&t.push(r),t},[])}var n=r&&r.attribute(t.name());return(n&&n.only()||w.default.allForType("Widget")).filter(u(e.objClass()))}}]),c(e,[{key:"newWidgetWithDefaults",value:function(){if(this._classData.usesServerCallbacks)return p.newWidget(this.name);var t=new v.default({_objClass:[this.name]});return t.onDidPersist(function(){var e=t.obj().id(),r=t.id();scrivito.AppConfig.initializeContentForWidget(e,r)}),scrivito.Promise.resolve(t)}},{key:"embeddingAttribute",value:function(){if(this.embeds)return this.attribute(this._embeddingAttribute)}},{key:"isValidContainerClass",value:function(t){return!this._classData.validContainerClasses||_.default.contains(this._classData.validContainerClasses,t)}}]),e}(m.default);e.default=k},function(t,e,r){"use strict";function n(t,e,r){var n=r.docPermalink;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var a=i(r,e);if(a){var u="Visit https://scrivito.com/"+n+" for more information.";throw new l.ArgumentError("Invalid arguments for '"+t+"': "+a+" "+u)}}}function i(t,e){var r=e.length,n=t.length;if(n>r)return"Expected "+r+" arguments, got "+n;var i=c.flatten(e.map(function(e,r){var n=e[0],i=e[1],a=t[r];return u.tcomb.validate(a,i).errors.map(function(t){return o(n,t)})}));return i.length>0?i.join(" "):void 0}function o(t,e){var r=a(t,e);if(void 0===e.actual)return"Missing required "+r+".";if(e.expected===u.tcomb.Nil)return"Unexpected "+r+".";var n=u.tcomb.getTypeName(e.expected);return"Unexpected value for "+r+": got "+s.default(e.actual)+", expected type "+n+"."}function a(t,e){var r="argument '"+t+"'";return 0===e.path.length?r:"key '"+e.path.join("/")+"' in "+r}Object.defineProperty(e,"__esModule",{value:!0});var u=r(30),s=r(31),c=r(0),l=r(1);e.checkArgumentsFor=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=r(0),u=r(34),s=n(u),c=r(38),l=n(c),f=r(1),d=function(){function t(e){i(this,t),this.name=e.name,this.type=e.type,this._values=e.values,this._valuesLocalization=e.valuesLocalization,this._attributeData=e}return o(t,null,[{key:"isSystemAttribute",value:function(t){return"_"===t[0]}}]),o(t,[{key:"title",value:function(){return this._attributeData.title}},{key:"description",value:function(){return this._attributeData.description}},{key:"typeInfo",value:function(){return"enum"===this.type||"multienum"===this.type?[this.type,{values:this._values,valuesLocalization:this._valuesLocalization}]:[this.type,{}]}},{key:"values",value:function(){return this._assertValidTypes(["enum","multienum"],"Only enum and multienum attributes can have valid values"),this._values||[]}},{key:"validClasses",value:function(){this._assertValidTypes(["reference","referencelist"],"Only reference and referencelist attributes can have valid classes");var t=this._attributeData.validClasses;if(t)return(0,a.map)(t,function(t){return s.default.find(t)})}},{key:"only",value:function(){this._assertValidTypes(["widgetlist"],"Only widgetlist attributes have only()");var t=this._attributeData.only;if(t){var e=(0,a.isArray)(t)?t:[t];return(0,a.compact)((0,a.map)(e,function(t){return l.default.find(t)}))}}},{key:"_assertValidTypes",value:function(t,e){if(!(0,a.include)(t,this.type))throw new f.InternalError(e)}}]),t}();e.default=d},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=r(0),u=function(t){return t&&t.__esModule?t:{default:t}}(a),s=function(){function t(e,r){n(this,t),e.attributes=e.attributes||{},r._scrivitoPrivateSchema&&(e.attributes=u.default.extend({},r._scrivitoPrivateSchema.attributes,e.attributes)),this.definition=e}return o(t,null,[{key:"forInstance",value:function(t){return this.forClass(t.constructor)}},{key:"forClass",value:function(t){return t._scrivitoPrivateSchema}},{key:"basicFieldFor",value:function(e,r){var n=t.forInstance(e);if(n){var i=n.attributeDefinition(r);if(i)return e._scrivitoPrivateContent.field(r,i)}}}]),o(t,[{key:"attributeDefinition",value:function(t){var e=this.attributes[t];if(e)return scrivito.typeInfo.normalize(e)}},{key:"isBinary",value:function(){var t=this.attributeDefinition("blob")||[];return"binary"===i(t,1)[0]}},{key:"attributes",get:function(){return this.definition.attributes}},{key:"name",get:function(){return this.definition.name}},{key:"validContainerClasses",get:function(){return this.definition.validContainerClasses}}]),t}();e.default=s},,,,function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";function n(t){return v.default.isString(t)?t.match(/^-?\d+$/)?d(t):null:d(t)}function i(t){return f(t)&&_<=t&&t<=g}function o(t){return v.default.isNumber(t)&&v.default.isFinite(t)}function a(t){if(!v.default.isString(t))return null;if(!c(t))throw new y.InternalError('The value is not a valid ISO date time: "'+t+'"');return u(t)}function u(t){if(t){var e=t.match(m),r=p(e,7),n=(r[0],r[1]),i=r[2],o=r[3],a=r[4],u=r[5],s=r[6];return new Date(Date.UTC(n,i-1,o,a,u,s))}}function s(t){return""+t.getUTCFullYear()+l(t.getUTCMonth()+1)+l(t.getUTCDate())+l(t.getUTCHours())+l(t.getUTCMinutes())+l(t.getUTCSeconds())}function c(t){return v.default.isString(t)&&t.match(/^\d{14}$/)}function l(t){return t<10?"0"+t:t}function f(t){return v.default.isNumber(t)&&v.default.isFinite(t)&&Math.floor(t)===t}function d(t){var e=parseInt(t,10);return 0===e?0:i(e)?e:null}Object.defineProperty(e,"__esModule",{value:!0});var p=function(){function t(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.deserializeAsInteger=n,e.isValidInteger=i,e.isValidFloat=o,e.deserializeAsDate=a,e.parseStringToDate=u,e.formatDateToString=s,e.isValidDateString=c;var h=r(0),v=function(t){return t&&t.__esModule?t:{default:t}}(h),y=r(1),_=-9007199254740991,g=9007199254740991,m=/^(\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)$/},function(t,e,r){"use strict";function n(){return!!o}function i(t){o=t}Object.defineProperty(e,"__esModule",{value:!0});var o=void 0;e.useRailsEngine=n,e.initUseRailsEngine=i},,function(t,e){t.exports=function(t){return t.displayName||t.name||"<function"+t.length+">"}},function(t,e,r){var n=r(4),i=r(7);t.exports=function(t,e){n(!(t instanceof e),function(){return"Cannot use the new operator to instantiate the type "+i(e)})}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(29),a=function(t){return t&&t.__esModule?t:{default:t}}(o),u=r(39),s=r(67),c=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t);var i=void 0;if(e.idToCopy)this.idToCopy=e.idToCopy,this.contentType=r.contentType,i=r.filename;else{var o=e.source;this.source=o,this.contentType=r.contentType||o.type,i=r.filename||o.name}i&&(this.filename=i.replace(/[^\w\-_\.$]/g,"-"))}return i(t,[{key:"into",value:function(t){return l(t),this.intoId(t.id())}},{key:"intoId",value:function(t){var e=void 0;return e=this.idToCopy?scrivito.BinaryRequest.copy(this.idToCopy,t,this.filename,this.contentType):scrivito.BinaryRequest.upload(t,this.source,this.filename,this.contentType),e.then(function(t){var e=t.id;return new a.default(e,!1)})}}]),t}(),l=(0,u.checkArgumentsFor)("FutureBinary#into",[["target",s.ObjType]],{docPermalink:"js-sdk/FutureBinary-into"});e.default=c},function(t,e,r){"use strict";function n(){return o||window.Scrivito}function i(t){o=t}Object.defineProperty(e,"__esModule",{value:!0});var o=void 0;e.getWindowContext=n,e.setWindowContext=i},function(t,e,r){var n,i,o;/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.18.7
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */
!function(a,u){"use strict";"object"==typeof t&&t.exports?t.exports=u(r(102),r(103),r(104)):(i=[r(102),r(103),r(104)],n=u,void 0!==(o="function"==typeof n?n.apply(e,i):n)&&(t.exports=o))}(0,function(t,e,r,n){"use strict";function i(t,e){var r=arguments.length>=1,n=arguments.length>=2;if(!(this instanceof i))return r?n?new i(t,e):new i(t):new i;if(void 0===t){if(r)throw new TypeError("undefined is not a valid argument for URI");t="undefined"!=typeof location?location.href+"":""}if(null===t&&r)throw new TypeError("null is not a valid argument for URI");return this.href(t),void 0!==e?this.absoluteTo(e):this}function o(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function a(t){return void 0===t?"Undefined":String(Object.prototype.toString.call(t)).slice(8,-1)}function u(t){return"Array"===a(t)}function s(t,e){var r,n,i={};if("RegExp"===a(e))i=null;else if(u(e))for(r=0,n=e.length;r<n;r++)i[e[r]]=!0;else i[e]=!0;for(r=0,n=t.length;r<n;r++){(i&&void 0!==i[t[r]]||!i&&e.test(t[r]))&&(t.splice(r,1),n--,r--)}return t}function c(t,e){var r,n;if(u(e)){for(r=0,n=e.length;r<n;r++)if(!c(t,e[r]))return!1;return!0}var i=a(e);for(r=0,n=t.length;r<n;r++)if("RegExp"===i){if("string"==typeof t[r]&&t[r].match(e))return!0}else if(t[r]===e)return!0;return!1}function l(t,e){if(!u(t)||!u(e))return!1;if(t.length!==e.length)return!1;t.sort(),e.sort();for(var r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!1;return!0}function f(t){var e=/^\/+|\/+$/g;return t.replace(e,"")}function d(t){return escape(t)}function p(t){return encodeURIComponent(t).replace(/[!'()*]/g,d).replace(/\*/g,"%2A")}function h(t){return function(e,r){return void 0===e?this._parts[t]||"":(this._parts[t]=e||null,this.build(!r),this)}}function v(t,e){return function(r,n){return void 0===r?this._parts[t]||"":(null!==r&&(r+="",r.charAt(0)===e&&(r=r.substring(1))),this._parts[t]=r,this.build(!n),this)}}var y=n&&n.URI;i.version="1.18.7";var _=i.prototype,g=Object.prototype.hasOwnProperty;i._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:i.duplicateQueryParameters,escapeQuerySpace:i.escapeQuerySpace}},i.duplicateQueryParameters=!1,i.escapeQuerySpace=!0,i.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,i.idn_expression=/[^a-z0-9\.-]/i,i.punycode_expression=/(xn--)/i,i.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,i.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,i.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},i.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},i.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,i.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},i.getDomAttribute=function(t){if(t&&t.nodeName){var e=t.nodeName.toLowerCase();if("input"!==e||"image"===t.type)return i.domAttributes[e]}},i.encode=p,i.decode=decodeURIComponent,i.iso8859=function(){i.encode=escape,i.decode=unescape},i.unicode=function(){i.encode=p,i.decode=decodeURIComponent},i.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},i.encodeQuery=function(t,e){var r=i.encode(t+"");return void 0===e&&(e=i.escapeQuerySpace),e?r.replace(/%20/g,"+"):r},i.decodeQuery=function(t,e){t+="",void 0===e&&(e=i.escapeQuerySpace);try{return i.decode(e?t.replace(/\+/g,"%20"):t)}catch(e){return t}};var m,b={encode:"encode",decode:"decode"},w=function(t,e){return function(r){try{return i[e](r+"").replace(i.characters[t][e].expression,function(r){return i.characters[t][e].map[r]})}catch(t){return r}}};for(m in b)i[m+"PathSegment"]=w("pathname",b[m]),i[m+"UrnPathSegment"]=w("urnpath",b[m]);var k=function(t,e,r){return function(n){var o;o=r?function(t){return i[e](i[r](t))}:i[e];for(var a=(n+"").split(t),u=0,s=a.length;u<s;u++)a[u]=o(a[u]);return a.join(t)}};i.decodePath=k("/","decodePathSegment"),i.decodeUrnPath=k(":","decodeUrnPathSegment"),i.recodePath=k("/","encodePathSegment","decode"),i.recodeUrnPath=k(":","encodeUrnPathSegment","decode"),i.encodeReserved=w("reserved","encode"),i.parse=function(t,e){var r;return e||(e={}),r=t.indexOf("#"),r>-1&&(e.fragment=t.substring(r+1)||null,t=t.substring(0,r)),r=t.indexOf("?"),r>-1&&(e.query=t.substring(r+1)||null,t=t.substring(0,r)),"//"===t.substring(0,2)?(e.protocol=null,t=t.substring(2),t=i.parseAuthority(t,e)):(r=t.indexOf(":"))>-1&&(e.protocol=t.substring(0,r)||null,e.protocol&&!e.protocol.match(i.protocol_expression)?e.protocol=void 0:"//"===t.substring(r+1,r+3)?(t=t.substring(r+3),t=i.parseAuthority(t,e)):(t=t.substring(r+1),e.urn=!0)),e.path=t,e},i.parseHost=function(t,e){t=t.replace(/\\/g,"/");var r,n,i=t.indexOf("/");if(-1===i&&(i=t.length),"["===t.charAt(0))r=t.indexOf("]"),e.hostname=t.substring(1,r)||null,e.port=t.substring(r+2,i)||null,"/"===e.port&&(e.port=null);else{var o=t.indexOf(":"),a=t.indexOf("/"),u=t.indexOf(":",o+1);-1!==u&&(-1===a||u<a)?(e.hostname=t.substring(0,i)||null,e.port=null):(n=t.substring(0,i).split(":"),e.hostname=n[0]||null,e.port=n[1]||null)}return e.hostname&&"/"!==t.substring(i).charAt(0)&&(i++,t="/"+t),t.substring(i)||"/"},i.parseAuthority=function(t,e){return t=i.parseUserinfo(t,e),i.parseHost(t,e)},i.parseUserinfo=function(t,e){var r,n=t.indexOf("/"),o=t.lastIndexOf("@",n>-1?n:t.length-1);return o>-1&&(-1===n||o<n)?(r=t.substring(0,o).split(":"),e.username=r[0]?i.decode(r[0]):null,r.shift(),e.password=r[0]?i.decode(r.join(":")):null,t=t.substring(o+1)):(e.username=null,e.password=null),t},i.parseQuery=function(t,e){if(!t)return{};if(!(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var r,n,o,a={},u=t.split("&"),s=u.length,c=0;c<s;c++)r=u[c].split("="),n=i.decodeQuery(r.shift(),e),o=r.length?i.decodeQuery(r.join("="),e):null,g.call(a,n)?("string"!=typeof a[n]&&null!==a[n]||(a[n]=[a[n]]),a[n].push(o)):a[n]=o;return a},i.build=function(t){var e="";return t.protocol&&(e+=t.protocol+":"),t.urn||!e&&!t.hostname||(e+="//"),e+=i.buildAuthority(t)||"","string"==typeof t.path&&("/"!==t.path.charAt(0)&&"string"==typeof t.hostname&&(e+="/"),e+=t.path),"string"==typeof t.query&&t.query&&(e+="?"+t.query),"string"==typeof t.fragment&&t.fragment&&(e+="#"+t.fragment),e},i.buildHost=function(t){var e="";return t.hostname?(i.ip6_expression.test(t.hostname)?e+="["+t.hostname+"]":e+=t.hostname,t.port&&(e+=":"+t.port),e):""},i.buildAuthority=function(t){return i.buildUserinfo(t)+i.buildHost(t)},i.buildUserinfo=function(t){var e="";return t.username&&(e+=i.encode(t.username)),t.password&&(e+=":"+i.encode(t.password)),e&&(e+="@"),e},i.buildQuery=function(t,e,r){var n,o,a,s,c="";for(o in t)if(g.call(t,o)&&o)if(u(t[o]))for(n={},a=0,s=t[o].length;a<s;a++)void 0!==t[o][a]&&void 0===n[t[o][a]+""]&&(c+="&"+i.buildQueryParameter(o,t[o][a],r),!0!==e&&(n[t[o][a]+""]=!0));else void 0!==t[o]&&(c+="&"+i.buildQueryParameter(o,t[o],r));return c.substring(1)},i.buildQueryParameter=function(t,e,r){return i.encodeQuery(t,r)+(null!==e?"="+i.encodeQuery(e,r):"")},i.addQuery=function(t,e,r){if("object"==typeof e)for(var n in e)g.call(e,n)&&i.addQuery(t,n,e[n]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===t[e])return void(t[e]=r);"string"==typeof t[e]&&(t[e]=[t[e]]),u(r)||(r=[r]),t[e]=(t[e]||[]).concat(r)}},i.removeQuery=function(t,e,r){var n,o,c;if(u(e))for(n=0,o=e.length;n<o;n++)t[e[n]]=void 0;else if("RegExp"===a(e))for(c in t)e.test(c)&&(t[c]=void 0);else if("object"==typeof e)for(c in e)g.call(e,c)&&i.removeQuery(t,c,e[c]);else{if("string"!=typeof e)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==r?"RegExp"===a(r)?!u(t[e])&&r.test(t[e])?t[e]=void 0:t[e]=s(t[e],r):t[e]!==String(r)||u(r)&&1!==r.length?u(t[e])&&(t[e]=s(t[e],r)):t[e]=void 0:t[e]=void 0}},i.hasQuery=function(t,e,r,n){switch(a(e)){case"String":break;case"RegExp":for(var o in t)if(g.call(t,o)&&e.test(o)&&(void 0===r||i.hasQuery(t,o,r)))return!0;return!1;case"Object":for(var s in e)if(g.call(e,s)&&!i.hasQuery(t,s,e[s]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(a(r)){case"Undefined":return e in t;case"Boolean":return r===Boolean(u(t[e])?t[e].length:t[e]);case"Function":return!!r(t[e],e,t);case"Array":if(!u(t[e]))return!1;return(n?c:l)(t[e],r);case"RegExp":return u(t[e])?!!n&&c(t[e],r):Boolean(t[e]&&t[e].match(r));case"Number":r=String(r);case"String":return u(t[e])?!!n&&c(t[e],r):t[e]===r;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},i.joinPaths=function(){for(var t=[],e=[],r=0,n=0;n<arguments.length;n++){var o=new i(arguments[n]);t.push(o);for(var a=o.segment(),u=0;u<a.length;u++)"string"==typeof a[u]&&e.push(a[u]),a[u]&&r++}if(!e.length||!r)return new i("");var s=new i("").segment(e);return""!==t[0].path()&&"/"!==t[0].path().slice(0,1)||s.path("/"+s.path()),s.normalize()},i.commonPath=function(t,e){var r,n=Math.min(t.length,e.length);for(r=0;r<n;r++)if(t.charAt(r)!==e.charAt(r)){r--;break}return r<1?t.charAt(0)===e.charAt(0)&&"/"===t.charAt(0)?"/":"":("/"===t.charAt(r)&&"/"===e.charAt(r)||(r=t.substring(0,r).lastIndexOf("/")),t.substring(0,r+1))},i.withinString=function(t,e,r){r||(r={});var n=r.start||i.findUri.start,o=r.end||i.findUri.end,a=r.trim||i.findUri.trim,u=r.parens||i.findUri.parens,s=/[a-z0-9-]=["']?$/i;for(n.lastIndex=0;;){var c=n.exec(t);if(!c)break;var l=c.index;if(r.ignoreHtml){var f=t.slice(Math.max(l-3,0),l);if(f&&s.test(f))continue}for(var d=l+t.slice(l).search(o),p=t.slice(l,d),h=-1;;){var v=u.exec(p);if(!v)break;var y=v.index+v[0].length;h=Math.max(h,y)}if(p=h>-1?p.slice(0,h)+p.slice(h).replace(a,""):p.replace(a,""),!(p.length<=c[0].length||r.ignore&&r.ignore.test(p))){d=l+p.length;var _=e(p,l,d,t);void 0!==_?(_=String(_),t=t.slice(0,l)+_+t.slice(d),n.lastIndex=l+_.length):n.lastIndex=d}}return n.lastIndex=0,t},i.ensureValidHostname=function(e){if(e.match(i.invalid_hostname_characters)){if(!t)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(t.toASCII(e).match(i.invalid_hostname_characters))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]')}},i.noConflict=function(t){if(t){var e={URI:this.noConflict()};return n.URITemplate&&"function"==typeof n.URITemplate.noConflict&&(e.URITemplate=n.URITemplate.noConflict()),n.IPv6&&"function"==typeof n.IPv6.noConflict&&(e.IPv6=n.IPv6.noConflict()),n.SecondLevelDomains&&"function"==typeof n.SecondLevelDomains.noConflict&&(e.SecondLevelDomains=n.SecondLevelDomains.noConflict()),e}return n.URI===this&&(n.URI=y),this},_.build=function(t){return!0===t?this._deferred_build=!0:(void 0===t||this._deferred_build)&&(this._string=i.build(this._parts),this._deferred_build=!1),this},_.clone=function(){return new i(this)},_.valueOf=_.toString=function(){return this.build(!1)._string},_.protocol=h("protocol"),_.username=h("username"),_.password=h("password"),_.hostname=h("hostname"),_.port=h("port"),_.query=v("query","?"),_.fragment=v("fragment","#"),_.search=function(t,e){var r=this.query(t,e);return"string"==typeof r&&r.length?"?"+r:r},_.hash=function(t,e){var r=this.fragment(t,e);return"string"==typeof r&&r.length?"#"+r:r},_.pathname=function(t,e){if(void 0===t||!0===t){var r=this._parts.path||(this._parts.hostname?"/":"");return t?(this._parts.urn?i.decodeUrnPath:i.decodePath)(r):r}return this._parts.urn?this._parts.path=t?i.recodeUrnPath(t):"":this._parts.path=t?i.recodePath(t):"/",this.build(!e),this},_.path=_.pathname,_.href=function(t,e){var r;if(void 0===t)return this.toString();this._string="",this._parts=i._parts();var n=t instanceof i,o="object"==typeof t&&(t.hostname||t.path||t.pathname);if(t.nodeName){t=t[i.getDomAttribute(t)]||"",o=!1}if(!n&&o&&void 0!==t.pathname&&(t=t.toString()),"string"==typeof t||t instanceof String)this._parts=i.parse(String(t),this._parts);else{if(!n&&!o)throw new TypeError("invalid input");var a=n?t._parts:t;for(r in a)g.call(this._parts,r)&&(this._parts[r]=a[r])}return this.build(!e),this},_.is=function(t){var e=!1,n=!1,o=!1,a=!1,u=!1,s=!1,c=!1,l=!this._parts.urn;switch(this._parts.hostname&&(l=!1,n=i.ip4_expression.test(this._parts.hostname),o=i.ip6_expression.test(this._parts.hostname),e=n||o,a=!e,u=a&&r&&r.has(this._parts.hostname),s=a&&i.idn_expression.test(this._parts.hostname),c=a&&i.punycode_expression.test(this._parts.hostname)),t.toLowerCase()){case"relative":return l;case"absolute":return!l;case"domain":case"name":return a;case"sld":return u;case"ip":return e;case"ip4":case"ipv4":case"inet4":return n;case"ip6":case"ipv6":case"inet6":return o;case"idn":return s;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return c}return null};var j=_.protocol,O=_.port,C=_.hostname;_.protocol=function(t,e){if(void 0!==t&&t&&(t=t.replace(/:(\/\/)?$/,""),!t.match(i.protocol_expression)))throw new TypeError('Protocol "'+t+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return j.call(this,t,e)},_.scheme=_.protocol,_.port=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t&&(0===t&&(t=null),t&&(t+="",":"===t.charAt(0)&&(t=t.substring(1)),t.match(/[^0-9]/))))throw new TypeError('Port "'+t+'" contains characters other than [0-9]');return O.call(this,t,e)},_.hostname=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t){var r={};if("/"!==i.parseHost(t,r))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');t=r.hostname}return C.call(this,t,e)},_.origin=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){var r=this.protocol();return this.authority()?(r?r+"://":"")+this.authority():""}var n=i(t);return this.protocol(n.protocol()).authority(n.authority()).build(!e),this},_.host=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?i.buildHost(this._parts):"";if("/"!==i.parseHost(t,this._parts))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.build(!e),this},_.authority=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?i.buildAuthority(this._parts):"";if("/"!==i.parseAuthority(t,this._parts))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.build(!e),this},_.userinfo=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){var r=i.buildUserinfo(this._parts);return r?r.substring(0,r.length-1):r}return"@"!==t[t.length-1]&&(t+="@"),i.parseUserinfo(t,this._parts),this.build(!e),this},_.resource=function(t,e){var r;return void 0===t?this.path()+this.search()+this.hash():(r=i.parse(t),this._parts.path=r.path,this._parts.query=r.query,this._parts.fragment=r.fragment,this.build(!e),this)},_.subdomain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,r)||""}var n=this._parts.hostname.length-this.domain().length,a=this._parts.hostname.substring(0,n),u=new RegExp("^"+o(a));return t&&"."!==t.charAt(t.length-1)&&(t+="."),t&&i.ensureValidHostname(t),this._parts.hostname=this._parts.hostname.replace(u,t),this.build(!e),this},_.domain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.match(/\./g);if(r&&r.length<2)return this._parts.hostname;var n=this._parts.hostname.length-this.tld(e).length-1;return n=this._parts.hostname.lastIndexOf(".",n-1)+1,this._parts.hostname.substring(n)||""}if(!t)throw new TypeError("cannot set domain empty");if(i.ensureValidHostname(t),!this._parts.hostname||this.is("IP"))this._parts.hostname=t;else{var a=new RegExp(o(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(a,t)}return this.build(!e),this},_.tld=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.lastIndexOf("."),i=this._parts.hostname.substring(n+1);return!0!==e&&r&&r.list[i.toLowerCase()]?r.get(this._parts.hostname)||i:i}var a;if(!t)throw new TypeError("cannot set TLD empty");if(t.match(/[^a-zA-Z0-9-]/)){if(!r||!r.is(t))throw new TypeError('TLD "'+t+'" contains characters other than [A-Z0-9]');a=new RegExp(o(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(a,t)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");a=new RegExp(o(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(a,t)}return this.build(!e),this},_.directory=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var r=this._parts.path.length-this.filename().length-1,n=this._parts.path.substring(0,r)||(this._parts.hostname?"/":"");return t?i.decodePath(n):n}var a=this._parts.path.length-this.filename().length,u=this._parts.path.substring(0,a),s=new RegExp("^"+o(u));return this.is("relative")||(t||(t="/"),"/"!==t.charAt(0)&&(t="/"+t)),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=i.recodePath(t),this._parts.path=this._parts.path.replace(s,t),this.build(!e),this},_.filename=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("string"!=typeof t){if(!this._parts.path||"/"===this._parts.path)return"";var r=this._parts.path.lastIndexOf("/"),n=this._parts.path.substring(r+1);return t?i.decodePathSegment(n):n}var a=!1;"/"===t.charAt(0)&&(t=t.substring(1)),t.match(/\.?\//)&&(a=!0);var u=new RegExp(o(this.filename())+"$");return t=i.recodePath(t),this._parts.path=this._parts.path.replace(u,t),a?this.normalizePath(e):this.build(!e),this},_.suffix=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path||"/"===this._parts.path)return"";var r,n,a=this.filename(),u=a.lastIndexOf(".");return-1===u?"":(r=a.substring(u+1),n=/^[a-z0-9%]+$/i.test(r)?r:"",t?i.decodePathSegment(n):n)}"."===t.charAt(0)&&(t=t.substring(1));var s,c=this.suffix();if(c)s=t?new RegExp(o(c)+"$"):new RegExp(o("."+c)+"$");else{if(!t)return this;this._parts.path+="."+i.recodePath(t)}return s&&(t=i.recodePath(t),this._parts.path=this._parts.path.replace(s,t)),this.build(!e),this},_.segment=function(t,e,r){var n=this._parts.urn?":":"/",i=this.path(),o="/"===i.substring(0,1),a=i.split(n);if(void 0!==t&&"number"!=typeof t&&(r=e,e=t,t=void 0),void 0!==t&&"number"!=typeof t)throw new Error('Bad segment "'+t+'", must be 0-based integer');if(o&&a.shift(),t<0&&(t=Math.max(a.length+t,0)),void 0===e)return void 0===t?a:a[t];if(null===t||void 0===a[t])if(u(e)){a=[];for(var s=0,c=e.length;s<c;s++)(e[s].length||a.length&&a[a.length-1].length)&&(a.length&&!a[a.length-1].length&&a.pop(),a.push(f(e[s])))}else(e||"string"==typeof e)&&(e=f(e),""===a[a.length-1]?a[a.length-1]=e:a.push(e));else e?a[t]=f(e):a.splice(t,1);return o&&a.unshift(""),this.path(a.join(n),r)},_.segmentCoded=function(t,e,r){var n,o,a;if("number"!=typeof t&&(r=e,e=t,t=void 0),void 0===e){if(n=this.segment(t,e,r),u(n))for(o=0,a=n.length;o<a;o++)n[o]=i.decode(n[o]);else n=void 0!==n?i.decode(n):void 0;return n}if(u(e))for(o=0,a=e.length;o<a;o++)e[o]=i.encode(e[o]);else e="string"==typeof e||e instanceof String?i.encode(e):e;return this.segment(t,e,r)};var P=_.query;return _.query=function(t,e){if(!0===t)return i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof t){var r=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace),n=t.call(this,r);return this._parts.query=i.buildQuery(n||r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this}return void 0!==t&&"string"!=typeof t?(this._parts.query=i.buildQuery(t,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this):P.call(this,t,e)},_.setQuery=function(t,e,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof t||t instanceof String)n[t]=void 0!==e?e:null;else{if("object"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var o in t)g.call(t,o)&&(n[o]=t[o])}return this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(r=e),this.build(!r),this},_.addQuery=function(t,e,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.addQuery(n,t,void 0===e?null:e),this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(r=e),this.build(!r),this},_.removeQuery=function(t,e,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.removeQuery(n,t,e),this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(r=e),this.build(!r),this},_.hasQuery=function(t,e,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.hasQuery(n,t,e,r)},_.setSearch=_.setQuery,_.addSearch=_.addQuery,_.removeSearch=_.removeQuery,_.hasSearch=_.hasQuery,_.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},_.normalizeProtocol=function(t){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!t)),this},_.normalizeHostname=function(r){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&e&&(this._parts.hostname=e.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!r)),this},_.normalizePort=function(t){return"string"==typeof this._parts.protocol&&this._parts.port===i.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!t)),this},_.normalizePath=function(t){var e=this._parts.path;if(!e)return this;if(this._parts.urn)return this._parts.path=i.recodeUrnPath(this._parts.path),this.build(!t),this;if("/"===this._parts.path)return this;e=i.recodePath(e);var r,n,o,a="";for("/"!==e.charAt(0)&&(r=!0,e="/"+e),"/.."!==e.slice(-3)&&"/."!==e.slice(-2)||(e+="/"),e=e.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),r&&(a=e.substring(1).match(/^(\.\.\/)+/)||"")&&(a=a[0]);;){if(-1===(n=e.search(/\/\.\.(\/|$)/)))break;0!==n?(o=e.substring(0,n).lastIndexOf("/"),-1===o&&(o=n),e=e.substring(0,o)+e.substring(n+3)):e=e.substring(3)}return r&&this.is("relative")&&(e=a+e.substring(1)),this._parts.path=e,this.build(!t),this},_.normalizePathname=_.normalizePath,_.normalizeQuery=function(t){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(i.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!t)),this},_.normalizeFragment=function(t){return this._parts.fragment||(this._parts.fragment=null,this.build(!t)),this},_.normalizeSearch=_.normalizeQuery,_.normalizeHash=_.normalizeFragment,_.iso8859=function(){var t=i.encode,e=i.decode;i.encode=escape,i.decode=decodeURIComponent;try{this.normalize()}finally{i.encode=t,i.decode=e}return this},_.unicode=function(){var t=i.encode,e=i.decode;i.encode=p,i.decode=unescape;try{this.normalize()}finally{i.encode=t,i.decode=e}return this},_.readable=function(){var e=this.clone();e.username("").password("").normalize();var r="";if(e._parts.protocol&&(r+=e._parts.protocol+"://"),e._parts.hostname&&(e.is("punycode")&&t?(r+=t.toUnicode(e._parts.hostname),e._parts.port&&(r+=":"+e._parts.port)):r+=e.host()),e._parts.hostname&&e._parts.path&&"/"!==e._parts.path.charAt(0)&&(r+="/"),r+=e.path(!0),e._parts.query){for(var n="",o=0,a=e._parts.query.split("&"),u=a.length;o<u;o++){var s=(a[o]||"").split("=");n+="&"+i.decodeQuery(s[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==s[1]&&(n+="="+i.decodeQuery(s[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}r+="?"+n.substring(1)}return r+=i.decodeQuery(e.hash(),!0)},_.absoluteTo=function(t){var e,r,n,o=this.clone(),a=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t instanceof i||(t=new i(t)),o._parts.protocol||(o._parts.protocol=t._parts.protocol),this._parts.hostname)return o;for(r=0;n=a[r];r++)o._parts[n]=t._parts[n];return o._parts.path?(".."===o._parts.path.substring(-2)&&(o._parts.path+="/"),"/"!==o.path().charAt(0)&&(e=t.directory(),e=e||(0===t.path().indexOf("/")?"/":""),o._parts.path=(e?e+"/":"")+o._parts.path,o.normalizePath())):(o._parts.path=t._parts.path,o._parts.query||(o._parts.query=t._parts.query)),o.build(),o},_.relativeTo=function(t){var e,r,n,o,a,u=this.clone().normalize();if(u._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t=new i(t).normalize(),e=u._parts,r=t._parts,o=u.path(),a=t.path(),"/"!==o.charAt(0))throw new Error("URI is already relative");if("/"!==a.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(e.protocol===r.protocol&&(e.protocol=null),e.username!==r.username||e.password!==r.password)return u.build();if(null!==e.protocol||null!==e.username||null!==e.password)return u.build();if(e.hostname!==r.hostname||e.port!==r.port)return u.build();if(e.hostname=null,e.port=null,o===a)return e.path="",u.build();if(!(n=i.commonPath(o,a)))return u.build();var s=r.path.substring(n.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return e.path=s+e.path.substring(n.length)||"./",u.build()},_.equals=function(t){var e,r,n,o=this.clone(),a=new i(t),s={},c={},f={};if(o.normalize(),a.normalize(),o.toString()===a.toString())return!0;if(e=o.query(),r=a.query(),o.query(""),a.query(""),o.toString()!==a.toString())return!1;if(e.length!==r.length)return!1;s=i.parseQuery(e,this._parts.escapeQuerySpace),c=i.parseQuery(r,this._parts.escapeQuerySpace);for(n in s)if(g.call(s,n)){if(u(s[n])){if(!l(s[n],c[n]))return!1}else if(s[n]!==c[n])return!1;f[n]=!0}for(n in c)if(g.call(c,n)&&!f[n])return!1;return!0},_.duplicateQueryParameters=function(t){return this._parts.duplicateQueryParameters=!!t,this},_.escapeQuerySpace=function(t){return this._parts.escapeQuerySpace=!!t,this},i})},,,function(t,e,r){"use strict";function n(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).devicePixelRatio||1}function i(){return window.location}function o(t){window.location=t}function a(){return window.history}function u(){return window.onpopstate}function s(t){window.onpopstate=t}function c(){return window.screen}function l(){return document}Object.defineProperty(e,"__esModule",{value:!0}),e.devicePixelRatio=n,e.history=a,e.location=i,e.onpopstate=u,e.redirectTo=o,e.screen=c,e.setOnpopstate=s,e.getDocument=l},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){(0,y.default)(function(){return c(t)})}function o(t){var e=d(t);return e.set(null),scrivito.ObjReplication.get(t).notifyBackendState(null),e}function a(t){var e=t._id;d(e).isAvailable()||u(e,t),scrivito.ObjReplication.get(e).notifyBackendState(t)}function u(t,e){d(t).set(e)}function s(t,e){d(t).setError(e)}function c(t){var e=d(t);if(void 0!==e.current)return e}function l(){f().clear()}function f(){return _.cmsState.subState("objData")}function d(t){return new h.default(t,f().subState(t))}Object.defineProperty(e,"__esModule",{value:!0}),e.preload=i,e.createObjData=o,e.store=a,e.set=u,e.setError=s,e.get=c,e.clearCache=l;var p=r(203),h=n(p),v=r(19),y=n(v),_=r(5)},function(t,e){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(t){if(f===clearTimeout)return clearTimeout(t);if((f===n||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function a(){v&&p&&(v=!1,p.length?h=p.concat(h):y=-1,h.length&&u())}function u(){if(!v){var t=i(a);v=!0;for(var e=h.length;e;){for(p=h,h=[];++y<e;)p&&p[y].run();y=-1,e=h.length}p=null,v=!1,o(t)}}function s(t,e){this.fun=t,this.array=e}function c(){}var l,f,d=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(t){l=r}try{f="function"==typeof clearTimeout?clearTimeout:n}catch(t){f=n}}();var p,h=[],v=!1,y=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];h.push(new s(t,e)),1!==h.length||v||i(u)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(){var t=l(),e=t.objId;if((0,O.isNull)(e))return e;if(e)try{return scrivito.loadWithDefault(void 0,function(){var t=(0,F.getWindowContext)().appModelAccessor,r=(0,F.getWindowContext)().Obj,n=t.getObj(r,e);if(n)return n;throw new S.ResourceNotFoundError('Obj with id "'+e+'" not found.')})}catch(t){return void scrivito.nextTick(function(){return h(I,t)})}}function o(){return l().queryParameters||{}}function a(){return l().error}function u(t){s(t,function(t){var e=t.obj,r=t.queryParameters,n=t.hash;e&&scrivito.BrowserLocation.replaceWith({obj:e,queryParameters:r,hash:n})})}function s(t,e){if(!(0,O.isFunction)(t))throw new S.ArgumentError("Parameter fn needs to be a function.");var r=d();(0,T.default)(t).then(function(t){return(0,T.default)(function(){if(t.obj)return _(t.obj,t.queryParameters,t.hash);throw new S.CurrentPageNotFoundError})}).then(function(t){var n=t.obj,i=t.url,o=t.queryParameters,a=t.hash;e({obj:n,queryParameters:o,hash:a}),i?p(r,function(){return scrivito.changeLocation(i)}):p(r,function(){return v({obj:n,queryParameters:o,hash:a})})}).catch(function(t){t instanceof S.NavigateToEmptyBinaryError||h(r,t)})}function c(){return M.appState.subState("currentPage")}function l(){return c().get()||{}}function f(t){c().set(t)}function d(){return I+=1}function p(t,e){I===t&&e()}function h(t,e){p(t,function(){scrivito.logError(e),f({objId:null,error:e}),y(null)})}function v(t){var e=t.obj,r=t.queryParameters,n=t.hash,i=e&&e.id()||null;f({objId:i,queryParameters:r,hash:n}),y(i)}function y(t){scrivito.uiAdapter&&scrivito.uiAdapter.setCurrentPageId(t)}function _(t,e,r){return b(t),null===t?{}:t instanceof j.default?g(t,e,r):t instanceof A.default?m(t,e,r):void 0}function g(t,e,r){if(w(t)){var n=t.get("blob",["binary"]);if(!n)throw new S.NavigateToEmptyBinaryError;return{url:n.url()}}return{obj:t,queryParameters:e,hash:r}}function m(t,e,r){if(t.isExternal())return{url:t.url()};var n={obj:t.obj(),queryParameters:t.queryParameters(),hash:t.hash()};return e&&!(0,O.isEmpty)(e)&&(n.queryParameters=e),r&&(n.hash=r),_(n.obj,n.queryParameters,n.hash)}function b(t){if(!(0,O.isNull)(t)&&!(t instanceof j.default||t instanceof A.default)){if(!t)throw new S.ArgumentError("Missing target.");throw new S.ArgumentError("Target is invalid. Valid targets are instances of Obj or Link.")}}function w(t){var e=(0,F.getWindowContext)().getClass(t.objClass());return!!e&&P.default.forClass(e).isBinary()}Object.defineProperty(e,"__esModule",{value:!0}),e.setCurrentPage=e.replaceCurrentPage=e.currentPageError=e.currentPageParams=e.currentPage=void 0;var k=r(3),j=n(k),O=r(0),C=r(41),P=n(C),E=r(37),A=n(E),S=r(1),x=r(19),T=n(x),F=r(52),M=r(5),I=0;e.currentPage=i,e.currentPageParams=o,e.currentPageError=a,e.replaceCurrentPage=u,e.setCurrentPage=s},,function(t,e){t.exports=function(t){return"string"==typeof t}},function(t,e){t.exports=function(t){return!0===t||!1===t}},function(t,e,r){var n=r(12),i=r(9);t.exports=n("Function",i)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e,r){return{field:d(t),operator:f(e),value:c(r)}}function u(t){if(!(0,j.contains)(A,t))throw new C.ArgumentError('Boosting operator "'+t+'" is invalid.')}function s(t){if(!(0,j.contains)(E,t))throw new C.ArgumentError('Negating operator "'+t+'" is invalid.')}function c(t){return(0,j.isArray)(t)?(0,j.map)(t,l):l(t)}function l(t){return(0,j.isDate)(t)?(0,g.formatDateToString)(t):t instanceof _.default?t.id():t}function f(t){if(!(0,j.contains)(P,t))throw new C.ArgumentError('Operator "'+t+'" is invalid.');return(0,O.underscore)(t)}function d(t){return(0,j.isArray)(t)?(0,j.map)(t,h):h(t)}function p(t){var e={};return(0,j.each)(t,function(t,r){var n=h(r);e[n]=t}),e}function h(t){if(!(0,O.isCamelCase)(t))throw new C.ArgumentError('Attribute name "'+t+'" is not camel case.');return(0,O.underscore)(t)}Object.defineProperty(e,"__esModule",{value:!0});var v=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),y=r(3),_=n(y),g=r(46),m=r(106),b=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(m),w=r(206),k=n(w),j=r(0),O=r(21),C=r(1),P=["contains","containsPrefix","equals","startsWith","isGreaterThan","isLessThan","linksTo","refersTo"],E=["equals","startsWith","isGreaterThan","isLessThan"],A=["contains","containsPrefix"],S=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t),this._query=[].concat(e.query||[]),this._batchSize=e.batchSize,this._offset=e.offset,this._sortBy=e.sortBy,this._sortDirection=e.sortDirection,this._includeDeleted=e.includeDeleted}return v(t,[{key:"and",value:function(e,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e instanceof t)this._query=[].concat(i(this._query),i(e._query));else{var s=a(e,r,n);o&&(u(r),s.boost=p(o)),this._query.push(s)}return this}},{key:"andNot",value:function(t,e,r){var n=a(t,e,r);return s(e),n.negate=!0,this._query.push(n),this}},{key:"offset",value:function(t){return this._offset=t,this}},{key:"order",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return this._sortBy=h(t),this._sortDirection=e,this}},{key:"batchSize",value:function(t){return this._batchSize=t,this}},{key:"includeDeleted",value:function(){return this._includeDeleted=!0,this}},{key:"count",value:function(){return this.getObjDataQuery().count()}},{key:"iterator",value:function(){var t=this.getObjDataQuery().iterator();return{next:function(){var e=t.next(),r=e.done,n=e.value;return r?{done:r}:{done:r,value:new _.default(n)}}}}},{key:"getObjDataQuery",value:function(){return b.get(this.params(),this.getBatchSize())}},{key:"getBatchSize",value:function(){return this._batchSize||100}},{key:"facet",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new k.default(h(t),e,this._query).result()}},{key:"store",value:function(t){b.store(this.params(),t)}},{key:"params",value:function(){return(0,j.omit)({query:this._query,offset:this._offset,sortBy:this._sortBy,sortDirection:this._sortDirection,includeDeleted:this._includeDeleted,batchSize:this._batchSize},j.isUndefined)}}]),t}();e.default=S},,,function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.BinaryType=e.ObjSearchType=e.LinkType=e.ObjType=void 0;var i=r(30),o=r(3),a=n(o),u=r(37),s=n(u),c=r(64),l=n(c),f=r(29),d=n(f),p=(e.ObjType=i.tcomb.irreducible("Obj",function(t){return(t&&t._scrivitoPrivateContent)instanceof a.default}),e.LinkType=i.tcomb.irreducible("Link",function(t){return(t&&t._scrivitoPrivateContent)instanceof s.default}),i.tcomb.irreducible("BasicObjSearch",function(t){return t instanceof l.default}));e.ObjSearchType=i.tcomb.irreducible("ObjSearch",function(t){return t.take&&p.is(t)}),e.BinaryType=i.tcomb.irreducible("Binary",function(t){return t instanceof d.default})},,function(t,e,r){var n=r(12);t.exports=n("Any",function(){return!0})},function(t,e,r){function n(t,e){return"{"+c(t)+" | "+l(e)+"}"}function i(t,e,r){function i(e,r){var n=u(t,e,r);return n}var c=r||n(t,e),l=a(t);return i.meta={kind:"subtype",type:t,predicate:e,name:r,identity:l},i.displayName=c,i.is=function(r){return s(r,t)&&e(r)},i.update=function(t,e){return i(o.update(t,e))},i}var o=r(4),a=(r(15),r(9),r(50),r(24)),u=r(25),s=r(26),c=r(7),l=r(49);i.getDefaultName=n,t.exports=i},function(t,e,r){var n=r(12),i=r(61);t.exports=n("String",i)},function(t,e,r){function n(t,e){return"{[key: "+a(t)+"]: "+a(e)+"}"}function i(t,e,r){function i(r,n){if(d)return r;var i=!0,o={};for(var a in r)if(r.hasOwnProperty(a)){a=c(t,a,null);var u=r[a],s=c(e,u,null);i=i&&u===s,o[a]=s}return i&&(o=r),o}var f=r||n(t,e),d=(a(t),a(e),u(t)&&u(e));return i.meta={kind:"dict",domain:t,codomain:e,name:r,identity:d},i.displayName=f,i.is=function(r){if(!s(r))return!1;for(var n in r)if(r.hasOwnProperty(n)&&(!l(n,t)||!l(r[n],e)))return!1;return!0},i.update=function(t,e){return i(o.update(t,e))},i}var o=r(4),a=(r(15),r(9),r(7)),u=r(24),s=r(22),c=r(25),l=r(26);i.getDefaultName=n,t.exports=i},function(t,e,r){var n=r(20);r(4);t.exports=function(t,e,r){if(n(e))return t;for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}},function(t,e,r){"use strict";function n(t,e){c[t]=e}function i(t){return c[t]||null}function o(t,e){n(u(t),e)}function a(t){return i(u(t))}function u(t){return"appClass-"+t}function s(){c={}}Object.defineProperty(e,"__esModule",{value:!0});var c={};e.clearComponentRegistry=s,e.getComponentForAppClass=a,e.getComponentForId=i,e.registerComponentForAppClass=o,e.registerComponentForId=n},function(t,e,r){"use strict";function n(){return!!scrivito.uiAdapter&&scrivito.uiAdapter.isEditingMode()}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e){t.exports=ReactDOM},,function(t,e,r){"use strict";function n(t,e){if(!t)return e;if(!e)return null;var r={};return o(t,e,function(n,i,o){"_widget_pool"===n?r._widget_pool=u(i,o):e.hasOwnProperty(n)?o&&(r[n]=o):r[n]=t[n]}),r}function i(t,e){if(!t)return e;if(!e)return null;var r={};return o(t,e,function(t,e,n){if("_widget_pool"===t){var i=c(e,n);d.default.isEmpty(i)||(r._widget_pool=i)}else{var o=s(e,n,function(){if(!d.default.isEqual(e,n))return n});void 0!==o&&(r[t]=o)}}),r}function o(t,e,r){d.default.union(d.default.keys(t),d.default.keys(e)).forEach(function(n){return r(n,a(t[n]),a(e[n]))})}function a(t){if(d.default.isArray(t)){var e=l(t,2),r=e[0],n=e[1];return"binary"===r&&n?[r,d.default.omit(n,"url")]:t}return t}function u(t,e){if(!e||d.default.isEmpty(e))return t;var r={};return o(t||{},e||{},function(t,i,o){e.hasOwnProperty(t)?o&&!i?r[t]=o:o&&(r[t]=n(i,o)):r[t]=i}),r}function s(t,e,r){return!t&&e?e:t&&!e?null:t&&e?r():void 0}function c(t,e){if(t===e)return{};var r={};return o(t,e,function(t,e,n){var o=s(e,n,function(){var t=i(e,n);if(!d.default.isEmpty(t))return t});void 0!==o&&(r[t]=o)}),r}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.apply=n,e.diff=i;var f=r(0),d=function(t){return t&&t.__esModule?t:{default:t}}(f)},,,function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=t._obj_class,r=S.default.find(e),n=v.default.generateId();if(!r)return scrivito.Promise.reject(new j.ArgumentError('Please provide a valid CMS object class as the "_obj_class" property.'));var i=u(t),o=p(i,2),s=o[0],l=o[1],f=a(r,s),d=c(n,l);return scrivito.Promise.all([f,d]).then(function(t){var e=p(t,2),r=e[0],i=e[1];return v.default.createWithSerializedAttributes(k.default.extend(r,i,{_id:n}))}).then(function(t){return t.finishSaving().then(function(){return t})})}function o(t){return T.default.find(t).fetchDefaults().then(function(t){return g.default.newWithSerializedAttributes(t)})}function a(t,e){return t.usesServerCallbacks()?t.fetchDefaults(e):scrivito.Promise.resolve(e)}function u(t){var e={},r={};return k.default.each(t,function(t,n){s(t)?r[n]=t:e[n]=t}),[e,r]}function s(t){return y.FileType.is(t)||t instanceof E.default||t instanceof b.default}function c(t,e){var r=k.default.map(e,function(e,r){return y.FileType.is(e)?l(t,r,e):e instanceof b.default?f(t,r,e):e instanceof E.default?d(t,r,e):void 0});return scrivito.Promise.all(r).then(k.default.object)}function l(t,e,r){return d(t,e,C.default.upload(r))}function f(t,e,r){return d(t,e,r.copy())}function d(t,e,r){return r.intoId(t).then(function(t){return[e,["binary",{id:t.id()}]]})}Object.defineProperty(e,"__esModule",{value:!0});var p=function(){function t(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.createObjFromLegacyAttributes=i,e.newWidget=o;var h=r(3),v=n(h),y=r(83),_=r(32),g=n(_),m=r(144),b=n(m),w=r(0),k=n(w),j=r(1),O=r(29),C=n(O),P=r(51),E=n(P),A=r(34),S=n(A),x=r(38),T=n(x)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FileType=e.BlobType=void 0;var n=r(30),i=e.BlobType=n.tcomb.interface({size:n.tcomb.Number,type:n.tcomb.String},{name:"Blob",strict:!1});e.FileType=i.extend({name:n.tcomb.String},{name:"File",strict:!1})},function(t,e,r){"use strict";function n(t,e){h(t,e);var r=t,n=void 0,a=void 0;if((0,i.isFunction)(t)||(r=function(){return t}),e){n=e.params||{},a=e.hash;var c=(0,i.omit)(e,"hash","params");v(t,c),n=(0,i.extend)(c,n)}var l=function(){return{obj:(0,s.unwrapAppClassValue)(r()),queryParameters:n,hash:a}},f=function(t){var e=t.obj,r=t.queryParameters,n=t.hash;e&&((0,u.default)(),scrivito.BrowserLocation.pushWith({obj:e,queryParameters:r,hash:n}))};(0,o.setCurrentPage)(l,f)}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=r(59),a=r(289),u=function(t){return t&&t.__esModule?t:{default:t}}(a),s=r(27),c=r(39),l=r(30),f=r(67),d=l.tcomb.union([l.tcomb.Function,l.tcomb.irreducible("null",function(t){return null===t}),f.ObjType,f.LinkType]),p=l.tcomb.dict(l.tcomb.String,l.tcomb.String),h=(0,c.checkArgumentsFor)("navigateTo",[["target",d],["options",l.tcomb.maybe(l.tcomb.struct({hash:l.tcomb.maybe(l.tcomb.String),params:l.tcomb.maybe(p)},{strict:!1}))]],{docPermalink:"js-sdk/navigateTo"}),v=(0,c.checkArgumentsFor)("navigateTo",[["target",d],["options",l.tcomb.maybe(p)]],{docPermalink:"js-sdk/navigateTo"});e.default=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){return function(){function e(){i(this,e)}return u(e,[{key:"id",value:function(){return this._scrivitoPrivateContent.id()}},{key:"objClass",value:function(){return this._scrivitoPrivateContent.objClass()}},{key:"finishSaving",value:function(){return this._scrivitoPrivateContent.finishSaving()}},{key:"get",value:function(e){return t.read(this,e)}},{key:"update",value:function(e){t.update(this,e)}}]),e}()}function a(t,e,r){return f.default.mapObject(t,function(t,n){if(c.default.isSystemAttribute(n))return[t];var i=e.attributes[n];if(!i)throw new d.ArgumentError('Attribute "'+n+'" is not defined for CMS object class "'+r+'".');return[(0,p.unwrapAppClassValues)(t),i]})}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();e.default=o,e.prepareAttributes=a;var s=r(40),c=n(s),l=r(0),f=n(l),d=r(1),p=r(27)},,,,,,function(t,e,r){function n(t,e){return"function"==typeof e?i(e):e}var i=r(49);t.exports=function(t){try{return JSON.stringify(t,n,2)}catch(e){return String(t)}}},function(t,e,r){var n=r(12),i=r(62);t.exports=n("Boolean",i)},function(t,e,r){var n=r(12),i=r(20);t.exports=n("Nil",i)},function(t,e,r){var n=r(12),i=r(95);t.exports=n("Number",i)},function(t,e){t.exports=function(t){return"number"==typeof t&&isFinite(t)&&!isNaN(t)}},function(t,e,r){var n=r(10);t.exports=function(t){return n(t)&&"union"===t.meta.kind}},function(t,e,r){function n(t){return"Array<"+a(t)+">"}function i(t,e){function r(e,r){if(f)return e;for(var n=!0,i=[],o=0,a=e.length;o<a;o++){var u=e[o],c=s(t,u,null);n=n&&u===c,i.push(c)}return n&&(i=e),i}var i=e||n(t),f=(a(t),u(t));return r.meta={kind:"list",type:t,name:e,identity:f},r.displayName=i,r.is=function(e){return l(e)&&e.every(function(e){return c(e,t)})},r.update=function(t,e){return r(o.update(t,e))},r}var o=r(4),a=(r(15),r(9),r(7)),u=r(24),s=r(25),c=r(26),l=r(23);i.getDefaultName=n,t.exports=i},function(t,e,r){function n(t){return"{"+Object.keys(t).map(function(e){return e+": "+i(t[e])}).join(", ")+"}"}var i=r(7);t.exports=n},function(t,e,r){function n(t,e,r){var n=t.reduce(function(t,e){return l(t,e)},e);return r&&(n.displayName=r,n.meta.name=r),n}function i(t){return c(t)?t:t.meta.props}function o(t){return c(t)?null:t.meta.defaultProps}function a(t,e){Array.prototype.push.apply(t,e)}function u(t,e,r){var u={},c={},l=[],d={};e.forEach(function(t,e){var r=f(t),n=r.unrefinedType;a(l,r.predicates),s(u,i(n)),s(c,n.prototype),s(d,o(n),!0)}),r=t.getOptions(r),r.defaultProps=s(d,r.defaultProps,!0);var p=n(l,t(u,{strict:r.strict,defaultProps:r.defaultProps}),r.name);return s(p.prototype,c),p}var s=(r(4),r(9),r(23),r(73)),c=(r(178),r(179),r(22)),l=r(70),f=r(180);t.exports=u},function(t,e,r){function n(t){return"["+t.map(a).join(", ")+"]"}function i(t,e){function r(e,r){if(a)return e;for(var n=!0,i=[],o=0,u=t.length;o<u;o++){var s=t[o],l=e[o],f=c(s,l,null);n=n&&l===f,i.push(f)}return n&&(i=e),i}var i=e||n(t),a=t.every(u);return r.meta={kind:"tuple",types:t,name:e,identity:a},r.displayName=i,r.is=function(e){return s(e)&&e.length===t.length&&t.every(function(t,r){return l(e[r],t)})},r.update=function(t,e){return r(o.update(t,e))},r}var o=r(4),a=(r(15),r(9),r(7)),u=r(24),s=r(23),c=r(25),l=r(26);i.getDefaultName=n,t.exports=i},function(t,e){function r(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}t.exports=r},function(t,e,r){(function(t,n){var i;!function(o){function a(t){throw new RangeError(F[t])}function u(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function s(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(T,"."),n+u(t.split("."),e).join(".")}function c(t){for(var e,r,n=[],i=0,o=t.length;i<o;)e=t.charCodeAt(i++),e>=55296&&e<=56319&&i<o?(r=t.charCodeAt(i++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--)):n.push(e);return n}function l(t){return u(t,function(t){var e="";return t>65535&&(t-=65536,e+=R(t>>>10&1023|55296),t=56320|1023&t),e+=R(t)}).join("")}function f(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:w}function d(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function p(t,e,r){var n=0;for(t=r?I(t/C):t>>1,t+=I(t/e);t>M*j>>1;n+=w)t=I(t/M);return I(n+(M+1)*t/(t+O))}function h(t){var e,r,n,i,o,u,s,c,d,h,v=[],y=t.length,_=0,g=E,m=P;for(r=t.lastIndexOf(A),r<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&a("not-basic"),v.push(t.charCodeAt(n));for(i=r>0?r+1:0;i<y;){for(o=_,u=1,s=w;i>=y&&a("invalid-input"),c=f(t.charCodeAt(i++)),(c>=w||c>I((b-_)/u))&&a("overflow"),_+=c*u,d=s<=m?k:s>=m+j?j:s-m,!(c<d);s+=w)h=w-d,u>I(b/h)&&a("overflow"),u*=h;e=v.length+1,m=p(_-o,e,0==o),I(_/e)>b-g&&a("overflow"),g+=I(_/e),_%=e,v.splice(_++,0,g)}return l(v)}function v(t){var e,r,n,i,o,u,s,l,f,h,v,y,_,g,m,O=[];for(t=c(t),y=t.length,e=E,r=0,o=P,u=0;u<y;++u)(v=t[u])<128&&O.push(R(v));for(n=i=O.length,i&&O.push(A);n<y;){for(s=b,u=0;u<y;++u)(v=t[u])>=e&&v<s&&(s=v);for(_=n+1,s-e>I((b-r)/_)&&a("overflow"),r+=(s-e)*_,e=s,u=0;u<y;++u)if(v=t[u],v<e&&++r>b&&a("overflow"),v==e){for(l=r,f=w;h=f<=o?k:f>=o+j?j:f-o,!(l<h);f+=w)m=l-h,g=w-h,O.push(R(d(h+m%g,0))),l=I(m/g);O.push(R(d(l,0))),o=p(r,_,n==i),r=0,++n}++r,++e}return O.join("")}function y(t){return s(t,function(t){return S.test(t)?h(t.slice(4).toLowerCase()):t})}function _(t){return s(t,function(t){return x.test(t)?"xn--"+v(t):t})}var g=("object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType,"object"==typeof n&&n);var m,b=2147483647,w=36,k=1,j=26,O=38,C=700,P=72,E=128,A="-",S=/^xn--/,x=/[^\x20-\x7E]/,T=/[\x2E\u3002\uFF0E\uFF61]/g,F={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},M=w-k,I=Math.floor,R=String.fromCharCode;m={version:"1.3.2",ucs2:{decode:c,encode:l},decode:h,encode:v,toASCII:_,toUnicode:y},void 0!==(i=function(){return m}.call(e,r,e,t))&&(t.exports=i)}()}).call(e,r(81)(t),r(45))},function(t,e,r){var n,i;/*!
 * URI.js - Mutating URLs
 * IPv6 Support
 *
 * Version: 1.18.7
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */
!function(o,a){"use strict";"object"==typeof t&&t.exports?t.exports=a():(n=a,void 0!==(i="function"==typeof n?n.call(e,r,e,t):n)&&(t.exports=i))}(0,function(t){"use strict";function e(t){var e=t.toLowerCase(),r=e.split(":"),n=r.length,i=8;""===r[0]&&""===r[1]&&""===r[2]?(r.shift(),r.shift()):""===r[0]&&""===r[1]?r.shift():""===r[n-1]&&""===r[n-2]&&r.pop(),n=r.length,-1!==r[n-1].indexOf(".")&&(i=7);var o;for(o=0;o<n&&""!==r[o];o++);if(o<i)for(r.splice(o,1,"0000");r.length<i;)r.splice(o,0,"0000");for(var a,u=0;u<i;u++){a=r[u].split("");for(var s=0;s<3&&("0"===a[0]&&a.length>1);s++)a.splice(0,1);r[u]=a.join("")}var c=-1,l=0,f=0,d=-1,p=!1;for(u=0;u<i;u++)p?"0"===r[u]?f+=1:(p=!1,f>l&&(c=d,l=f)):"0"===r[u]&&(p=!0,d=u,f=1);f>l&&(c=d,l=f),l>1&&r.splice(c,l,""),n=r.length;var h="";for(""===r[0]&&(h=":"),u=0;u<n&&(h+=r[u],u!==n-1);u++)h+=":";return""===r[n-1]&&(h+=":"),h}function r(){return t.IPv6===this&&(t.IPv6=n),this}var n=t&&t.IPv6;return{best:e,noConflict:r}})},function(t,e,r){var n,i;/*!
 * URI.js - Mutating URLs
 * Second Level Domain (SLD) Support
 *
 * Version: 1.18.7
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */
!function(o,a){"use strict";"object"==typeof t&&t.exports?t.exports=a():(n=a,void 0!==(i="function"==typeof n?n.call(e,r,e,t):n)&&(t.exports=i))}(0,function(t){"use strict";var e=t&&t.SecondLevelDomains,r={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch "},has:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return!1;var n=t.lastIndexOf(".",e-1);if(n<=0||n>=e-1)return!1;var i=r.list[t.slice(e+1)];return!!i&&i.indexOf(" "+t.slice(n+1,e)+" ")>=0},is:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return!1;if(t.lastIndexOf(".",e-1)>=0)return!1;var n=r.list[t.slice(e+1)];return!!n&&n.indexOf(" "+t.slice(0,e)+" ")>=0},get:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return null;var n=t.lastIndexOf(".",e-1);if(n<=0||n>=e-1)return null;var i=r.list[t.slice(e+1)];return i?i.indexOf(" "+t.slice(n+1,e)+" ")<0?null:t.slice(n+1):null},noConflict:function(){return t.SecondLevelDomains===this&&(t.SecondLevelDomains=e),this}};return r})},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){var e={};return U.default.each(t,function(t,r){var n=x(t,2),i=n[0],c=n[1],l=o(r);if(B.default.isSystemAttribute(l))e[l]=i;else{var f=x(c,2),d=f[0],p=f[1];e[l]=[a(d,r),s(u(d,p,i,r))]}}),e}function o(t){if(!(0,Q.isCamelCase)(t))throw new W.ArgumentError("Attribute names have to be in camel case.");return(0,Q.underscore)(t)}function a(t,e){switch(t){case"enum":return"string";case"float":case"integer":return"number";case"multienum":return"stringlist";case"binary":case"date":case"html":case"link":case"linklist":case"reference":case"referencelist":case"string":case"stringlist":case"widgetlist":return t;default:throw new W.ArgumentError('Attribute "'+e+'" is of unsupported type "'+t+'".')}}function u(t,e,r,n){if(null===r)return r;switch(t){case"binary":return l(r,n);case"date":return f(r,n);case"enum":return d(e,r,n);case"float":return p(r,n);case"html":return h(r,n);case"integer":return v(r,n);case"link":return y(r,n);case"linklist":return _(r,n);case"multienum":return b(e,r,n);case"reference":return w(r,n);case"referencelist":return k(r,n);case"string":return P(r,n);case"stringlist":return E(r,n);case"widgetlist":return S(r,n);default:throw new W.InternalError('serializeAttributeValue is not implemented for "'+t+'".')}}function s(t){return(U.default.isString(t)||U.default.isArray(t))&&U.default.isEmpty(t)?null:t}function c(t,e,r){throw new W.ArgumentError("Unexpected value "+(0,V.default)(t)+' for attribute "'+e+'". Expected: '+r)}function l(t,e){if(t instanceof G.default)return{id:t.id()};c(t,e,"A Binary.")}function f(t,e){return U.default.isDate(t)?(0,M.formatDateToString)(t):(0,M.isValidDateString)(t)?t:void c(t,e,"A Date.")}function d(t,e,r){var n=t.values;if(U.default.contains(n,e))return e;c(e,r,'Valid attribute values are contained in its "values" array ['+n+"].")}function p(t,e){if((0,M.isValidFloat)(t))return t;var r=t;U.default.isNumber(t)&&(r=String(t)),c(r,e,"A Number, that is #isFinite().")}function h(t,e){if(U.default.isString(t))return t;c(t,e,"A String.")}function v(t,e){if((0,M.isValidInteger)(t))return t;c(t,e,"A Number, that is #isSafeInteger().")}function y(t,e){if(g(t))return m(t);c(t,e,"A Link instance.")}function _(t,e){if(U.default.isArray(t)&&U.default.every(t,g))return U.default.map(t,m);c(t,e,"An array of Link instances.")}function g(t){if(t instanceof N.default)return!0;if(!U.default.isObject(t))return!1;var e=U.default.without(U.default.keys(t),"hash","obj_id","query","target","title","url");return U.default.isEmpty(e)}function m(t){var e={fragment:"function"==typeof t.hash?t.hash():t.hash,query:"function"==typeof t.query?t.query():t.query,target:"function"==typeof t.target?t.target():t.target,title:"function"==typeof t.title?t.title():t.title,url:"function"==typeof t.url?t.url():t.url};return e.obj_id="function"==typeof t.objId?t.objId():t.obj_id,U.default.mapObject(e,function(t){return t||null})}function b(t,e,r){var n=t.values,i="An array with values from "+(0,V.default)(n)+".";U.default.isArray(e)&&U.default.every(e,U.default.isString)||c(e,r,i);var o=U.default.difference(e,n);if(o.length){c(e,r,i+" Forbidden values: "+(0,V.default)(o)+".")}return e}function w(t,e){if(O(t))return j(t);c(t,e,"A BasicObj or a String ID.")}function k(t,e){if(C(t))return U.default.map(t,j);c(t,e,"An array with BasicObjs or String IDs.")}function j(t){return t instanceof F.default?t.id():t}function O(t){return U.default.isString(t)||t instanceof F.default}function C(t){return U.default.isArray(t)&&U.default.every(t,function(t){return O(t)})}function P(t,e){if(A(t))return t.toString();c(t,e,"A String.")}function E(t,e){if(U.default.isArray(t)&&U.default.every(t,function(t){return A(t)}))return U.default.invoke(t,"toString");c(t,e,"An array of strings.")}function A(t){return U.default.isString(t)||U.default.isNumber(t)}function S(t,e){if(U.default.isArray(t)&&U.default.every(t,function(t){return t instanceof R.default}))return U.default.invoke(t,"id");c(t,e,"An array of BasicWidget instances.")}Object.defineProperty(e,"__esModule",{value:!0});var x=function(){function t(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.serialize=i;var T=r(3),F=n(T),M=r(46),I=r(32),R=n(I),D=r(37),N=n(D),z=r(40),B=n(z),L=r(0),U=n(L),W=r(1),q=r(31),V=n(q),Q=r(21),H=r(29),G=n(H)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){l.default.store(t,e)}function o(t){return scrivito.computeCacheKey(t)}function a(t,e){return new d.default(t,e)}function u(){return p.cmsState.subState("objQuery")}function s(){u().clear()}Object.defineProperty(e,"__esModule",{value:!0}),e.store=i,e.computeCacheKey=o,e.get=a,e.stateContainer=u,e.clearCache=s;var c=r(107),l=n(c),f=r(205),d=n(f),p=r(5)},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(201),a=function(t){return t&&t.__esModule?t:{default:t}}(o),u=function(){function t(e,r){n(this,t),this._params=e,this._batchSize=r}return i(t,null,[{key:"store",value:function(t,e){a.default.store(t,e)}},{key:"count",value:function(t){return a.default.countFor(t)}}]),i(t,[{key:"iterator",value:function(){function t(){if(!r)return{done:!0};var i=r.objIds();if(n<i.length){var o=i[n];return n++,e[o]?t():(e[o]=!0,{value:o,done:!1})}return r=r.nextBatch(),n=0,t()}var e={},r=a.default.firstBatchFor(this._params,this._batchSize),n=0;return{next:t}}}]),t}();e.default=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(14),i=r(0),o=function(){function t(t,e){var r=(void 0===e?{}:e).batchSize;this.mget=t,this.batchSize=r||100,this.deferreds={}}return t.prototype.retrieve=function(t){var e=this;if(i.isEmpty(this.deferreds)&&scrivito.nextTick(function(){return e.performRetrieval()}),!this.deferreds[t]){var r=new n.default;this.deferreds[t]=r}return this.deferreds[t].promise},t.prototype.reset=function(){this.deferreds={}},t.prototype.performRetrieval=function(){var t=this,e=i.keys(this.deferreds).slice(0,this.batchSize);if(0!==e.length){var r={};e.forEach(function(e){r[e]=t.deferreds[e],delete t.deferreds[e]}),this.mget(e).then(function(n){e.forEach(function(e,i){var o=r[e],a=n[i];i<n.length?o.resolve(a):t.retrieve(e).then(o.resolve,o.reject)})},function(t){i.each(r,function(e){return e.reject(t)})}),this.performRetrieval()}},t}();e.default=o},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(208),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(u),c=r(120),l=n(c),f=r(40),d=n(f),p=r(0),h=n(p),v=r(1),y=r(21),_=function(){function t(){i(this,t)}return a(t,[{key:"get",value:function(t,e){if(!(0,y.isCamelCase)(t))throw new v.ArgumentError("Attribute names have to be in camel case.");var r=(0,y.underscore)(t);{if(!d.default.isSystemAttribute(r)){var n=scrivito.typeInfo.normalize(e),i=o(n,2),a=i[0],u=i[1],c=this._current[r];return c&&h.default.isArray(c)||(c=[]),s.deserialize(this,c,a,u)}if(h.default.has(this._systemAttributes,r)){var l=this._systemAttributes[r];return"function"==typeof this[l]?this[l]():this[l]}}}},{key:"field",value:function(t,e){return new l.default({container:this,attributeName:t,typeInfo:scrivito.typeInfo.normalize(e)})}},{key:"widget",value:function(t){throw new TypeError("Override in subclass.")}},{key:"serializeAttributes",value:function(){var t=this,e={};return h.default.each(this._current,function(r,n){if(h.default.isArray(r)&&"widgetlist"===h.default.first(r)){var i=(0,y.camelCase)(n),o=h.default.invoke(t.get(i,["widgetlist"]),"serializeAttributes");return void(e[n]=["widgetlist",o])}e[n]=r}),e}},{key:"_persistWidgets",value:function(t,e){h.default.each(e,function(e){var r=o(e,2),n=r[0],i=r[1];i&&"widgetlist"===i[0]&&h.default.each(n,function(e){e.isPersisted()||e.persistInObj(t)})})}},{key:"_objClass",get:function(){throw new TypeError("Override in subclass.")}},{key:"_current",get:function(){throw new TypeError("Override in subclass.")}}]),t}();e.default=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){if(!(0,l.isString)(t))throw new f.ArgumentError("Expected a string for attribute name, but got "+(0,v.default)(t));if(!t)throw new f.ArgumentError("An empty string is not a valid attribute name")}function a(t){return(0,l.mapObject)(t,function(t){return(0,l.isDate)(t)?moment.utc(t).toISOString():t})}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=r(40),c=n(s),l=r(0),f=r(1),d=r(111),p=n(d),h=r(31),v=n(h),y=r(209),_=function(){function t(e){i(this,t),this.name=e.name,this._classData=e,this.attributes=(0,l.map)(e.attributes,function(t){return new c.default(t)})}return u(t,null,[{key:"init",value:function(t){var e=this,r=t.map(function(t){return new e(t)});p.default.register(this.type(),r)}},{key:"find",value:function(t){return p.default.findByType(this.type(),t)}},{key:"get",value:function(t){var e=this.find(t);if(e)return e;throw new f.InternalError('Model class "'+t+'" does not exist.')}},{key:"all",value:function(){return p.default.allForType(this.type())}}]),u(t,[{key:"title",value:function(){return this._classData.title}},{key:"description",value:function(){return this._classData.description}},{key:"thumbnail",value:function(){return this._classData.thumbnail}},{key:"hasDetailsView",value:function(){return this.useRailsDetailsTemplate()&&!!this._classData.hasServerDetailsTemplate}},{key:"attribute",value:function(t){return o(t),(0,l.findWhere)(this.attributes,{name:t})}},{key:"localizedAttributes",value:function(){return(0,l.filter)(this.attributes,function(t){return!!t.title()})}},{key:"useRailsDetailsTemplate",value:function(){return this.usesServerCallbacks()}},{key:"useRailsThumbnailHtml",value:function(){return!this._classData.description&&!this._classData.thumbnail&&!!this._classData.usesServerCallbacks}},{key:"railsThumbnailHtml",value:function(){return(0,y.getRailsThumbnail)(this.name)}},{key:"usesServerCallbacks",value:function(){return!!this._classData.usesServerCallbacks}},{key:"isHiddenFromEditors",value:function(){return!!this._classData.hideFromEditor}},{key:"fetchDefaults",value:function(t){var e="obj_class/"+this.name+"/defaults",r="",n={};return t&&(n.attributes=a(t)),scrivito.applicationDocument().hasCurrentPage()&&(n.context={current_page_id:scrivito.applicationDocument().pageId()}),(0,l.isEmpty)(n)||(r="?"+$.param(n)),scrivito.Promise.resolve(scrivito.ajax("GET",""+e+r))}}]),t}();e.default=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o={},a={register:function(t,e){o[t]=e},allForType:function(t){return o[t]},findByType:function(t,e){return i.default.findWhere(this.allForType(t),{name:e})}};e.default=a},function(t,e,r){"use strict";function n(){for(var t=Math.floor(Math.random()*Math.pow(16,8)).toString(16);t.length<8;)t="0"+t;return t}function i(){return n()+n()}Object.defineProperty(e,"__esModule",{value:!0}),e.randomId=i,e.randomHex=n},function(t,e,r){"use strict";function n(t,e){for(var r=t.iterator(),n=[];n.length!==e;){var i=r.next();if(i.done)return n;n.push(i.value)}return n}function i(t){return t.iterator().next().value||null}Object.defineProperty(e,"__esModule",{value:!0}),e.arrayFromIterable=n,e.firstValueFromIterable=i},,,function(t,e,r){"use strict";window.scrivito||(window.scrivito={}),window.scrivito.client={}},function(t,e,r){"use strict";function n(t){var e=document.createElement("link");e.rel="stylesheet",e.href=t,document.head.appendChild(e)}function i(t){var e=document.createElement("script");e.src=t,document.head.appendChild(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.loadCss=n,e.loadJs=i},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var r=[];return s.default.each(t,function(t){var n=a.default.run(function(){return e(t)});n.success&&r.push(n.result)}),r.length<t.length&&a.default.throwNotLoaded(),r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=r(8),a=n(o),u=r(0),s=n(u)},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){return p.cmsState.subState("metadataCollection").subState(t)}function o(t){return(0,l.mapObject)(t.meta_data,function(t){var e=u(t,2),r=e[0],n=e[1];switch(r){case"date":return(0,c.deserializeAsDate)(n);case"number":return(0,c.deserializeAsInteger)(n);default:return n}})}function a(t){if(!(0,h.isCamelCase)(t))throw new v.ArgumentError('Metadata key "'+t+'" is not in camel case.')}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=r(46),l=r(0),f=r(8),d=function(t){return t&&t.__esModule?t:{default:t}}(f),p=r(5),h=r(21),v=r(1),y=function(){function t(e){var r=this;n(this,t),this._binaryId=e,e&&(this._loadableData=new d.default({state:i(e),loader:function(){return r._loadData()}}))}return s(t,[{key:"get",value:function(t){a(t);var e=this._getData();if(e)return e[(0,h.underscore)(t)]}},{key:"keys",value:function(){var t=this._getData();return t?(0,l.map)((0,l.keys)(t),h.camelCase):[]}},{key:"_getData",value:function(){if(this._binaryId)return this._loadableData.get()}},{key:"_loadData",value:function(){var t="blobs/"+encodeURIComponent(this._binaryId)+"/meta_data";return scrivito.CmsRestApi.get(t).then(o)}},{key:"binaryId",get:function(){return this._binaryId}}],[{key:"store",value:function(t,e){new d.default({state:i(t)}).set(o(e))}}]),t}();e.default=y},function(t,e,r){"use strict";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=r(3),u=function(t){return t&&t.__esModule?t:{default:t}}(a),s=r(0),c=r(1),l=function(){function t(e){var r=e.container,n=e.attributeName,o=e.typeInfo;i(this,t),this._container=r,this._attributeName=n,this._typeInfo=o}return o(t,[{key:"get",value:function(){return this._container.get(this.name(),this._typeInfo)}},{key:"update",value:function(t){this._container.update(n({},this.name(),[t,this._typeInfo]))}},{key:"container",value:function(){return this._container}},{key:"name",value:function(){return this._attributeName}},{key:"type",value:function(){return this._typeInfo[0]}},{key:"typeOptions",value:function(){return this._typeInfo[1]||{}}},{key:"equals",value:function(e){return e instanceof t&&(this.container().equals(e.container())&&this.name()===e.name())}},{key:"values",value:function(){return this._assertValidTypes(["enum","multienum"],"Only enum and multienum attributes can have values"),this._sortValuesByLocalization(this.typeOptions().values)}},{key:"titleForValue",value:function(t){this._assertValidTypes(["enum","multienum"],"Only enum and multienum attributes can have localized values");var e=(0,s.findWhere)(this.typeOptions().valuesLocalization,{value:t});return e&&e.title||t}},{key:"toString",value:function(){var t=this._dataForId(),e=t.name,r=t.objId,n=t.widgetId,i="<BasicField name="+e+" objId="+r;return i+=n?" widgetId="+n+">":">"}},{key:"id",value:function(){var t=this._dataForId(),e=t.name,r=t.objId,n=t.widgetId,i=e+"|"+r;return n&&(i+="|"+n),i}},{key:"_assertValidTypes",value:function(t,e){if(!(0,s.include)(t,this.type()))throw new c.InternalError(e)}},{key:"_dataForId",value:function(){var t={name:this.name()},e=this.container();return e instanceof u.default?t.objId=e.id():(t.objId=e.obj().id(),t.widgetId=e.id()),t}},{key:"_sortValuesByLocalization",value:function(t){var e=this;return t?this.typeOptions().valuesLocalization?(0,s.sortBy)(t,function(r){var n=(0,s.findIndex)(e.typeOptions().valuesLocalization,{value:r});return-1===n?t.length:n}):t:[]}}]),t}();e.default=l},function(t,e,r){"use strict";function n(t,e){var r=s[t];if(r)return r[e]}function i(t,e){h(t,e),s[t]=e}Object.defineProperty(e,"__esModule",{value:!0});var o=r(30),a=r(39),u=r(67),s={};e.getEditingConfigFor=n;var c=o.tcomb.struct({value:o.tcomb.String,title:o.tcomb.String}),l=o.tcomb.dict(o.tcomb.String,o.tcomb.struct({title:o.tcomb.maybe(o.tcomb.String),description:o.tcomb.maybe(o.tcomb.String),values:o.tcomb.maybe(o.tcomb.list(c))})),f=o.tcomb.list(o.tcomb.struct({title:o.tcomb.String,component:o.tcomb.maybe(o.tcomb.String),properties:o.tcomb.maybe(o.tcomb.list(o.tcomb.String))})),d=o.tcomb.dict(o.tcomb.String,o.tcomb.union([u.LinkType,o.tcomb.Date,o.tcomb.Function,o.tcomb.Nil,o.tcomb.Number,o.tcomb.String,o.tcomb.list(u.LinkType),o.tcomb.list(o.tcomb.String)])),p=o.tcomb.struct({attributes:o.tcomb.maybe(l),propertiesGroups:o.tcomb.maybe(f),title:o.tcomb.maybe(o.tcomb.String),description:o.tcomb.maybe(o.tcomb.String),thumbnail:o.tcomb.maybe(o.tcomb.String),titleForContent:o.tcomb.maybe(o.tcomb.Function),descriptionForContent:o.tcomb.maybe(o.tcomb.Function),thumbnailForContent:o.tcomb.maybe(o.tcomb.Function),properties:o.tcomb.maybe(o.tcomb.list(o.tcomb.String)),initialContent:o.tcomb.maybe(d)}),h=a.checkArgumentsFor("provideEditingConfig",[["className",o.tcomb.String],["editingConfig",p]],{docPermalink:"js-sdk/provideEditingConfig"});e.provideEditingConfig=i},function(t,e,r){"use strict";function n(t){return t.replace(c,function(t,e){var r=(0,s.default)(e),n=scrivito.Routing.recognizePath(r);return n&&(l[n]=e),r})}function i(t,e){if(t===e)return null;if("A"===t.nodeName){var r=scrivito.Routing.recognizePath(t.href),n=l[r];if(n)return(0,a.getWindowContext)().Obj.get(n)}return i(t.parentNode,e)}function o(){l={}}Object.defineProperty(e,"__esModule",{value:!0}),e.transformHTML=n,e.findTarget=i,e.reset=o;var a=r(52),u=r(293),s=function(t){return t&&t.__esModule?t:{default:t}}(u),c=/\bobjid:([a-f0-9]{16})\b([^"']*)/g,l={}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){return o(t),t instanceof y.default?s(t):t instanceof b.default?a(t):l(t)?u(t):scrivito.Routing.generate({obj:t})}function o(t){if(!t)throw new g.ArgumentError("Missing target.");if(!(t instanceof y.default||t instanceof d.default||t instanceof b.default))throw new g.ArgumentError("Target is invalid. Valid targets are instances of Obj or Link.")}function a(t){return t.url()}function u(t){var e=t.get("blob",["binary"]);return e?a(e):"#__empty_blob"}function s(t){return t.isExternal()?t.url():i(t.obj())}function c(){return(0,_.getWindowContext)()}function l(t){var e=c().getClass(t.objClass());return!!e&&h.default.forClass(e).isBinary()}Object.defineProperty(e,"__esModule",{value:!0}),e.basicUrlFor=i;var f=r(3),d=n(f),p=r(41),h=n(p),v=r(37),y=n(v),_=r(52),g=r(1),m=r(29),b=n(m)},function(t,e,r){"use strict";function n(){if(f)return{filters:f}}function i(){f=void 0}function o(t){if(scrivito.uiAdapter){v(t),t.filters&&(f=t.filters);var e=t.baseFilter;if(e){var r=e.query;r&&scrivito.uiAdapter.configureContentBrowser((0,u.default)({baseQuery:r}))}}}Object.defineProperty(e,"__esModule",{value:!0}),e.getContentBrowserConfiguration=n,e.resetContentBrowserConfiguration=i,e.default=o;var a=r(125),u=function(t){return t&&t.__esModule?t:{default:t}}(a),s=r(39),c=r(30),l=r(67),f=void 0,d=c.tcomb.Object,p=c.tcomb.struct({query:l.ObjSearchType}),h=c.tcomb.struct({filters:c.tcomb.maybe(d),baseFilter:c.tcomb.maybe(p)},"Configuration"),v=(0,s.checkArgumentsFor)("configureContentBrowser",[["configuration",h]],{docPermalink:"js-sdk/configureContentBrowser"})},function(t,e,r){"use strict";function n(t){if(!t)return t;switch(void 0===t?"undefined":a(t)){case"string":case"number":case"boolean":return t;case"object":return t instanceof c.default?n(t.params()):(0,u.isDate)(t)?t:(0,u.isArray)(t)?i(t):o(t)}}function i(t){var e=[];return t.forEach(function(t){var r=n(t);void 0!==r&&e.push(r)}),e}function o(t){var e={};return(0,u.each)(t,function(t,r){var i=n(t);void 0!==i&&(e[r]=i)}),e}Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=n;var u=r(0),s=r(64),c=function(t){return t&&t.__esModule?t:{default:t}}(s)},function(t,e,r){"use strict";function n(){return(0,i.getWindowContext)()._privateRealm._registry}Object.defineProperty(e,"__esModule",{value:!0}),e.getWindowRegistry=void 0;var i=r(52);e.getWindowRegistry=n},function(t,e,r){"use strict";function n(t){return t.displayName||t.name}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t,e){var r=(0,C.default)(t),n=r.objId,i=r.widgetId;scrivito.uiAdapter.insertWidget(n,i,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.WIDGET_TAG_CONTEXT_KEY=void 0;var l=function(){function t(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),d=r(233),p=n(d),h=r(17),v=n(h),y=r(76),_=n(y),g=r(0),m=r(75),b=n(m),w=r(41),k=n(w),j=r(126),O=r(129),C=n(O),P=r(6),E=n(P),A=r(312),S=n(A),x=r(235),T=n(x),F=function(t){function e(t){a(this,e);var r=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.state={hasFocus:!1,isDragged:!1},r._onMouseOver=r._onMouseOver.bind(r),r._onMouseOut=r._onMouseOut.bind(r),r._onWidgetFocus=r._onWidgetFocus.bind(r),r._onWidgetBlur=r._onWidgetBlur.bind(r),r._setDragState=r._setDragState.bind(r),r}return s(e,t),f(e,[{key:"componentDidMount",value:function(){if((0,b.default)()&&this._widget){var t=(0,C.default)(this.context._scrivitoWidget),e=t.objId,r=t.widgetId,n=_.default.findDOMNode(this._widget);scrivito.uiAdapter.registerWidgetDropZoneInDom(n,e,r)}this._focusToken=scrivito.WidgetFocus.subscribe({onFocus:this._onWidgetFocus,onBlur:this._onWidgetBlur})}},{key:"componentWillUnmount",value:function(){scrivito.WidgetFocus.unsubscribe(this._focusToken)}},{key:"getChildContext",value:function(){return o({},"_scrivitoWidget",null)}},{key:"render",value:function(){var t=this,e=this.context._scrivitoWidget;return e?(0,b.default)()?v.default.createElement(this.props.tag,(0,g.extend)((0,g.omit)(this.props,"tag","className","style"),{ref:function(e){return t._widget=e},className:this._className(),style:this._style(),onMouseOver:this._onMouseOver,onMouseOut:this._onMouseOut,children:[v.default.createElement(S.default,{key:"menuMarker",widget:e,setDragState:this._setDragState})].concat(i(v.default.Children.toArray(this.props.children)),[this._renderOptionMarker("top"),this._renderOptionMarker("bottom")])},this._dataProps())):v.default.createElement(this.props.tag,(0,g.omit)(this.props,"tag")):(scrivito.logError("Detected inappropriate placing of Scrivito.WidgetTag: It is intended to be used exclusively as the top-level element inside a Widget component."),null)}},{key:"_setDragState",value:function(t){this.setState({isDragging:t})}},{key:"_className",value:function(){return this.state.hasFocus?this.props.className?this.props.className+" scrivito_active scrivito_entered":"scrivito_active scrivito_entered":this.props.className}},{key:"_dataProps",value:function(){var t={"data-scrivito-private-widget":!0,"data-scrivito-private-dropzone":!0};return this._isStructureMarker()&&(t["data-scrivito-private-structure-widget"]=!0),this.state.isDragging&&(t["data-scrivito-private-dropback"]=!0),t}},{key:"_style",value:function(){return this.state.isDragging?this.props.style?(0,g.extend)(this.props.style,{opacity:.5}):{opacity:.5}:this.props.style}},{key:"_isStructureMarker",value:function(){var t=(0,j.getWindowRegistry)(),e=t.widgetClassFor(this.context._scrivitoWidget.objClass()),r=k.default.forClass(e);return!!r&&(0,g.some)(r.attributes,function(t,e){var n=r.attributeDefinition(e);return"widgetlist"===l(n,1)[0]})}},{key:"_onMouseOver",value:function(t){t.stopPropagation(),scrivito.WidgetFocus.notifyFocus(this._focusToken)}},{key:"_onMouseOut",value:function(t){t.stopPropagation(),scrivito.WidgetFocus.notifyBlur(this._focusToken)}},{key:"_onWidgetFocus",value:function(){this.setState({hasFocus:!0})}},{key:"_onWidgetBlur",value:function(){this.setState({hasFocus:!1})}},{key:"_renderOptionMarker",value:function(t){return v.default.createElement(T.default,{key:"optionMarker-"+t,position:t,widget:this.context._scrivitoWidget,insertWidget:c,isAlwaysShown:scrivito.uiAdapter.alwaysShowOptionMarkers()})}}]),e}(v.default.Component);F.displayName="Scrivito.WidgetTag",F.defaultProps={tag:"div"},F.contextTypes=o({},"_scrivitoWidget",p.default.object),F.childContextTypes=o({},"_scrivitoWidget",p.default.object),e.WIDGET_TAG_CONTEXT_KEY="_scrivitoWidget",e.default=(0,E.default)(F)},function(t,e,r){"use strict";function n(t){return t instanceof o.default?{objId:t.id()}:{objId:t.obj().id(),widgetId:t.id()}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var i=r(3),o=function(t){return t&&t.__esModule?t:{default:t}}(i)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=r(3),u=n(a),s=r(41),c=n(s),l=r(1),f=r(85),d=r(27),p=function(){function t(e){i(this,t),this._registry=e}return o(t,[{key:"getObj",value:function(t,e){var r=u.default.get(e);return this._checkObjClassAndWrapInAppClass(t,r)}},{key:"getObjIncludingDeleted",value:function(t,e){var r=u.default.getIncludingDeleted(e);return this._checkObjClassAndWrapInAppClass(t,r)}},{key:"read",value:function(t,e){var r=c.default.basicFieldFor(t,e);if(r){var n=r.get();return(0,d.wrapInAppClass)(this._registry,n)}}},{key:"update",value:function(t,e){var r=this._registry.objClassNameFor(t.constructor);if(!r){var n=void 0;throw n=t.constructor===this._registry.defaultClassForObjs?"Obj":"Widget",new l.ArgumentError('Updating is not supported on the base class "'+n+'".')}if(e.constructor!==Object)throw new l.ArgumentError("The provided attributes are invalid. They have to be an Object with valid Scrivito attribute values.");var i=c.default.forInstance(t),o=(0,f.prepareAttributes)(e,i,r);t._scrivitoPrivateContent.update(o)}},{key:"wrapInAppClass",value:function(t){return(0,d.wrapInAppClass)(this._registry,t)}},{key:"_checkObjClassAndWrapInAppClass",value:function(t,e){var r=this._registry.objClassNameFor(t);if(r&&r!==e.objClass())throw new l.ResourceNotFoundError('Obj with id "'+e.id()+'" is not of type "'+r+'".');return this.wrapInAppClass(e)}}]),t}();e.default=p},,,,,,,,,,,,function(t,e,r){"use strict";function n(t){i();var e=t.location,r=e.hash,n=r.indexOf(u);if(!(n<0)){var o=r.substr(n+u.length,3),a=r.substring(0,n);"#"===a&&(a="");var c=e.href.toString().replace(r,a);s=parseInt(o,10)||0,t.history.replaceState({},"",c)}}function i(){s=0}function o(t){var e=t.toString();return t.hash||(e+="#"),""+e+u+(s+1)}function a(){return s}Object.defineProperty(e,"__esModule",{value:!0});var u="&scrivito.authFailedCount=",s=void 0;e.default={init:n,augmentedRedirectUrl:o,reset:i,currentFailureCount:a}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var r=o(t,e);if(r)return r;var n=t._widget_pool;return l.default.find(n,function(t,n){if(r=o(t,e))return r.parentWidgetId=n,!0}),r}function o(t,e){var r=void 0;return l.default.find(t,function(t,n){if(!s.default.isSystemAttribute(n)){var i=a(t,2),o=i[0],u=i[1];if(u&&"widgetlist"===o){var c=u.indexOf(e);if(-1!==c)return r={attributeName:n,index:c},!0}}}),r}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default=i;var u=r(40),s=n(u),c=r(0),l=n(c)},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(51),a=function(t){return t&&t.__esModule?t:{default:t}}(o),u=function(){function t(e,r,i,o){n(this,t),this._id=e,this.url=r,this.filename=i,this._objId=o}return i(t,[{key:"noCacheUrl",value:function(){if("published"===scrivito.currentWorkspaceId())return scrivito.Promise.resolve(null);var t="blobs/"+encodeURIComponent(this._id)+"/no_cache";return scrivito.CmsRestApi.get(t).then(function(t){return t.private_access.get.url}).catch(function(t){return scrivito.displayError(t),scrivito.Promise.reject(t)})}},{key:"copy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new a.default({idToCopy:this._id},{filename:t.filename,contentType:t.content_type})}}]),t}();e.default=u},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=d[t.id()];return e||s.default.pluck(l.default.all(),"name")}function o(){scrivito.editingContext.isViewMode()||scrivito.on("content",function(t){var e=scrivito.WidgetlistFieldElement.all($(t));s.default.each(e,function(t){var e=t.basicField();d[e.id()]=JSON.parse(t.dom_element().attr(f))})})}function a(){d={}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var u=r(0),s=n(u),c=r(38),l=n(c),f="data-scrivito-private-field-widget-allowed-classes",d={};i.init=o,i.clearCache=a},function(t,e,r){t.exports=r(212)},,,,,,,,,,,function(t,e,r){"use strict";function n(){if(window.parent!==window){var t=window.parent.connectAppDocument;return t?t(window.document):void 0}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e,r){"use strict";r(116),r(159),r(187),r(188),r(191),r(192),r(193),r(196),r(197),r(198),r(199),r(200),r(3),r(213),r(214),r(215),r(219),r(220),r(221)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=r(0),o=n(i),a=r(1),u=r(19),s=n(u);!function(){function t(t,r){return e(t.prototype,r)}function e(t,e){o.default.each(e,function(e,n){t[e]=r(n)})}function r(t){return function(){for(var e=this,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return scrivito.PublicPromise.resolve((0,s.default)(function(){return e[t].apply(e,n)}))}}function n(){throw new a.InternalError("this method is supposed to be overwritten by calling provideAsyncMethods")}scrivito.provideAsyncMethods=e,scrivito.provideAsyncClassMethods=e,scrivito.provideAsyncInstanceMethods=t,scrivito.asyncMethodStub=n}()},function(t,e,r){"use strict";function n(t){var e=u;try{return u=[],t(),new c(u)}finally{u=e}}function i(t){u?u.push({reason:"missing",loader:t}):(a("not yet fully loaded"),t())}function o(t){u?u.push({reason:"outdated",loader:t}):(a("outdated"),t())}function a(t){scrivito.logError("Scrivito data is "+t+". Try re-running or use Scrivito.load or Scrivito.connect.")}Object.defineProperty(e,"__esModule",{value:!0});var u,s=r(0);e.capture=n,e.notifyMissingData=i,e.notifyOutdatedData=o;var c=function(){function t(t){this.captureList=t}return t.prototype.isAllDataLoaded=function(){return!s.findWhere(this.captureList,{reason:"missing"})},t.prototype.isAllDataUpToDate=function(){return 0===this.captureList.length},t.prototype.loadRequiredData=function(){if(0===this.captureList.length)return null;this.captureList.forEach(function(t){return t.loader()})},t}();e.CaptureReport=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i={},o={status:void 0},a=function(){function t(t){if(!t)throw new n.InternalError("LoadableValue needs stateContainer");this.container=t,this.id=t.id()}return t.resetLoadingState=function(){i={}},t.prototype.setLoading=function(t){i[this.id]=t},t.prototype.getLoading=function(){return i[this.id]},t.prototype.status=function(){return this.getState().status||"MISSING"},t.prototype.value=function(){var t=this.getState();if("AVAILABLE"===t.status)return t.value},t.prototype.error=function(){var t=this.getState();if("ERROR"===t.status)return t.error},t.prototype.version=function(){var t=this.getState();if(void 0!==t.status)return t.version},t.prototype.transitionToMissing=function(){this.setState({status:void 0})},t.prototype.transitionToAvailable=function(t,e){this.setState({status:"AVAILABLE",value:t,version:e})},t.prototype.transitionToError=function(t,e){this.setState({status:"ERROR",error:t,version:e})},t.prototype.setState=function(t){delete i[this.id],this.container.set(t)},t.prototype.getState=function(){return this.container.get()||o},t}();e.default=a},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),o=r(0),a=0,u=Object.assign||o.extend,s=function(){function t(){}return t.prototype.get=function(){var t=this,e=this.untrackedGet();return this.recordDetector(function(){return e!==t.untrackedGet()}),e},t.prototype.recordDetector=function(t){this.getTree().recordDetector(t)},t.prototype.clear=function(){this.set(void 0)},t.prototype.subState=function(t){return new l(this,t)},t.prototype.setSubState=function(t,e){var r=this.untrackedGet();if(void 0===r){var n=(o={},o[t]=e,o);this.set(n)}else{var i=u({},r);i[t]=e,this.set(i)}var o},t.prototype.getSubState=function(t){var e=this.untrackedGet();if(void 0!==e)return e[t]},t}(),c=function(t){function e(){var e=t.call(this)||this;return e.treeId=(a++).toString(),e.clearListeners(),e.batchUpdates=!1,e.version=0,e}return n(e,t),e.prototype.untrackedGet=function(){return this.state},e.prototype.set=function(t){this.state=t,this.version++,this.batchUpdates||this.notifyListeners()},e.prototype.trackChanges=function(t){var e=this,r=this.version,n=this.recordDetectors(t);return function(){return e.version!==r&&!!o.find(n,function(t){return t()})}},e.prototype.recordDetector=function(t){var e=this.detectorRecording;void 0!==e&&e.push(t)},e.prototype.getTree=function(){return this},e.prototype.id=function(){return this.treeId},e.prototype.subscribe=function(t){var e=this,r=!0,n=function(){r&&t()};return this.ensureCanMutateListeners(),this.listeners.push(n),function(){r=!1;var t=e.listeners.indexOf(n);e.ensureCanMutateListeners(),e.listeners.splice(t,1)}},e.prototype.withBatchedUpdates=function(t){var e=this.state,r=this.batchUpdates;try{this.batchUpdates=!0,t()}finally{this.batchUpdates=r,this.batchUpdates||e===this.state||this.notifyListeners()}},e.prototype.listenerCount=function(){return this.listeners.length},e.prototype.clearListeners=function(){this.listeners=[]},e.prototype.recordDetectors=function(t){if(void 0!==this.detectorRecording)throw new i.InternalError("no nested detector recording!");try{return this.detectorRecording=[],t(),this.detectorRecording}finally{this.detectorRecording=void 0}},e.prototype.notifyListeners=function(){this.listenersToNotify=this.listeners,this.listenersToNotify.forEach(function(t){return t()})},e.prototype.ensureCanMutateListeners=function(){this.listenersToNotify===this.listeners&&(this.listeners=this.listeners.slice())},e}(s);e.default=c;var l=function(t){function e(e,r){var n=t.call(this)||this;return n.parentState=e,n.key=r,n.tree=e.getTree(),n}return n(e,t),e.prototype.getTree=function(){return this.tree},e.prototype.untrackedGet=function(){return this.parentState.getSubState(this.key)},e.prototype.set=function(t){this.parentState.setSubState(this.key,t)},e.prototype.id=function(){var t=this.key.replace(/\\/g,"\\\\").replace(/\//g,"\\/");return this.parentState.id()+"/"+t},e}(s)},function(t,e,r){"use strict";function n(t,e,r){var n=u.getTypeName(e),i=r.length?"/"+r.join("/")+": "+n:n;return"Invalid value "+s(t)+" supplied to "+i}function i(t,e,r,i){return u.Function.is(e.getValidationErrorMessage)?e.getValidationErrorMessage(t,r,i):n(t,e,r)}function o(t,e,r){r=r||{};var n=u.Array.is(r)?r:r.path||[];return new f(a(t,e,n,r))}function a(t,e,r,n){return u.isType(e)?d[e.meta.kind](t,e,r,n):d.es6classes(t,e,r,n)}var u=r(164),s=u.stringify,c={},l=u.struct({message:u.Any,actual:u.Any,expected:u.Any,path:u.list(u.union([u.String,u.Number]))},"ValidationError");l.of=function(t,e,r,n){return new l({message:i(t,e,r,n),actual:t,expected:e,path:r})};var f=u.struct({errors:u.list(l),value:u.Any},"ValidationResult");f.prototype.isValid=function(){return!this.errors.length},f.prototype.firstError=function(){return this.isValid()?null:this.errors[0]},f.prototype.toString=function(){return this.isValid()?"[ValidationResult, true, "+s(this.value)+"]":"[ValidationResult, false, ("+this.errors.map(function(t){return s(t.message)}).join(", ")+")]"};var d=o.validators={};d.es6classes=function(t,e,r,n){return{value:t,errors:t instanceof e?[]:[l.of(t,e,r,n.context)]}},d.irreducible=d.enums=function(t,e,r,n){return{value:t,errors:e.is(t)?[]:[l.of(t,e,r,n.context)]}},d.list=function(t,e,r,n){if(!u.Array.is(t))return{value:t,errors:[l.of(t,e,r,n.context)]};for(var i={value:[],errors:[]},o=0,s=t.length;o<s;o++){var c=a(t[o],e.meta.type,r.concat(o),n);i.value[o]=c.value,i.errors=i.errors.concat(c.errors)}return i},d.subtype=function(t,e,r,n){var i=a(t,e.meta.type,r,n);return i.errors.length?i:(e.meta.predicate(i.value)||(i.errors=[l.of(t,e,r,n.context)]),i)},d.maybe=function(t,e,r,n){return u.Nil.is(t)?{value:t,errors:[]}:a(t,e.meta.type,r,n)},d.struct=function(t,e,r,n){if(!u.Object.is(t))return{value:t,errors:[l.of(t,e,r,n.context)]};if(e.is(t))return{value:t,errors:[]};var i={value:{},errors:[]},o=e.meta.props,s=e.meta.defaultProps||c;for(var f in o)if(o.hasOwnProperty(f)){var d=t[f];void 0===d&&(d=s[f]);var p=a(d,o[f],r.concat(f),n);i.value[f]=p.value,i.errors=i.errors.concat(p.errors)}if(n.hasOwnProperty("strict")?n.strict:e.meta.strict)for(var h in t)t.hasOwnProperty(h)&&!o.hasOwnProperty(h)&&i.errors.push(l.of(t[h],u.Nil,r.concat(h),n.context));return i.errors.length||(i.value=new e(i.value)),i},d.tuple=function(t,e,r,n){var i=e.meta.types,o=i.length;if(!u.Array.is(t)||t.length>o)return{value:t,errors:[l.of(t,e,r,n.context)]};for(var s={value:[],errors:[]},c=0;c<o;c++){var f=a(t[c],i[c],r.concat(c),n);s.value[c]=f.value,s.errors=s.errors.concat(f.errors)}return s},d.dict=function(t,e,r,n){if(!u.Object.is(t))return{value:t,errors:[l.of(t,e,r,n.context)]};var i={value:{},errors:[]};for(var o in t)if(t.hasOwnProperty(o)){var s=r.concat(o),c=a(o,e.meta.domain,s,n),f=a(t[o],e.meta.codomain,s,n);i.value[o]=f.value,i.errors=i.errors.concat(c.errors,f.errors)}return i},d.union=function(t,e,r,n){var i=e.dispatch(t);return u.Function.is(i)?a(t,i,r.concat(e.meta.types.indexOf(i)),n):{value:t,errors:[l.of(t,e,r,n.context)]}},d.intersection=function(t,e,r,n){for(var i=e.meta.types,o=i.length,u={value:t,errors:[]},s=0,c=0;c<o;c++){"struct"===i[c].meta.kind&&s++;var f=a(t,i[c],r,n);u.errors=u.errors.concat(f.errors)}return s>1&&u.errors.push(l.of(t,e,r,n.context)),u},d.interface=function(t,e,r,n){if(!u.Object.is(t))return{value:t,errors:[l.of(t,e,r,n.context)]};var i={value:{},errors:[]},o=e.meta.props;for(var s in o){var c=a(t[s],o[s],r.concat(s),n);i.value[s]=c.value,i.errors=i.errors.concat(c.errors)}if(n.hasOwnProperty("strict")?n.strict:e.meta.strict)for(var f in t)o.hasOwnProperty(f)||u.Nil.is(t[f])||i.errors.push(l.of(t[f],u.Nil,r.concat(f),n.context));return i},u.mixin(u,{ValidationError:l,ValidationResult:f,validate:o}),t.exports=u},function(t,e,r){/*! @preserve
 *
 * tcomb.js - Type checking and DDD for JavaScript
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2014-2016 Giulio Canti
 *
 */
var n=r(4);n.Any=r(69),n.Array=r(166),n.Boolean=r(92),n.Date=r(167),n.Error=r(168),n.Function=r(63),n.Nil=r(93),n.Number=r(94),n.Integer=r(169),n.IntegerT=n.Integer,n.Object=r(170),n.RegExp=r(171),n.String=r(71),n.Type=r(172),n.TypeT=n.Type,n.Arr=n.Array,n.Bool=n.Boolean,n.Dat=n.Date,n.Err=n.Error,n.Func=n.Function,n.Num=n.Number,n.Obj=n.Object,n.Re=n.RegExp,n.Str=n.String,n.dict=r(72),n.declare=r(173),n.enums=r(174),n.irreducible=r(12),n.list=r(97),n.maybe=r(175),n.refinement=r(70),n.struct=r(177),n.tuple=r(100),n.union=r(181),n.func=r(182),n.intersection=r(183),n.subtype=n.refinement,n.inter=r(184),n.interface=n.inter,n.assert=n,n.update=r(185),n.mixin=r(73),n.isType=r(10),n.is=r(26),n.getTypeName=r(7),n.match=r(186),t.exports=n},function(t,e){t.exports=function(t){throw new TypeError("[tcomb] "+t)}},function(t,e,r){var n=r(12),i=r(23);t.exports=n("Array",i)},function(t,e,r){var n=r(12);t.exports=n("Date",function(t){return t instanceof Date})},function(t,e,r){var n=r(12);t.exports=n("Error",function(t){return t instanceof Error})},function(t,e,r){var n=r(70),i=r(94);t.exports=n(i,function(t){return t%1==0},"Integer")},function(t,e,r){var n=r(12),i=r(22);t.exports=n("Object",i)},function(t,e,r){var n=r(12);t.exports=n("RegExp",function(t){return t instanceof RegExp})},function(t,e,r){var n=r(12),i=r(10);t.exports=n("Type",i)},function(t,e,r){var n=(r(4),r(15),r(10),r(20),r(73)),i=r(7),o=r(96),a=1;t.exports=function(t){function e(t,e){return r(t,e)}var r;return e.define=function(i){return o(i)&&e.hasOwnProperty("dispatch")&&(i.dispatch=e.dispatch),r=i,n(e,r,!0),t&&(r.displayName=e.displayName=t,e.meta.name=t),e.meta.identity=r.meta.identity,e.prototype=r.prototype,e},e.displayName=t||i(e)+"$"+a++,e.meta={identity:!1},e.prototype=null,e}},function(t,e,r){function n(t){return Object.keys(t).map(function(t){return o.stringify(t)}).join(" | ")}function i(t,e){function r(t,e){return t}var i=e||n(t);return r.meta={kind:"enums",map:t,name:e,identity:!0},r.displayName=i,r.is=function(e){return t.hasOwnProperty(e)},r}var o=r(4),a=(r(15),r(50),r(61));r(22);i.of=function(t,e){t=a(t)?t.split(" "):t;var r={};return t.forEach(function(t){r[t]=t}),i(r,e)},i.getDefaultName=n,t.exports=i},function(t,e,r){function n(t){return"?"+f(t)}function i(t,e){function r(e,r){return c.is(e)?e:s(t,e,r)}if(o(t)||t===u||t===c)return t;var i=e||n(t),f=a(t);return r.meta={kind:"maybe",type:t,name:e,identity:f},r.displayName=i,r.is=function(e){return c.is(e)||l(e,t)},r}var o=(r(4),r(15),r(9),r(176)),a=r(24),u=r(69),s=r(25),c=r(93),l=(r(50),r(26)),f=r(7);i.getDefaultName=n,t.exports=i},function(t,e,r){var n=r(10);t.exports=function(t){return n(t)&&"maybe"===t.meta.kind}},function(t,e,r){function n(t){return"Struct"+f(t)}function i(t,e){return d(a,t,e)}function o(t){return s(t)||(t=c(t)?{}:{name:t}),t.hasOwnProperty("strict")||(t.strict=a.strict),t.hasOwnProperty("defaultProps")||(t.defaultProps={}),t}function a(t,e){function r(e,n){if(r.is(e))return e;if(!(this instanceof r))return new r(e,n);for(var i in t)if(t.hasOwnProperty(i)){var o=t[i],a=e[i];void 0===a&&(a=c[i]),this[i]=l(o,a,null)}}e=o(e);var a=e.name,s=e.strict,c=e.defaultProps,f=a||n(t);return r.meta={kind:"struct",props:t,name:a,identity:!1,strict:s,defaultProps:c},r.displayName=f,r.is=function(t){return t instanceof r},r.update=function(t,e){return new r(u.update(t,e))},r.extend=function(t,e){return i([r].concat(t),e)},r}var u=r(4),s=(r(15),r(71),r(63),r(62),r(22)),c=r(20),l=r(25),f=(r(7),r(72),r(98)),d=r(99);a.strict=!1,a.getOptions=o,a.getDefaultName=n,a.extend=i,t.exports=a},function(t,e,r){var n=r(10);t.exports=function(t){return n(t)&&"struct"===t.meta.kind}},function(t,e,r){var n=r(10);t.exports=function(t){return n(t)&&"interface"===t.meta.kind}},function(t,e,r){function n(t){return u(t)&&"subtype"===t.meta.kind}function i(t){return n(t)?[t.meta.predicate].concat(i(t.meta.type)):[]}function o(t){return n(t)?o(t.meta.type):t}function a(t){return{predicates:i(t),unrefinedType:o(t)}}var u=r(10);t.exports=a},function(t,e,r){function n(t){return t.map(a).join(" | ")}function i(t,e){function r(t,e){if(a)return t;var n=r.dispatch(t);return!n&&r.is(t)?t:s(n,t,e)}var i=e||n(t),a=t.every(u);return r.meta={kind:"union",types:t,name:e,identity:a},r.displayName=i,r.is=function(e){return t.some(function(t){return c(e,t)})},r.dispatch=function(e){for(var r=0,n=t.length;r<n;r++){var i=t[r];if(l(i)){var o=i.dispatch(e);if(!f(o))return o}else if(c(e,i))return i}},r.update=function(t,e){return r(o.update(t,e))},r}var o=r(4),a=(r(15),r(9),r(7)),u=r(24),s=(r(23),r(25)),c=r(26),l=(r(50),r(96)),f=r(20);i.getDefaultName=n,t.exports=i},function(t,e,r){function n(t,e){return"("+t.map(d).join(", ")+") => "+d(e)}function i(t){return u.is(t)&&c(t.instrumentation)}function o(t){for(var e=t.length,r=!1,n=e-1;n>=0;n--){var i=t[n];if(!p(i)||"maybe"!==i.meta.kind)return n+1;r=!0}return r?0:e}function a(t,e,r){function u(t,e){return i(t)?t:u.of(t)}t=s(t)?t:[t];var c=r||n(t,e),d=t.length;o(t);return u.meta={kind:"func",domain:t,codomain:e,name:r,identity:!0},u.displayName=c,u.is=function(r){return i(r)&&r.instrumentation.domain.length===d&&r.instrumentation.domain.every(function(e,r){return e===t[r]})&&r.instrumentation.codomain===e},u.of=function(r,n){function i(){var i=Array.prototype.slice.call(arguments),o=i.length;if(n&&o<d){var u=Function.prototype.bind.apply(r,[this].concat(i));return a(t.slice(o),e).of(u,!0)}return l(e,r.apply(this,i))}return u.is(r)?r:(i.instrumentation={domain:t,codomain:e,f:r},i.displayName=f(r),i)},u}var u=(r(4),r(15),r(63)),s=r(23),c=(r(97),r(22)),l=r(25),f=(r(20),r(62),r(100),r(49)),d=r(7),p=r(10);a.getDefaultName=n,a.getOptionalArgumentsIndex=o,t.exports=a},function(t,e,r){function n(t){return t.map(u).join(" & ")}function i(t,e){function r(t,e){return t}var i=e||n(t),u=t.every(s);return r.meta={kind:"intersection",types:t,name:e,identity:u},r.displayName=i,r.is=function(e){return t.every(function(t){return a(e,t)})},r.update=function(t,e){return r(o.update(t,e))},r}var o=r(4),a=(r(15),r(9),r(23),r(24),r(26)),u=r(7),s=r(24);i.getDefaultName=n,t.exports=i},function(t,e,r){function n(t,e){return p(o,t,e)}function i(t){return u(t)||(t=s(t)?{}:{name:t}),t.hasOwnProperty("strict")||(t.strict=o.strict),t}function o(t,e){function r(e,r){if(v)return e;var n=!0,i=v?{}:h({},e);for(var o in t){var a=t[o],u=e[o],s=c(a,u,null);n=n&&u===s,i[o]=s}return n&&(i=e),i}e=i(e);var o=e.name,u=e.strict,p=o||l(t),v=Object.keys(t).map(function(e){return t[e]}).every(f);return r.meta={kind:"interface",props:t,name:o,identity:v,strict:u},r.displayName=p,r.is=function(e){if(s(e))return!1;if(u)for(var r in e)if(!t.hasOwnProperty(r))return!1;for(var n in t)if(!d(e[n],t[n]))return!1;return!0},r.update=function(t,e){return r(a.update(t,e))},r.extend=function(t,e){return n([r].concat(t),e)},r}var a=r(4),u=(r(15),r(71),r(63),r(62),r(22)),s=r(20),c=r(25),l=(r(7),r(72),r(98)),f=r(24),d=r(26),p=r(99),h=r(101);o.strict=!1,o.getOptions=i,o.getDefaultName=l,o.extend=n,t.exports=o},function(t,e,r){function n(t){return v(t)?t instanceof Date||t instanceof RegExp?t:_({},t):y(t)?t.concat():t}function i(t){return a.commands.hasOwnProperty(t)}function o(t){return a.commands[t]}function a(t,e){var r,u=t,s=!1;for(var c in e)e.hasOwnProperty(c)&&(i(c)?(r=o(c)(e[c],u),r!==t?(s=!0,u=r):u=t):(u===t&&(u=n(t)),r=a(u[c],e[c]),s=s||r!==u[c],u[c]=r));return s?u:t}function u(t,e){return t(e)}function s(t,e){return t.length>0?e.concat(t):e}function c(t,e){if(t.length>0){e=n(e);for(var r=0,i=t.length;r<i;r++)delete e[t[r]]}return e}function l(t){return t}function f(t,e){return t.length>0?(e=n(e),t.reduce(function(t,e){return t.splice.apply(t,e),t},e)):e}function d(t,e){if(t.from!==t.to){e=n(e);var r=e[t.to];e[t.to]=e[t.from],e[t.from]=r}return e}function p(t,e){return t.length>0?t.concat(e):e}function h(t,e){var r=!1,i=n(e);for(var o in t)t.hasOwnProperty(o)&&(i[o]=t[o],r=r||i[o]!==e[o]);return r?i:e}var v=(r(4),r(22)),y=(r(9),r(23)),_=(r(95),r(101));a.commands={$apply:u,$push:s,$remove:c,$set:l,$splice:f,$swap:d,$unshift:p,$merge:h},t.exports=a},function(t,e,r){var n=r(4),i=r(9),o=r(10),a=r(69);t.exports=function(t){for(var e,r,u,s=1,c=arguments.length;s<c;)if(e=arguments[s],r=arguments[s+1],u=arguments[s+2],i(u)&&!o(u)?s+=3:(u=r,r=a.is,s+=2),e.is(t)&&r(t))return u(t);n.fail("Match error")}},function(t,e,r){"use strict";var n=r(5);!function(){function t(t){i()||scrivito.nextTick(function(){(0,n.withBatchedUpdates)(function(){return e(r)})}),r.push(t)}function e(t){r=[];try{t.forEach(function(t){return t()})}finally{i()&&e(r)}}var r=[],i=function(){return r.length};scrivito.batchedStateUpdater={add:t}}()},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=r(14),u=n(a),s=r(53),c=n(s),l=r(0),f=n(l),d=r(1),p=r(142),h=n(p),v=r(189),y=n(v),_=r(56);!function(){function t(){return j?scrivito.Promise.resolve():(O||(O=new u.default),O.promise)}function e(e,n,i){return t().then(function(){return r(e,n,i).then(function(t){return t&&t.task&&1===f.default.size(t)?b(t.task):t})})}function r(t,e,r){return a(t,function(i){return C.perform(function(o){return n(m({method:t,path:e,requestParams:r,timeout:i,authorization:o}))})})}function n(t){return scrivito.Promise.resolve(t).catch(v)}function a(t,e){var r=new E;return s(r,t,function(){return l(r,function(){return e(r.remainingTime())})})}function s(t,e,r){return"POST"===e?r():r().catch(function(e){if(!t.timedOut()){if(e instanceof d.BackendError)return r();if(e instanceof d.NetworkError)return r()}throw e})}function l(t,e){return function r(n){return e().catch(function(e){if(e instanceof d.NetworkError&&429===e.httpCode){var i=e.response,o=p(i.getResponseHeader("Retry-After"),n);if(t.cover(Date.now()+o))return scrivito.Promise.resolve(scrivito.waitMs(o)).then(function(){return r(n+1)});throw new d.RateLimitExceededError("rate limit exceeded",429)}throw e})}(0)}function p(t,e){var r=.5*Math.pow(2,e)*1e3;return Math.max(r,1e3*t)}function v(t){if(void 0===t.status||!f.default.isNumber(t.status))throw t;var e=void 0;try{e=JSON.parse(t.responseText)}catch(e){throw new d.NetworkError(t)}if("auth_missing"===e.code&&e.details){var r=h.default.augmentedRedirectUrl((0,_.location)()),n=e.details.visit.replace("retry=RETRY","retry="+h.default.currentFailureCount()).replace(/\$RETURN_TO/,encodeURIComponent(r));return(0,_.redirectTo)(n)}var i=e.error;if(401===t.status)throw new d.UnauthorizedError(i,t.status,e.code,e.details);if(403===t.status)throw new d.AccessDeniedError(i,t.status,e.code);if(429===t.status)throw new d.NetworkError(t);if(i){if(500===t.status)throw new d.BackendError(i,t.status);if("4"===t.status.toString()[0]&&e.error)throw d.ClientError.for(i,t.status,e.code)}throw new d.NetworkError(t)}function g(t,e){return{path:e,verb:t,params:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}}}function m(t){var e=t.method,r=t.path,n=t.requestParams,i=t.timeout,o=t.authorization,a=(0,c.default)(k+"/tenants/"+j+"/perform").scheme("https").toString(),u=g(e,r,n);return scrivito.fetch(e,a,{params:u,timeout:i,authorization:o,forceVerification:P})}function b(t){switch(t.status){case"success":return t.result;case"error":throw d.ClientError.for(t.message,412,t.code);case"open":return scrivito.wait(2).then(function(){return r("GET","tasks/"+t.id).then(function(t){return b(t)})});default:throw new d.ScrivitoError("Invalid task response (unknown status)")}}var w=15e3,k=void 0,j=void 0,O=void 0,C=void 0,P=void 0;scrivito.CmsRestApi={init:function(t,e,r){e&&(k=t,j=e,O&&O.resolve()),C=r||C||y.default},reset:function(){k=void 0,j=void 0,O=void 0,C=void 0,P=void 0},get:function(t,r){return e("GET",t,r)},put:function(t,r){return e("PUT",t,r)},post:function(t,r){return e("POST",t,r)},delete:function(t,r){return e("DELETE",t,r)},requestBuiltInUserSession:function(e){return t().then(function(){var t="sessions/"+e,r=a("PUT",function(e){return n(m({method:"PUT",path:t,timeout:e}))});return r.then(h.default.reset),r})},enableForceVerification:function(){P=!0},currentPublicAuthorizationState:function(){return C?C.currentState?"[API] "+C.currentState():"[API]: authorization provider without currentState()":"[API]: no authorization provider"},get endpoint(){return k},get tenant(){return j}};var E=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w;i(this,t),this.timesOutAt=Date.now()+e}return o(t,[{key:"timedOut",value:function(){return this.remainingTime()<5}},{key:"remainingTime",value:function(){return Math.max(this.timesOutAt-Date.now(),0)}},{key:"cover",value:function(t){return t<=this.timesOutAt-5}}]),t}()}()},function(t,e,r){"use strict";function n(t){return new scrivito.Promise(function(e){return e(t(u()))}).catch(function(e){if(!(e instanceof c.UnauthorizedError))throw e;if(e.backendCode!==d)throw e;return i(e.details.verificator,e.details.data).then(function(e){return t(e.authorization)})})}function i(t,e){return p&&p.isPending()||(p=f.default.fetch(t.id,t.url).then(function(t){return new scrivito.Promise(function(r){return t(e,r)})}),p.then(o),p.challenge={verificator:t,data:e}),p}function o(t){p=void 0,h=t}function a(){o()}function u(){if(h)return h.expiresAfter<new Date?void(h=void 0):h.authorization}function s(){var t=u();if(t)return"Authorization: "+t;if(!p)return null;var e=p.challenge,r=e.verificator,n=r.id,i=e.data;if(p.isPending())return"Pending computation: "+n+" with "+i;var o="Orphaned computation: "+n+" with "+i;if(!h)return o+" (verification not present?!?)";var a=h&&h.expiresAfter;if(!a)return o+" (verification present, but without expiry?)";var s="(verification expiresAfter: "+a+")";return new Date<=a?o+" "+s:o+" "+s+" (expired)"}Object.defineProperty(e,"__esModule",{value:!0});var c=r(1),l=r(190),f=function(t){return t&&t.__esModule?t:{default:t}}(l),d="client_verification_required",p=void 0,h=void 0;a(),e.default={perform:n,reset:a,currentState:s,ERROR_CODE_CLIENT_VERIFICATION_REQUIRED:d}},function(t,e,r){"use strict";function n(){s={}}function i(t,e){var r=s[t];return r||(r=new a.default,s[t]=r,(0,u.loadJs)(e,function(e){r.reject(e),delete s[t]})),r.promise}Object.defineProperty(e,"__esModule",{value:!0});var o=r(14),a=function(t){return t&&t.__esModule?t:{default:t}}(o),u=r(117),s=void 0;n(),window._scrivitoRegisterVerificator=function(t,e){s[t].resolve(e)},e.default={fetch:i,reset:n}},function(t,e,r){"use strict";var n=r(0),i=function(t){return t&&t.__esModule?t:{default:t}}(n);!function(){function t(e){return i.default.isArray(e)?i.default.map(e,t):i.default.isObject(e)?i.default.chain(e).mapObject(t).pairs().sortBy(i.default.first):e}scrivito.computeCacheKey=function(e){var r=t(e);return JSON.stringify(r)}}()},function(t,e,r){"use strict";!function(){scrivito.currentWorkspaceId=function(){return scrivito.uiAdapter?scrivito.uiAdapter.currentWorkspaceId():"published"}}()},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}var o=r(0),a=n(o),u=r(194),s=n(u);!function(){function t(){if(window&&window.console&&!n){var t;(t=window.console).error.apply(t,arguments)}}function e(){n=!0}function r(t){if(t instanceof Error){var e=s.default.parse(t);scrivito.logError([t.message].concat(i(a.default.pluck(e,"source"))).join("\n"))}else scrivito.logError(t)}var n=!1;scrivito.logError=t,scrivito.disableConsoleError=e,scrivito.printError=r}()},function(t,e,r){var n,i,o;!function(a,u){"use strict";i=[r(195)],n=u,void 0!==(o="function"==typeof n?n.apply(e,i):n)&&(t.exports=o)}(0,function(t){"use strict";function e(t,e,r){if("function"==typeof Array.prototype.map)return t.map(e,r);for(var n=new Array(t.length),i=0;i<t.length;i++)n[i]=e.call(r,t[i]);return n}function r(t,e,r){if("function"==typeof Array.prototype.filter)return t.filter(e,r);for(var n=[],i=0;i<t.length;i++)e.call(r,t[i])&&n.push(t[i]);return n}function n(t,e){if("function"==typeof Array.prototype.indexOf)return t.indexOf(e);for(var r=0;r<t.length;r++)if(t[r]===e)return r;return-1}var i=/(^|@)\S+\:\d+/,o=/^\s*at .*(\S+\:\d+|\(native\))/m,a=/^(eval@)?(\[native code\])?$/;return{parse:function(t){if(void 0!==t.stacktrace||void 0!==t["opera#sourceloc"])return this.parseOpera(t);if(t.stack&&t.stack.match(o))return this.parseV8OrIE(t);if(t.stack)return this.parseFFOrSafari(t);throw new Error("Cannot parse given Error object")},extractLocation:function(t){if(-1===t.indexOf(":"))return[t];var e=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,r=e.exec(t.replace(/[\(\)]/g,""));return[r[1],r[2]||void 0,r[3]||void 0]},parseV8OrIE:function(i){return e(r(i.stack.split("\n"),function(t){return!!t.match(o)},this),function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var r=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),i=this.extractLocation(r.pop()),o=r.join(" ")||void 0,a=n(["eval","<anonymous>"],i[0])>-1?void 0:i[0];return new t(o,void 0,a,i[1],i[2],e)},this)},parseFFOrSafari:function(n){return e(r(n.stack.split("\n"),function(t){return!t.match(a)},this),function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new t(e);var r=e.split("@"),n=this.extractLocation(r.pop()),i=r.join("@")||void 0;return new t(i,void 0,n[0],n[1],n[2],e)},this)},parseOpera:function(t){return!t.stacktrace||t.message.indexOf("\n")>-1&&t.message.split("\n").length>t.stacktrace.split("\n").length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function(e){for(var r=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),i=[],o=2,a=n.length;o<a;o+=2){var u=r.exec(n[o]);u&&i.push(new t(void 0,void 0,u[2],u[1],void 0,n[o]))}return i},parseOpera10:function(e){for(var r=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),i=[],o=0,a=n.length;o<a;o+=2){var u=r.exec(n[o]);u&&i.push(new t(u[3]||void 0,void 0,u[2],u[1],void 0,n[o]))}return i},parseOpera11:function(n){return e(r(n.stack.split("\n"),function(t){return!!t.match(i)&&!t.match(/^Error created at/)},this),function(e){var r,n=e.split("@"),i=this.extractLocation(n.pop()),o=n.shift()||"",a=o.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;o.match(/\(([^\)]*)\)/)&&(r=o.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var u=void 0===r||"[arguments not available]"===r?void 0:r.split(",");return new t(a,u,i[0],i[1],i[2],e)},this)}}})},function(t,e,r){var n,i,o;!function(r,a){"use strict";i=[],n=a,void 0!==(o="function"==typeof n?n.apply(e,i):n)&&(t.exports=o)}(0,function(){"use strict";function t(t){return!isNaN(parseFloat(t))&&isFinite(t)}function e(t,e,r,n,i,o){void 0!==t&&this.setFunctionName(t),void 0!==e&&this.setArgs(e),void 0!==r&&this.setFileName(r),void 0!==n&&this.setLineNumber(n),void 0!==i&&this.setColumnNumber(i),void 0!==o&&this.setSource(o)}return e.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(t){this.functionName=String(t)},getArgs:function(){return this.args},setArgs:function(t){if("[object Array]"!==Object.prototype.toString.call(t))throw new TypeError("Args must be an Array");this.args=t},getFileName:function(){return this.fileName},setFileName:function(t){this.fileName=String(t)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(e){if(!t(e))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(e)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(e){if(!t(e))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(e)},getSource:function(){return this.source},setSource:function(t){this.source=String(t)},toString:function(){return(this.getFunctionName()||"{anonymous}")+"("+(this.getArgs()||[]).join(",")+")"+(this.getFileName()?"@"+this.getFileName():"")+(t(this.getLineNumber())?":"+this.getLineNumber():"")+(t(this.getColumnNumber())?":"+this.getColumnNumber():"")}},e})},function(t,e,r){"use strict";var n=r(14),i=function(t){return t&&t.__esModule?t:{default:t}}(n);!function(){function t(t,n,i,o,a){var u=new XMLHttpRequest;return u.open("POST"===t?"POST":"PUT",n),u.timeout=i,u.withCredentials=!0,u.onload=function(){return e(u,o,a)},u.onerror=function(t){return r(t,a)},u}function e(t,e,r){if(o-=1,t.status>=200&&t.status<300)try{return e(JSON.parse(t.responseText))}catch(r){if(r instanceof SyntaxError)return e(t.responseText);throw r}return r(t)}function r(t,e){o-=1,e(new Error("Network Error: "+t))}var n=!1,o=0;scrivito.isFetchingActive=function(){return o>0},scrivito.disableFetching=function(){n=!0},scrivito.fetch=function(e,r,a){var u=a.params,s=a.timeout,c=a.authorization,l=a.forceVerification;return n?(new i.default).promise:(o+=1,new scrivito.Promise(function(n,i){var o=t(e,r,s,n,i);c&&o.setRequestHeader("Authorization",c),l&&o.setRequestHeader("Scrivito-Force-Verification","true"),o.setRequestHeader("Content-type","application/json; charset=utf-8"),o.send(JSON.stringify(u))}))}}()},function(t,e,r){"use strict";var n=r(5);!function(){function t(t){var e=t.clientModulesForExport();i.forEach(function(t){scrivito[t]=e[t]})}function e(){var t={};return i.forEach(function(e){t[e]=scrivito[e]}),t}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.ui;r&&t(r),(0,n.initializeGlobalState)(r)}var i=["BinaryRequest","CmsRestApi","ObjReplication"];scrivito.client.init=r,scrivito.client.modulesForExport=e}()},function(t,e,r){"use strict";var n=r(8),i=function(t){return t&&t.__esModule?t:{default:t}}(n);!function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=i.default.run(function(){return e.next()});if(!o.allDataLoaded)return{done:!1,objs:n};var a=o.result,u=a.value,s=a.done;return s||0===r?{done:s,objs:n}:t(e,r-1,n.concat([u]))}scrivito.loadAllUntil=t}()},function(t,e,r){"use strict";var n=r(8),i=function(t){return t&&t.__esModule?t:{default:t}}(n);!function(){function t(t,e){var r=i.default.run(e);return r.allDataLoaded?r.result:t}scrivito.loadableWithDefault=t,scrivito.loadWithDefault=t}()},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1);!function(){var t=function(t){function e(t){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"Data is not yet loaded.",t))}return o(e,t),e}(a.ScrivitoError);scrivito.NotLoadedError=t}()},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t){(0,_.each)(t,function(t){return y.preload(t)})}function u(t,e){var r=(0,_.extend)({},t,{index:e}),n=d.computeCacheKey(r);return d.stateContainer().subState(n)}function s(t){return function(){return t+"|"+scrivito.ObjReplication.getWorkspaceVersion()}}function c(t){var e=(0,_.omit)({query:t.query,offset:t.offset,sort_by:t.sortBy,sort_order:t.sortDirection},_.isUndefined);return t.includeDeleted&&(e.options={include_deleted:!0}),e}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),f=r(106),d=i(f),p=r(202),h=i(p),v=r(57),y=i(v),_=r(0),g=r(19),m=n(g),b=r(8),w=n(b),k={results:[]},j=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;o(this,t),this._params=e,this._batchSize=r,n?(this._index=n.index+1,this._continuation=n.continuationForNextBatch(),this._previousBatch=n):this._index=0}return l(t,null,[{key:"store",value:function(t,e){var r=u(c(t),0),n=s(void 0);new w.default({state:r,invalidation:n}).set({results:e})}},{key:"firstBatchFor",value:function(e,r){return new t(c(e),r)}},{key:"countFor",value:function(t){return this.firstBatchFor(t,0).count()}}]),l(t,[{key:"objIds",value:function(){return this._response().results}},{key:"count",value:function(){return this._response().total||0}},{key:"nextBatch",value:function(){if(this.continuationForNextBatch())return new t(this._params,this._batchSize,this)}},{key:"continuationForNextBatch",value:function(){return this._response().continuation}},{key:"_response",value:function(){return this._data().get()||k}},{key:"_data",value:function(){var t=this;return new w.default({state:u(this._params,this._index),loader:function(){return t._load()},invalidation:s(this._continuation)})}},{key:"_load",value:function(){var t=this;return this._fetchContinuation().then(function(e){var r={size:t._batchSize,continuation:e},n=(0,_.extend)({},t._params,r);return h.retrieve(n).then(function(t){return a(t.results),t})})}},{key:"_fetchContinuation",value:function(){var t=this;return this._previousBatch?(0,m.default)(function(){return t._previousBatch.continuationForNextBatch()}):scrivito.Promise.resolve()}},{key:"index",get:function(){return this._index}}]),t}();e.default=j},function(t,e,r){"use strict";function n(t){var e=scrivito.currentWorkspaceId(),r=o.default.extend({consistent:!0},t);return scrivito.CmsRestApi.get("workspaces/"+e+"/objs/search",r).then(function(t){return t.results=o.default.pluck(t.results,"id"),o.default.pick(t,"results","continuation","total")})}Object.defineProperty(e,"__esModule",{value:!0}),e.retrieve=n;var i=r(0),o=function(t){return t&&t.__esModule?t:{default:t}}(i)},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=r(204),u=n(a),s=r(78),c=n(s),l=r(8),f=function(t){return t&&t.__esModule?t:{default:t}}(l),d=function(){function t(e,r){var n=this;i(this,t),this._loadableData=new f.default({state:r,loader:function(t){return u.retrieveObj(n._id).then(function(e){return t(function(){return n._replication().notifyBackendState(e)}),e})}}),this._id=e}return o(t,[{key:"set",value:function(t){this._loadableData.set(t)}},{key:"setError",value:function(t){this._loadableData.setError(t)}},{key:"isAvailable",value:function(){return this._loadableData.isAvailable()}},{key:"update",value:function(t){var e=c.apply(this.current,t);this._loadableData.set(e),this._replication().notifyLocalState(e)}},{key:"finishSaving",value:function(){return this._replication().finishSaving()}},{key:"_replication",value:function(){return scrivito.ObjReplication.get(this._id)}},{key:"current",get:function(){return this._loadableData.get()}}]),t}();e.default=d},function(t,e,r){"use strict";function n(t){var e=scrivito.currentWorkspaceId();return scrivito.CmsRestApi.get("workspaces/"+e+"/objs/mget",{ids:t,include_deleted:!0}).then(function(t){return t.results})}function i(t){return u.retrieve(t).then(function(t){return t||{_deleted:!0}})}function o(){u.reset()}Object.defineProperty(e,"__esModule",{value:!0});var a=r(108),u=new a.default(n,{batchSize:17});e.retrieveObj=i,e.reset=o},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){return!!t.current._deleted}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=r(57),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(a),s=r(107),c=function(t){return t&&t.__esModule?t:{default:t}}(s),l=function(){function t(e,r){n(this,t),this._params=e,this._batchSize=r}return o(t,[{key:"count",value:function(){return c.default.count(this._params)}},{key:"iterator",value:function(){return new f(this._params,this._batchSize)}}]),t}();e.default=l;var f=function(){function t(e,r){n(this,t),this._iterator=new c.default(e,r).iterator()}return o(t,[{key:"next",value:function(){if(!this._iterator)return{done:!0};var t=this._iterator.next().value;if(!t)return{done:!0};var e=u.get(t);return void 0===e?(this._iterator=void 0,{done:!0}):i(e)?this.next():{value:e,done:!1}}}]),t}()},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(){return scrivito.ObjReplication.getWorkspaceVersion()}function a(t){var e=scrivito.computeCacheKey(t);return y.cmsState.subState("facetQuery").subState(e)}function u(t){var e=v.default.without.apply(v.default,[v.default.keys(t)].concat(b));if(e.length)throw new _.ArgumentError("Invalid options: "+(0,m.default)(e)+". Valid options: "+b)}function s(t,e,r){var n={facets:[{attribute:t,limit:e.limit||10,include_objs:e.includeObjs||0}],size:0};return r&&r.length&&(n.query=r),n}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=r(207),f=n(l),d=r(8),p=n(d),h=r(0),v=n(h),y=r(5),_=r(1),g=r(31),m=n(g),b=["limit","includeObjs"],w=function(){function t(e,r,n){var c=this;i(this,t),u(r),this._requestParams=s(e,r,n),this._loadableData=new p.default({state:a(this._requestParams),loader:function(){return c._loadData()},invalidation:o})}return c(t,[{key:"result",value:function(){var t=this._loadableData.get();if(!t)return[];var e=v.default.first(t.facets);return v.default.map(e,function(t){var e=t.value,r=t.total,n=t.results.map(function(t){return t.id});return new f.default(e,r,n)})}},{key:"_loadData",value:function(){var t=scrivito.currentWorkspaceId();return scrivito.CmsRestApi.get("workspaces/"+t+"/objs/search",this._requestParams)}}],[{key:"store",value:function(t,e,r,n){u(e);var i=s(t,e,r);new p.default({state:a(i),invalidation:o,throwNotLoaded:!0}).set(n)}}]),t}();e.default=w},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(3),a=function(t){return t&&t.__esModule?t:{default:t}}(o),u=function(){function t(e,r,i){n(this,t),this._name=e,this._count=r,this._includedObjs=i}return i(t,[{key:"name",value:function(){return this._name}},{key:"count",value:function(){return this._count}},{key:"includedObjs",value:function(){return a.default.get(this._includedObjs)}}]),t}();e.default=u},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e,r,n){var i=k(e,2),f=i[0],v=i[1];switch(r){case"binary":return o(f,v);case"date":return a(f,v);case"float":return l(f,v);case"enum":return s(f,v,n);case"html":return u(f,v);case"integer":return d(f,v);case"link":return p(f,v);case"linklist":return h(f,v);case"multienum":return c(f,v,n);case"reference":return _(f,v);case"referencelist":return g(f,v);case"string":return m(f,v);case"stringlist":return b(f,v);case"widgetlist":return w(f,v,t)}}function o(t,e){if("binary"===t&&e){var r=e.id,n="published"===scrivito.currentWorkspaceId();return new T.default(r,n).transform({})}return null}function a(t,e){return"date"!==t?null:(0,C.deserializeAsDate)(e)}function u(t,e){return S.default.contains(["html","string"],t)&&S.default.isString(e)?e:""}function s(t,e,r){var n=r.values;return"string"===t&&S.default.contains(n,e)?e:null}function c(t,e,r){var n=r.values;return"stringlist"===t&&Array.isArray(e)?S.default.intersection(e,n):[]}function l(t,e){switch(t){case"string":return e.match(/^-?\d+(\.\d+)?$/)?f(e):null;case"number":return f(e);default:return null}}function f(t){var e=parseFloat(t);return(0,C.isValidFloat)(e)?e:null}function d(t,e){switch(t){case"string":case"number":return(0,C.deserializeAsInteger)(e);default:return null}}function p(t,e){return"link"===t&&S.default.isObject(e)?v(e):null}function h(t,e){return S.default.isArray(e)?S.default.compact(e.map(v)):[]}function v(t){var e=S.default.pick(t,"title","query","fragment","target","url");e.hash=e.fragment,delete e.fragment,e.objId=t.obj_id;var r=E.default.build(e);return r.isBroken()?null:r}function y(t){var e=O.default.get(t);return e||null}function _(t,e){return"reference"===t&&e?y(e):null}function g(t,e){if("referencelist"!==t)return[];if(!e)return[];var r=e.map(y);return S.default.compact(r)}function m(t,e){return S.default.contains(["html","string"],t)&&S.default.isString(e)?e:""}function b(t,e){return"stringlist"===t&&Array.isArray(e)?e:[]}function w(t,e,r){return"widgetlist"!==t?[]:S.default.map(e,function(t){return r.widget(t)})}Object.defineProperty(e,"__esModule",{value:!0});var k=function(){function t(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.deserialize=i;var j=r(3),O=n(j),C=r(46),P=r(37),E=n(P),A=r(0),S=n(A),x=r(29),T=n(x)},function(t,e,r){"use strict";function n(t){return o().get()[t]||null}function i(t){o().set(t)}function o(){var t=c.uiState.subState("railsThumbnails");return new s.default({state:t,loader:a,throwNotLoaded:!0})}function a(){return scrivito.ajax("GET","obj_class/thumbnails")}Object.defineProperty(e,"__esModule",{value:!0}),e.storeRailsThumbnails=e.getRailsThumbnail=void 0;var u=r(8),s=function(t){return t&&t.__esModule?t:{default:t}}(u),c=r(5);e.getRailsThumbnail=n,e.storeRailsThumbnails=i},function(t,e,r){"use strict";function n(t){return i(t).get()}function i(t){var e=void 0,r=c.uiState.subState("validRailsPageClasses");return e=t?r.subState("byPath").subState(t):r.subState("withoutPath"),new s.default({state:e,loader:a(t),throwNotLoaded:!0})}function o(t,e){i(t).set(e)}function a(t){var e="";return t&&(e="?"+$.param({parent_path:t})),function(){return scrivito.ajax("GET","objs/valid_page_classes"+e)}}Object.defineProperty(e,"__esModule",{value:!0}),e.storeValidRailsPageClasses=e.validRailsPageClasses=void 0;var u=r(8),s=function(t){return t&&t.__esModule?t:{default:t}}(u),c=r(5);e.validRailsPageClasses=n,e.storeValidRailsPageClasses=o},function(t,e,r){"use strict";function n(t){return(0,o.default)(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var i=r(146),o=function(t){return t&&t.__esModule?t:{default:t}}(i)},function(t,e,r){var n,i;!function(r,o){"use strict";var a=function(t,e){var r,n,i,o,a,u,l,f,d,p,h,v,y,_,g,m="-",b=[";","?",":","@","&","=","+","$",",","/"],w=[";","?",":","@","&","=","+","$",","],k=[".","!","~","*","'","(",")"],j="",O="",C=!0,P={},E={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"Ae","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"Oe","Ő":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"Ue","Ű":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"ae","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"oe","ő":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"ue","ű":"u","ý":"y","þ":"th","ÿ":"y","ẞ":"SS","ا":"a","أ":"a","إ":"i","آ":"aa","ؤ":"u","ئ":"e","ء":"a","ب":"b","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"dh","ط":"t","ظ":"z","ع":"a","غ":"gh","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ي":"y","ى":"a","ة":"h","ﻻ":"la","ﻷ":"laa","ﻹ":"lai","ﻵ":"laa","گ":"g","چ":"ch","پ":"p","ژ":"zh","ک":"k","ی":"y","َ":"a","ً":"an","ِ":"e","ٍ":"en","ُ":"u","ٌ":"on","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","က":"k","ခ":"kh","ဂ":"g","ဃ":"ga","င":"ng","စ":"s","ဆ":"sa","ဇ":"z","စျ":"za","ည":"ny","ဋ":"t","ဌ":"ta","ဍ":"d","ဎ":"da","ဏ":"na","တ":"t","ထ":"ta","ဒ":"d","ဓ":"da","န":"n","ပ":"p","ဖ":"pa","ဗ":"b","ဘ":"ba","မ":"m","ယ":"y","ရ":"ya","လ":"l","ဝ":"w","သ":"th","ဟ":"h","ဠ":"la","အ":"a","ြ":"y","ျ":"ya","ွ":"w","ြွ":"yw","ျွ":"ywa","ှ":"h","ဧ":"e","၏":"-e","ဣ":"i","ဤ":"-i","ဉ":"u","ဦ":"-u","ဩ":"aw","သြော":"aw","ဪ":"aw","၀":"0","၁":"1","၂":"2","၃":"3","၄":"4","၅":"5","၆":"6","၇":"7","၈":"8","၉":"9","္":"","့":"","း":"","č":"c","ď":"d","ě":"e","ň":"n","ř":"r","š":"s","ť":"t","ů":"u","ž":"z","Č":"C","Ď":"D","Ě":"E","Ň":"N","Ř":"R","Š":"S","Ť":"T","Ů":"U","Ž":"Z","ހ":"h","ށ":"sh","ނ":"n","ރ":"r","ބ":"b","ޅ":"lh","ކ":"k","އ":"a","ވ":"v","މ":"m","ފ":"f","ދ":"dh","ތ":"th","ލ":"l","ގ":"g","ޏ":"gn","ސ":"s","ޑ":"d","ޒ":"z","ޓ":"t","ޔ":"y","ޕ":"p","ޖ":"j","ޗ":"ch","ޘ":"tt","ޙ":"hh","ޚ":"kh","ޛ":"th","ޜ":"z","ޝ":"sh","ޞ":"s","ޟ":"d","ޠ":"t","ޡ":"z","ޢ":"a","ޣ":"gh","ޤ":"q","ޥ":"w","ަ":"a","ާ":"aa","ި":"i","ީ":"ee","ު":"u","ޫ":"oo","ެ":"e","ޭ":"ey","ޮ":"o","ޯ":"oa","ް":"","α":"a","β":"v","γ":"g","δ":"d","ε":"e","ζ":"z","η":"i","θ":"th","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"ks","ο":"o","π":"p","ρ":"r","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"o","ά":"a","έ":"e","ί":"i","ό":"o","ύ":"y","ή":"i","ώ":"o","ς":"s","ϊ":"i","ΰ":"y","ϋ":"y","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"I","Θ":"TH","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"KS","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"O","Ά":"A","Έ":"E","Ί":"I","Ό":"O","Ύ":"Y","Ή":"I","Ώ":"O","Ϊ":"I","Ϋ":"Y","ā":"a","ē":"e","ģ":"g","ī":"i","ķ":"k","ļ":"l","ņ":"n","ū":"u","Ā":"A","Ē":"E","Ģ":"G","Ī":"I","Ķ":"k","Ļ":"L","Ņ":"N","Ū":"U","Ќ":"Kj","ќ":"kj","Љ":"Lj","љ":"lj","Њ":"Nj","њ":"nj","Тс":"Ts","тс":"ts","ą":"a","ć":"c","ę":"e","ł":"l","ń":"n","ś":"s","ź":"z","ż":"z","Ą":"A","Ć":"C","Ę":"E","Ł":"L","Ń":"N","Ś":"S","Ź":"Z","Ż":"Z","Є":"Ye","І":"I","Ї":"Yi","Ґ":"G","є":"ye","і":"i","ї":"yi","ґ":"g","ă":"a","Ă":"A","ș":"s","Ș":"S","ț":"t","Ț":"T","ţ":"t","Ţ":"T","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"yo","ж":"zh","з":"z","и":"i","й":"i","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"kh","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ё":"Yo","Ж":"Zh","З":"Z","И":"I","Й":"I","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"Kh","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","ђ":"dj","ј":"j","ћ":"c","џ":"dz","Ђ":"Dj","Ј":"j","Ћ":"C","Џ":"Dz","ľ":"l","ĺ":"l","ŕ":"r","Ľ":"L","Ĺ":"L","Ŕ":"R","ş":"s","Ş":"S","ı":"i","İ":"I","ğ":"g","Ğ":"G","ả":"a","Ả":"A","ẳ":"a","Ẳ":"A","ẩ":"a","Ẩ":"A","đ":"d","Đ":"D","ẹ":"e","Ẹ":"E","ẽ":"e","Ẽ":"E","ẻ":"e","Ẻ":"E","ế":"e","Ế":"E","ề":"e","Ề":"E","ệ":"e","Ệ":"E","ễ":"e","Ễ":"E","ể":"e","Ể":"E","ọ":"o","Ọ":"o","ố":"o","Ố":"O","ồ":"o","Ồ":"O","ổ":"o","Ổ":"O","ộ":"o","Ộ":"O","ỗ":"o","Ỗ":"O","ơ":"o","Ơ":"O","ớ":"o","Ớ":"O","ờ":"o","Ờ":"O","ợ":"o","Ợ":"O","ỡ":"o","Ỡ":"O","Ở":"o","ở":"o","ị":"i","Ị":"I","ĩ":"i","Ĩ":"I","ỉ":"i","Ỉ":"i","ủ":"u","Ủ":"U","ụ":"u","Ụ":"U","ũ":"u","Ũ":"U","ư":"u","Ư":"U","ứ":"u","Ứ":"U","ừ":"u","Ừ":"U","ự":"u","Ự":"U","ữ":"u","Ữ":"U","ử":"u","Ử":"ư","ỷ":"y","Ỷ":"y","ỳ":"y","Ỳ":"Y","ỵ":"y","Ỵ":"Y","ỹ":"y","Ỹ":"Y","ạ":"a","Ạ":"A","ấ":"a","Ấ":"A","ầ":"a","Ầ":"A","ậ":"a","Ậ":"A","ẫ":"a","Ẫ":"A","ắ":"a","Ắ":"A","ằ":"a","Ằ":"A","ặ":"a","Ặ":"A","ẵ":"a","Ẵ":"A","“":'"',"”":'"',"‘":"'","’":"'","∂":"d","ƒ":"f","™":"(TM)","©":"(C)","œ":"oe","Œ":"OE","®":"(R)","†":"+","℠":"(SM)","…":"...","˚":"o","º":"o","ª":"a","•":"*","၊":",","။":".",$:"USD","€":"EUR","₢":"BRN","₣":"FRF","£":"GBP","₤":"ITL","₦":"NGN","₧":"ESP","₩":"KRW","₪":"ILS","₫":"VND","₭":"LAK","₮":"MNT","₯":"GRD","₱":"ARS","₲":"PYG","₳":"ARA","₴":"UAH","₵":"GHS","¢":"cent","¥":"CNY","元":"CNY","円":"YEN","﷼":"IRR","₠":"EWE","฿":"THB","₨":"INR","₹":"INR","₰":"PF","₺":"TRY","؋":"AFN","₼":"AZN","лв":"BGN","៛":"KHR","₡":"CRC","₸":"KZT","ден":"MKD","zł":"PLN","₽":"RUB","₾":"GEL"},A=["်","ް"],S={"ာ":"a","ါ":"a","ေ":"e","ဲ":"e","ိ":"i","ီ":"i","ို":"o","ု":"u","ူ":"u","ေါင်":"aung","ော":"aw","ော်":"aw","ေါ":"aw","ေါ်":"aw","်":"်","က်":"et","ိုက်":"aik","ောက်":"auk","င်":"in","ိုင်":"aing","ောင်":"aung","စ်":"it","ည်":"i","တ်":"at","ိတ်":"eik","ုတ်":"ok","ွတ်":"ut","ေတ်":"it","ဒ်":"d","ိုဒ်":"ok","ုဒ်":"ait","န်":"an","ာန်":"an","ိန်":"ein","ုန်":"on","ွန်":"un","ပ်":"at","ိပ်":"eik","ုပ်":"ok","ွပ်":"ut","န်ုပ်":"nub","မ်":"an","ိမ်":"ein","ုမ်":"on","ွမ်":"un","ယ်":"e","ိုလ်":"ol","ဉ်":"in","ံ":"an","ိံ":"ein","ုံ":"on","ައް":"ah","ަށް":"ah"},x={en:{},az:{"ç":"c","ə":"e","ğ":"g","ı":"i","ö":"o","ş":"s","ü":"u","Ç":"C","Ə":"E","Ğ":"G","İ":"I","Ö":"O","Ş":"S","Ü":"U"},cs:{"č":"c","ď":"d","ě":"e","ň":"n","ř":"r","š":"s","ť":"t","ů":"u","ž":"z","Č":"C","Ď":"D","Ě":"E","Ň":"N","Ř":"R","Š":"S","Ť":"T","Ů":"U","Ž":"Z"},fi:{"ä":"a","Ä":"A","ö":"o","Ö":"O"},hu:{"ä":"a","Ä":"A","ö":"o","Ö":"O","ü":"u","Ü":"U","ű":"u","Ű":"U"},lt:{"ą":"a","č":"c","ę":"e","ė":"e","į":"i","š":"s","ų":"u","ū":"u","ž":"z","Ą":"A","Č":"C","Ę":"E","Ė":"E","Į":"I","Š":"S","Ų":"U","Ū":"U"},lv:{"ā":"a","č":"c","ē":"e","ģ":"g","ī":"i","ķ":"k","ļ":"l","ņ":"n","š":"s","ū":"u","ž":"z","Ā":"A","Č":"C","Ē":"E","Ģ":"G","Ī":"i","Ķ":"k","Ļ":"L","Ņ":"N","Š":"S","Ū":"u","Ž":"Z"},pl:{"ą":"a","ć":"c","ę":"e","ł":"l","ń":"n","ó":"o","ś":"s","ź":"z","ż":"z","Ą":"A","Ć":"C","Ę":"e","Ł":"L","Ń":"N","Ó":"O","Ś":"S","Ź":"Z","Ż":"Z"},sk:{"ä":"a","Ä":"A"},sr:{"љ":"lj","њ":"nj","Љ":"Lj","Њ":"Nj","đ":"dj","Đ":"Dj"},tr:{"Ü":"U","Ö":"O","ü":"u","ö":"o"}},T={ar:{"∆":"delta","∞":"la-nihaya","♥":"hob","&":"wa","|":"aw","<":"aqal-men",">":"akbar-men","∑":"majmou","¤":"omla"},az:{},ca:{"∆":"delta","∞":"infinit","♥":"amor","&":"i","|":"o","<":"menys que",">":"mes que","∑":"suma dels","¤":"moneda"},cs:{"∆":"delta","∞":"nekonecno","♥":"laska","&":"a","|":"nebo","<":"mensi nez",">":"vetsi nez","∑":"soucet","¤":"mena"},de:{"∆":"delta","∞":"unendlich","♥":"Liebe","&":"und","|":"oder","<":"kleiner als",">":"groesser als","∑":"Summe von","¤":"Waehrung"},dv:{"∆":"delta","∞":"kolunulaa","♥":"loabi","&":"aai","|":"noonee","<":"ah vure kuda",">":"ah vure bodu","∑":"jumula","¤":"faisaa"},en:{"∆":"delta","∞":"infinity","♥":"love","&":"and","|":"or","<":"less than",">":"greater than","∑":"sum","¤":"currency"},es:{"∆":"delta","∞":"infinito","♥":"amor","&":"y","|":"u","<":"menos que",">":"mas que","∑":"suma de los","¤":"moneda"},fa:{"∆":"delta","∞":"bi-nahayat","♥":"eshgh","&":"va","|":"ya","<":"kamtar-az",">":"bishtar-az","∑":"majmooe","¤":"vahed"},fi:{"∆":"delta","∞":"aarettomyys","♥":"rakkaus","&":"ja","|":"tai","<":"pienempi kuin",">":"suurempi kuin","∑":"summa","¤":"valuutta"},fr:{"∆":"delta","∞":"infiniment","♥":"Amour","&":"et","|":"ou","<":"moins que",">":"superieure a","∑":"somme des","¤":"monnaie"},gr:{},hu:{"∆":"delta","∞":"vegtelen","♥":"szerelem","&":"es","|":"vagy","<":"kisebb mint",">":"nagyobb mint","∑":"szumma","¤":"penznem"},it:{"∆":"delta","∞":"infinito","♥":"amore","&":"e","|":"o","<":"minore di",">":"maggiore di","∑":"somma","¤":"moneta"},lt:{"∆":"delta","∞":"begalybe","♥":"meile","&":"ir","|":"ar","<":"maziau nei",">":"daugiau nei","∑":"suma","¤":"valiuta"},lv:{"∆":"delta","∞":"bezgaliba","♥":"milestiba","&":"un","|":"vai","<":"mazak neka",">":"lielaks neka","∑":"summa","¤":"valuta"},my:{"∆":"kwahkhyaet","∞":"asaonasme","♥":"akhyait","&":"nhin","|":"tho","<":"ngethaw",">":"kyithaw","∑":"paungld","¤":"ngwekye"},mk:{},nl:{"∆":"delta","∞":"oneindig","♥":"liefde","&":"en","|":"of","<":"kleiner dan",">":"groter dan","∑":"som","¤":"valuta"},pl:{"∆":"delta","∞":"nieskonczonosc","♥":"milosc","&":"i","|":"lub","<":"mniejsze niz",">":"wieksze niz","∑":"suma","¤":"waluta"},pt:{"∆":"delta","∞":"infinito","♥":"amor","&":"e","|":"ou","<":"menor que",">":"maior que","∑":"soma","¤":"moeda"},ro:{"∆":"delta","∞":"infinit","♥":"dragoste","&":"si","|":"sau","<":"mai mic ca",">":"mai mare ca","∑":"suma","¤":"valuta"},ru:{"∆":"delta","∞":"beskonechno","♥":"lubov","&":"i","|":"ili","<":"menshe",">":"bolshe","∑":"summa","¤":"valjuta"},sk:{"∆":"delta","∞":"nekonecno","♥":"laska","&":"a","|":"alebo","<":"menej ako",">":"viac ako","∑":"sucet","¤":"mena"},sr:{},tr:{"∆":"delta","∞":"sonsuzluk","♥":"ask","&":"ve","|":"veya","<":"kucuktur",">":"buyuktur","∑":"toplam","¤":"para birimi"},uk:{"∆":"delta","∞":"bezkinechnist","♥":"lubov","&":"i","|":"abo","<":"menshe",">":"bilshe","∑":"suma","¤":"valjuta"},vn:{"∆":"delta","∞":"vo cuc","♥":"yeu","&":"va","|":"hoac","<":"nho hon",">":"lon hon","∑":"tong","¤":"tien te"}};if("string"!=typeof t)return"";if("string"==typeof e&&(m=e),l=T.en,f=x.en,"object"==typeof e){r=e.maintainCase||!1,P=e.custom&&"object"==typeof e.custom?e.custom:P,i=+e.truncate>1&&e.truncate||!1,o=e.uric||!1,a=e.uricNoSlash||!1,u=e.mark||!1,C=!1!==e.symbols&&!1!==e.lang,m=e.separator||m,o&&(g+=b.join("")),a&&(g+=w.join("")),u&&(g+=k.join("")),l=e.lang&&T[e.lang]&&C?T[e.lang]:C?T.en:{},f=e.lang&&x[e.lang]?x[e.lang]:!1===e.lang||!0===e.lang?{}:x.en,e.titleCase&&"number"==typeof e.titleCase.length&&Array.prototype.toString.call(e.titleCase)?(e.titleCase.forEach(function(t){P[t+""]=t+""}),n=!0):n=!!e.titleCase,e.custom&&"number"==typeof e.custom.length&&Array.prototype.toString.call(e.custom)&&e.custom.forEach(function(t){P[t+""]=t+""}),Object.keys(P).forEach(function(e){var r;r=e.length>1?new RegExp("\\b"+s(e)+"\\b","gi"):new RegExp(s(e),"gi"),t=t.replace(r,P[e])});for(h in P)g+=h}for(g+=m,g=s(g),t=t.replace(/(^\s+|\s+$)/g,""),y=!1,_=!1,p=0,v=t.length;p<v;p++)h=t[p],c(h,P)?y=!1:f[h]?(h=y&&f[h].match(/[A-Za-z0-9]/)?" "+f[h]:f[h],y=!1):h in E?(p+1<v&&A.indexOf(t[p+1])>=0?(O+=h,h=""):!0===_?(h=S[O]+E[h],O=""):h=y&&E[h].match(/[A-Za-z0-9]/)?" "+E[h]:E[h],y=!1,_=!1):h in S?(O+=h,h="",p===v-1&&(h=S[O]),_=!0):!l[h]||o&&-1!==b.join("").indexOf(h)||a&&-1!==w.join("").indexOf(h)?(!0===_?(h=S[O]+h,O="",_=!1):y&&(/[A-Za-z0-9]/.test(h)||j.substr(-1).match(/A-Za-z0-9]/))&&(h=" "+h),y=!1):(h=y||j.substr(-1).match(/[A-Za-z0-9]/)?m+l[h]:l[h],h+=void 0!==t[p+1]&&t[p+1].match(/[A-Za-z0-9]/)?m:"",y=!0),j+=h.replace(new RegExp("[^\\w\\s"+g+"_-]","g"),m);return n&&(j=j.replace(/(\w)(\S*)/g,function(t,e,r){var n=e.toUpperCase()+(null!==r?r:"");return Object.keys(P).indexOf(n.toLowerCase())<0?n:n.toLowerCase()})),j=j.replace(/\s+/g,m).replace(new RegExp("\\"+m+"+","g"),m).replace(new RegExp("(^\\"+m+"+|\\"+m+"+$)","g"),""),i&&j.length>i&&(d=j.charAt(i)===m,j=j.slice(0,i),d||(j=j.slice(0,j.lastIndexOf(m)))),r||n||(j=j.toLowerCase()),j},u=function(t){return function(e){return a(e,t)}},s=function(t){return t.replace(/[-\\^$*+?.()|[\]{}\/]/g,"\\$&")},c=function(t,e){for(var r in e)if(e[r]===t)return!0};void 0!==t&&t.exports?(t.exports=a,t.exports.createSlug=u):(n=[],void 0!==(i=function(){return a}.apply(e,n))&&(t.exports=i))}()},function(t,e,r){"use strict";var n=r(0),i=function(t){return t&&t.__esModule?t:{default:t}}(n);!function(){var t=[],e=void 0;i.default.extend(scrivito,{nextTick:function(r){e?t.push(r):setTimeout(r,0)},simulateNextTicks:function(){if(e){for(var r=[];t.length;){var n=i.default.shuffle(t);t=[],i.default.each(n,function(t){try{t()}catch(t){r.push(t)}})}if(r.length>0)throw r[0]}},enableNextTickCapture:function(){e=!0},disableNextTickCapture:function(){e=!1}})}()},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(14),s=i(u),c=r(78),l=n(c),f=r(57),d=n(f),p=r(0),h=i(p),v=r(1);!function(){function t(t,e){return l.diff(t,e)}function e(t,e){return l.apply(t,e)}function r(t,e){return n(t,e)>0?t:e}function n(t,e){return t?e?i(t._version,e._version):1:-1}function i(t,e){return t>e?1:e>t?-1:0}function u(t){h.default.each(p,function(e){e(t)})}var c={},f=void 0,p={},y=0,_=0;scrivito.ObjReplication=function(){function i(t){var e=this;o(this,i),this._id=t,this._replicationActive=!1,this._scheduledReplication=!1,this._currentRequestDeferred=null,this._nextRequestDeferred=null,this._performThrottledReplication=scrivito.throttle(function(){return e._performReplication()},1e3)}return a(i,null,[{key:"get",value:function(t){return c[t]||(c[t]=new scrivito.ObjReplication(t)),c[t]}},{key:"subscribeWrites",value:function(t){return y+=1,p[y]=t,y}},{key:"unsubscribeWrites",value:function(t){delete p[t]}},{key:"getWorkspaceVersion",value:function(){return _}}]),a(i,[{key:"notifyLocalState",value:function(t){if(!f){if(void 0===this._backendState)throw new v.InternalError("Can not set local state before backend state.");if(this._backendState&&this._backendState._deleted)throw new v.InternalError("Can not update a fully deleted obj.");this._localState=t,this._startReplication()}}},{key:"notifyBackendState",value:function(r){if(void 0===this._backendState)return this._updateBackendState(r),void this._updateLocalState(r);if(n(r,this._bufferedBackendState||this._backendState)>0)if(this._replicationActive)this._bufferedBackendState=r;else{if(r._deleted)this._updateLocalState(null);else{var i=t(this._backendState,r);this._updateLocalState(e(this.localState,i))}this._updateBackendState(r)}}},{key:"finishSaving",value:function(){var t=void 0;if(this._nextRequestDeferred)t=this._nextRequestDeferred.promise;else{if(!this._currentRequestDeferred)return scrivito.Promise.resolve();t=this._currentRequestDeferred.promise}return t.catch(function(){return scrivito.Promise.reject()})}},{key:"_startReplication",value:function(){var e=this;h.default.isEmpty(t(this._backendState,this._localState))?this._nextRequestDeferred&&(this._nextRequestDeferred.resolve(),this._nextRequestDeferred=null):this._replicationActive?this._nextRequestDeferred||(this._nextRequestDeferred=new s.default):this._scheduledReplication||(this._scheduledReplication=!0,this._initDeferredForRequest(),u(this._currentRequestDeferred.promise),scrivito.nextTick(function(){return e._performThrottledReplication()}))}},{key:"_performReplication",value:function(){var e=this,r=this._localState,n=t(this._backendState,this._localState);this._scheduledReplication=!1,this._replicationActive=!0,this._replicatePatchToBackend(n).then(function(t){e._handleBackendUpdate(r,t),e._currentRequestDeferred.resolve(e._id),e._currentRequestDeferred=null,e._replicationActive=!1,e._startReplication()},function(t){e._currentRequestDeferred.reject(t),e._currentRequestDeferred=null,e._replicationActive=!1})}},{key:"_replicatePatchToBackend",value:function(t){if("deleted"===t._modification)return this._deleteObj();if(h.default.isEmpty(t))return scrivito.Promise.resolve(this._backendState);var e=scrivito.currentWorkspaceId(),r="workspaces/"+e+"/objs/"+this._id;return scrivito.CmsRestApi.put(r,{obj:t})}},{key:"_deleteObj",value:function(){var t=scrivito.currentWorkspaceId(),e="workspaces/"+t+"/objs/"+this._id;return scrivito.CmsRestApi.delete(e,{include_deleted:!0})}},{key:"_initDeferredForRequest",value:function(){if(this._nextRequestDeferred){var t=this._nextRequestDeferred;this._nextRequestDeferred=null,this._currentRequestDeferred=t}else this._currentRequestDeferred=new s.default}},{key:"_handleBackendUpdate",value:function(n,i){var o=t(n,this._localState);this._updateBackendState(r(i,this._bufferedBackendState)),this._bufferedBackendState=void 0,this._updateLocalState(e(this._backendState,o))}},{key:"_updateLocalState",value:function(t){this._localState=t,d.set(this._id,this._localState)}},{key:"_updateBackendState",value:function(t){void 0!==this._backendState&&_++,this._backendState=t}},{key:"isNotStoredInBackend",value:function(){return null===this._backendState}},{key:"isRequestInFlight",value:function(){return this._replicationActive}},{key:"backendState",get:function(){return this._backendState}},{key:"localState",get:function(){return this._localState}}],[{key:"disableReplication",value:function(){f=!0}},{key:"enableReplication",value:function(){f=!1}},{key:"clearWriteCallbacks",value:function(){p={}}},{key:"clearCache",value:function(){c={}}}]),i}()}()},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=r(0),o=n(i),a=r(216),u=n(a);!function(){u.default.noConflict(),u.default.config({warnings:!1,longStackTraces:!1}),o.default.extend(scrivito,{Promise:u.default,promise:{enableDebugMode:function(){u.default.config({warnings:!0,longStackTraces:!0})},wrapInJqueryDeferred:function(t,e){var r=e;return t.then(function(t){return r.resolve(t)},function(t){r.reject(t)}),r},always:function(t,e){return t.then(e,e),t},capturePromises:function(){u.default.setScheduler(function(t){scrivito.nextTick(t)})}}})}()},function(t,e,r){(function(e,r,n){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2013-2015 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
!function(e){t.exports=e()}(function(){var t,i,o;return function t(e,r,n){function i(a,u){if(!r[a]){if(!e[a]){var s="function"==typeof _dereq_&&_dereq_;if(!u&&s)return s(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[a]={exports:{}};e[a][0].call(l.exports,function(t){var r=e[a][1][t];return i(r||t)},l,l.exports,t,e,r,n)}return r[a].exports}for(var o="function"==typeof _dereq_&&_dereq_,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,r){"use strict";e.exports=function(t){function e(t){var e=new r(t),n=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),n}var r=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,r,n){"use strict";function i(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new l(16),this._normalQueue=new l(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=c}function o(t,e,r){this._lateQueue.push(t,e,r),this._queueTick()}function a(t,e,r){this._normalQueue.push(t,e,r),this._queueTick()}function u(t){this._normalQueue._pushOne(t),this._queueTick()}var s;try{throw new Error}catch(t){s=t}var c=t("./schedule"),l=t("./queue"),f=t("./util");i.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},i.prototype.hasCustomScheduler=function(){return this._customScheduler},i.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},i.prototype.disableTrampolineIfNecessary=function(){f.hasDevTools&&(this._trampolineEnabled=!1)},i.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},i.prototype.fatalError=function(t,r){r?(e.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),e.exit(2)):this.throwLater(t)},i.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},f.hasDevTools?(i.prototype.invokeLater=function(t,e,r){this._trampolineEnabled?o.call(this,t,e,r):this._schedule(function(){setTimeout(function(){t.call(e,r)},100)})},i.prototype.invoke=function(t,e,r){this._trampolineEnabled?a.call(this,t,e,r):this._schedule(function(){t.call(e,r)})},i.prototype.settlePromises=function(t){this._trampolineEnabled?u.call(this,t):this._schedule(function(){t._settlePromises()})}):(i.prototype.invokeLater=o,i.prototype.invoke=a,i.prototype.settlePromises=u),i.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var r=t.shift(),n=t.shift();e.call(r,n)}else e._settlePromises()}},i.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},i.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},i.prototype._reset=function(){this._isTickUsed=!1},r.exports=i,r.exports.firstLineError=s},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,r){"use strict";e.exports=function(t,e,r,n){var i=!1,o=function(t,e){this._reject(e)},a=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},u=function(t,e){0==(50397184&this._bitField)&&this._resolveCallback(e.target)},s=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=n.propagateFromFunction(),t.prototype._boundValue=n.boundValueFunction());var c=r(o),l=new t(e);l._propagateFrom(this,1);var f=this._target();if(l._setBoundTo(c),c instanceof t){var d={promiseRejectionQueued:!1,promise:l,target:f,bindingPromise:c};f._then(e,a,void 0,l,d),c._then(u,s,void 0,l,d),l._setOnCancel(c)}else l._resolveCallback(f);return l},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},t.bind=function(e,r){return t.resolve(r).bind(e)}}},{}],4:[function(t,e,r){"use strict";function n(){try{Promise===o&&(Promise=i)}catch(t){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=t("./promise")();o.noConflict=n,e.exports=o},{"./promise":22}],5:[function(t,e,r){"use strict";var n=Object.create;if(n){var i=n(null),o=n(null);i[" size"]=o[" size"]=0}e.exports=function(e){function r(t,r){var n;if(null!=t&&(n=t[r]),"function"!=typeof n){var i="Object "+u.classString(t)+" has no method '"+u.toString(r)+"'";throw new e.TypeError(i)}return n}function n(t){return r(t,this.pop()).apply(t,this)}function i(t){return t[this]}function o(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}var a,u=t("./util"),s=u.canEvaluate;u.isIdentifier;e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(n,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e,r="number"==typeof t;if(r)e=o;else if(s){var n=a(t);e=null!==n?n:i}else e=i;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){var o=t("./util"),a=o.tryCatch,u=o.errorObj,s=e._async;e.prototype.break=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var r=t._cancellationParent;if(null==r||!r._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=r}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),s.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var r=0;r<t.length;++r)this._doInvokeOnCancel(t[r],e);else if(void 0!==t)if("function"==typeof t){if(!e){var n=a(t).call(this._boundValue());n===u&&(this._attachExtraTrace(n.e),s.throwLater(n.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),s.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,r){"use strict";e.exports=function(e){function r(t,r,u){return function(s){var c=u._boundValue();t:for(var l=0;l<t.length;++l){var f=t[l];if(f===Error||null!=f&&f.prototype instanceof Error){if(s instanceof f)return o(r).call(c,s)}else if("function"==typeof f){var d=o(f).call(c,s);if(d===a)return d;if(d)return o(r).call(c,s)}else if(n.isObject(s)){for(var p=i(f),h=0;h<p.length;++h){var v=p[h];if(f[v]!=s[v])continue t}return o(r).call(c,s)}}return e}}var n=t("./util"),i=t("./es5").keys,o=n.tryCatch,a=n.errorObj;return r}},{"./es5":13,"./util":36}],8:[function(t,e,r){"use strict";e.exports=function(t){function e(){this._trace=new e.CapturedTrace(n())}function r(){if(i)return new e}function n(){var t=o.length-1;if(t>=0)return o[t]}var i=!1,o=[];return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},e.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,o.push(this._trace))},e.prototype._popContext=function(){if(void 0!==this._trace){var t=o.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},e.CapturedTrace=null,e.create=r,e.deactivateLongStackTraces=function(){},e.activateLongStackTraces=function(){var r=t.prototype._pushContext,o=t.prototype._popContext,a=t._peekContext,u=t.prototype._peekContext,s=t.prototype._promiseCreated;e.deactivateLongStackTraces=function(){t.prototype._pushContext=r,t.prototype._popContext=o,t._peekContext=a,t.prototype._peekContext=u,t.prototype._promiseCreated=s,i=!1},i=!0,t.prototype._pushContext=e.prototype._pushContext,t.prototype._popContext=e.prototype._popContext,t._peekContext=t.prototype._peekContext=n,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},e}},{}],9:[function(t,r,n){"use strict";r.exports=function(r,n){function i(t,e){return{promise:e}}function o(){return!1}function a(t,e,r){var n=this;try{t(e,r,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+B.toString(t));n._attachCancellationCallback(t)})}catch(t){return t}}function u(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?B.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function s(){return this._onCancelField}function c(t){this._onCancelField=t}function l(){this._cancellationParent=void 0,this._onCancelField=void 0}function f(t,e){if(0!=(1&e)){this._cancellationParent=t;var r=t._branchesRemainingToCancel;void 0===r&&(r=0),t._branchesRemainingToCancel=r+1}0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function d(t,e){0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function p(){var t=this._boundTo;return void 0!==t&&t instanceof r?t.isFulfilled()?t.value():void 0:t}function h(){this._trace=new F(this._peekContext())}function v(t,e){if(L(t)){var r=this._trace;if(void 0!==r&&e&&(r=r._parent),void 0!==r)r.attachExtraTrace(t);else if(!t.__stackCleaned__){var n=O(t);B.notEnumerableProp(t,"stack",n.message+"\n"+n.stack.join("\n")),B.notEnumerableProp(t,"__stackCleaned__",!0)}}}function y(t,e,r,n,i){if(void 0===t&&null!==e&&Y){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&n._bitField))return;r&&(r+=" ");var o="",a="";if(e._trace){for(var u=e._trace.stack.split("\n"),s=k(u),c=s.length-1;c>=0;--c){var l=s[c];if(!W.test(l)){var f=l.match(q);f&&(o="at "+f[1]+":"+f[2]+":"+f[3]+" ");break}}if(s.length>0)for(var d=s[0],c=0;c<u.length;++c)if(u[c]===d){c>0&&(a="\n"+u[c-1]);break}}var p="a promise was created in a "+r+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+a;n._warn(p,!0,e)}}function _(t,e){var r=t+" is deprecated and will be removed in a future version.";return e&&(r+=" Use "+e+" instead."),g(r)}function g(t,e,n){if(at.warnings){var i,o=new z(t);if(e)n._attachExtraTrace(o);else if(at.longStackTraces&&(i=r._peekContext()))i.attachExtraTrace(o);else{var a=O(o);o.stack=a.message+"\n"+a.stack.join("\n")}et("warning",o)||C(o,"",!0)}}function m(t,e){for(var r=0;r<e.length-1;++r)e[r].push("From previous event:"),e[r]=e[r].join("\n");return r<e.length&&(e[r]=e[r].join("\n")),t+"\n"+e.join("\n")}function b(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function w(t){for(var e=t[0],r=1;r<t.length;++r){for(var n=t[r],i=e.length-1,o=e[i],a=-1,u=n.length-1;u>=0;--u)if(n[u]===o){a=u;break}for(var u=a;u>=0;--u){var s=n[u];if(e[i]!==s)break;e.pop(),i--}e=n}}function k(t){for(var e=[],r=0;r<t.length;++r){var n=t[r],i="    (No stack trace)"===n||V.test(n),o=i&&nt(n);i&&!o&&(H&&" "!==n.charAt(0)&&(n="    "+n),e.push(n))}return e}function j(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),r=0;r<e.length;++r){var n=e[r];if("    (No stack trace)"===n||V.test(n))break}return r>0&&"SyntaxError"!=t.name&&(e=e.slice(r)),e}function O(t){var e=t.stack,r=t.toString();return e="string"==typeof e&&e.length>0?j(t):["    (No stack trace)"],{message:r,stack:"SyntaxError"==t.name?e:k(e)}}function C(t,e,r){if("undefined"!=typeof console){var n;if(B.isObject(t)){var i=t.stack;n=e+Q(i,t)}else n=e+String(t);"function"==typeof R?R(n,r):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(n)}}function P(t,e,r,n){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(n):e(r,n))}catch(t){N.throwLater(t)}"unhandledRejection"===t?et(t,r,n)||i||C(r,"Unhandled rejection "):et(t,n)}function E(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"==typeof t.toString?t.toString():B.toString(t);if(/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+A(e)+">, no stack trace)"}function A(t){return t.length<41?t:t.substr(0,38)+"..."}function S(){return"function"==typeof ot}function x(t){var e=t.match(it);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function T(t,e){if(S()){for(var r,n,i=t.stack.split("\n"),o=e.stack.split("\n"),a=-1,u=-1,s=0;s<i.length;++s){var c=x(i[s]);if(c){r=c.fileName,a=c.line;break}}for(var s=0;s<o.length;++s){var c=x(o[s]);if(c){n=c.fileName,u=c.line;break}}a<0||u<0||!r||!n||r!==n||a>=u||(nt=function(t){if(U.test(t))return!0;var e=x(t);return!!(e&&e.fileName===r&&a<=e.line&&e.line<=u)})}}function F(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);ot(this,F),e>32&&this.uncycle()}var M,I,R,D=r._getDomain,N=r._async,z=t("./errors").Warning,B=t("./util"),L=B.canAttachTrace,U=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,W=/\((?:timers\.js):\d+:\d+\)/,q=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,V=null,Q=null,H=!1,G=!(0==B.env("BLUEBIRD_DEBUG")),$=!(0==B.env("BLUEBIRD_WARNINGS")||!G&&!B.env("BLUEBIRD_WARNINGS")),Z=!(0==B.env("BLUEBIRD_LONG_STACK_TRACES")||!G&&!B.env("BLUEBIRD_LONG_STACK_TRACES")),Y=0!=B.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&($||!!B.env("BLUEBIRD_W_FORGOTTEN_RETURN"));r.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},r.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),N.invokeLater(this._notifyUnhandledRejection,this,void 0))},r.prototype._notifyUnhandledRejectionIsHandled=function(){P("rejectionHandled",M,void 0,this)},r.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},r.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},r.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),P("unhandledRejection",I,t,this)}},r.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},r.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},r.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},r.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},r.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},r.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},r.prototype._warn=function(t,e,r){return g(t,e,r||this)},r.onPossiblyUnhandledRejection=function(t){var e=D();I="function"==typeof t?null===e?t:B.domainBind(e,t):void 0},r.onUnhandledRejectionHandled=function(t){var e=D();M="function"==typeof t?null===e?t:B.domainBind(e,t):void 0};var K=function(){};r.longStackTraces=function(){if(N.haveItemsQueued()&&!at.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!at.longStackTraces&&S()){var t=r.prototype._captureStackTrace,e=r.prototype._attachExtraTrace;at.longStackTraces=!0,K=function(){if(N.haveItemsQueued()&&!at.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");r.prototype._captureStackTrace=t,r.prototype._attachExtraTrace=e,n.deactivateLongStackTraces(),N.enableTrampoline(),at.longStackTraces=!1},r.prototype._captureStackTrace=h,r.prototype._attachExtraTrace=v,n.activateLongStackTraces(),N.disableTrampolineIfNecessary()}},r.hasLongStackTraces=function(){return at.longStackTraces&&S()};var X=function(){try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return B.global.dispatchEvent(t),function(t,e){var r=new CustomEvent(t.toLowerCase(),{detail:e,cancelable:!0});return!B.global.dispatchEvent(r)}}if("function"==typeof Event){var t=new Event("CustomEvent");return B.global.dispatchEvent(t),function(t,e){var r=new Event(t.toLowerCase(),{cancelable:!0});return r.detail=e,!B.global.dispatchEvent(r)}}var t=document.createEvent("CustomEvent");return t.initCustomEvent("testingtheevent",!1,!0,{}),B.global.dispatchEvent(t),function(t,e){var r=document.createEvent("CustomEvent");return r.initCustomEvent(t.toLowerCase(),!1,!0,e),!B.global.dispatchEvent(r)}}catch(t){}return function(){return!1}}(),J=function(){return B.isNode?function(){return e.emit.apply(e,arguments)}:B.global?function(t){var e="on"+t.toLowerCase(),r=B.global[e];return!!r&&(r.apply(B.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),tt={promiseCreated:i,promiseFulfilled:i,promiseRejected:i,promiseResolved:i,promiseCancelled:i,promiseChained:function(t,e,r){return{promise:e,child:r}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,r){return{reason:e,promise:r}},rejectionHandled:i},et=function(t){var e=!1;try{e=J.apply(null,arguments)}catch(t){N.throwLater(t),e=!0}var r=!1;try{r=X(t,tt[t].apply(null,arguments))}catch(t){N.throwLater(t),r=!0}return r||e};r.config=function(t){if(t=Object(t),"longStackTraces"in t&&(t.longStackTraces?r.longStackTraces():!t.longStackTraces&&r.hasLongStackTraces()&&K()),"warnings"in t){var e=t.warnings;at.warnings=!!e,Y=at.warnings,B.isObject(e)&&"wForgottenReturn"in e&&(Y=!!e.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!at.cancellation){if(N.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");r.prototype._clearCancellationData=l,r.prototype._propagateFrom=f,r.prototype._onCancel=s,r.prototype._setOnCancel=c,r.prototype._attachCancellationCallback=u,r.prototype._execute=a,rt=f,at.cancellation=!0}return"monitoring"in t&&(t.monitoring&&!at.monitoring?(at.monitoring=!0,r.prototype._fireEvent=et):!t.monitoring&&at.monitoring&&(at.monitoring=!1,r.prototype._fireEvent=o)),r},r.prototype._fireEvent=o,r.prototype._execute=function(t,e,r){try{t(e,r)}catch(t){return t}},r.prototype._onCancel=function(){},r.prototype._setOnCancel=function(t){},r.prototype._attachCancellationCallback=function(t){},r.prototype._captureStackTrace=function(){},r.prototype._attachExtraTrace=function(){},r.prototype._clearCancellationData=function(){},r.prototype._propagateFrom=function(t,e){};var rt=d,nt=function(){return!1},it=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;B.inherits(F,Error),n.CapturedTrace=F,F.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],r={},n=0,i=this;void 0!==i;++n)e.push(i),i=i._parent;t=this._length=n;for(var n=t-1;n>=0;--n){var o=e[n].stack;void 0===r[o]&&(r[o]=n)}for(var n=0;n<t;++n){var a=e[n].stack,u=r[a];if(void 0!==u&&u!==n){u>0&&(e[u-1]._parent=void 0,e[u-1]._length=1),e[n]._parent=void 0,e[n]._length=1;var s=n>0?e[n-1]:this;u<t-1?(s._parent=e[u+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var c=s._length+1,l=n-2;l>=0;--l)e[l]._length=c,c++;return}}}},F.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=O(t),r=e.message,n=[e.stack],i=this;void 0!==i;)n.push(k(i.stack.split("\n"))),i=i._parent;w(n),b(n),B.notEnumerableProp(t,"stack",m(r,n)),B.notEnumerableProp(t,"__stackCleaned__",!0)}};var ot=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():E(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,V=t,Q=e;var r=Error.captureStackTrace;return nt=function(t){return U.test(t)},function(t,e){Error.stackTraceLimit+=6,r(t,e),Error.stackTraceLimit-=6}}var n=new Error;if("string"==typeof n.stack&&n.stack.split("\n")[0].indexOf("stackDetection@")>=0)return V=/@/,Q=e,H=!0,function(t){t.stack=(new Error).stack};var i;try{throw new Error}catch(t){i="stack"in t}return"stack"in n||!i||"number"!=typeof Error.stackTraceLimit?(Q=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?E(e):e.toString()},null):(V=t,Q=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(R=function(t){console.warn(t)},B.isNode&&e.stderr.isTTY?R=function(t,e){var r=e?"[33m":"[31m";console.warn(r+t+"[0m\n")}:B.isNode||"string"!=typeof(new Error).stack||(R=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var at={warnings:$,longStackTraces:!1,cancellation:!1,monitoring:!1};return Z&&r.longStackTraces(),{longStackTraces:function(){return at.longStackTraces},warnings:function(){return at.warnings},cancellation:function(){return at.cancellation},monitoring:function(){return at.monitoring},propagateFromFunction:function(){return rt},boundValueFunction:function(){return p},checkForgottenReturns:y,setBounds:T,warn:g,deprecated:_,CapturedTrace:F,fireDomEvent:X,fireGlobalEvent:J}}},{"./errors":12,"./util":36}],10:[function(t,e,r){"use strict";e.exports=function(t){function e(){return this.value}function r(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(r){return r instanceof t&&r.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:r},void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return this._then(r,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,r,void 0,{reason:t},void 0);var e=arguments[1],n=function(){throw e};return this.caught(t,n)},t.prototype.catchReturn=function(r){if(arguments.length<=1)return r instanceof t&&r.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:r},void 0);var n=arguments[1];n instanceof t&&n.suppressUnhandledRejections();var i=function(){return n};return this.caught(r,i)}}},{}],11:[function(t,e,r){"use strict";e.exports=function(t,e){function r(){return o(this)}function n(t,r){return i(t,r,e,e)}var i=t.reduce,o=t.all;t.prototype.each=function(t){return i(this,t,e,0)._then(r,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return i(this,t,e,e)},t.each=function(t,n){return i(t,n,e,0)._then(r,void 0,void 0,t,void 0)},t.mapSeries=n}},{}],12:[function(t,e,r){"use strict";function n(t,e){function r(n){if(!(this instanceof r))return new r(n);f(this,"message","string"==typeof n?n:e),f(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return l(r,Error),r}function i(t){if(!(this instanceof i))return new i(t);f(this,"name","OperationalError"),f(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(f(this,"message",t.message),f(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var o,a,u=t("./es5"),s=u.freeze,c=t("./util"),l=c.inherits,f=c.notEnumerableProp,d=n("Warning","warning"),p=n("CancellationError","cancellation error"),h=n("TimeoutError","timeout error"),v=n("AggregateError","aggregate error");try{o=TypeError,a=RangeError}catch(t){o=n("TypeError","type error"),a=n("RangeError","range error")}for(var y="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),_=0;_<y.length;++_)"function"==typeof Array.prototype[y[_]]&&(v.prototype[y[_]]=Array.prototype[y[_]]);u.defineProperty(v.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),v.prototype.isOperational=!0;var g=0;v.prototype.toString=function(){var t=Array(4*g+1).join(" "),e="\n"+t+"AggregateError of:\n";g++,t=Array(4*g+1).join(" ");for(var r=0;r<this.length;++r){for(var n=this[r]===this?"[Circular AggregateError]":this[r]+"",i=n.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];n=i.join("\n"),e+=n+"\n"}return g--,e},l(i,Error);var m=Error.__BluebirdErrorTypes__;m||(m=s({CancellationError:p,TimeoutError:h,OperationalError:i,RejectionError:i,AggregateError:v}),u.defineProperty(Error,"__BluebirdErrorTypes__",{value:m,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:o,RangeError:a,CancellationError:m.CancellationError,OperationalError:m.OperationalError,TimeoutError:m.TimeoutError,AggregateError:m.AggregateError,Warning:d}},{"./es5":13,"./util":36}],13:[function(t,e,r){var n=function(){"use strict";return void 0===this}();if(n)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(t,e){var r=Object.getOwnPropertyDescriptor(t,e);return!(r&&!r.writable&&!r.set)}};else{var i={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,u=function(t){var e=[];for(var r in t)i.call(t,r)&&e.push(r);return e},s=function(t,e){return{value:t[e]}},c=function(t,e,r){return t[e]=r.value,t},l=function(t){return t},f=function(t){try{return Object(t).constructor.prototype}catch(t){return a}},d=function(t){try{return"[object Array]"===o.call(t)}catch(t){return!1}};e.exports={isArray:d,keys:u,names:u,defineProperty:c,getDescriptor:s,freeze:l,getPrototypeOf:f,isES5:n,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,r){"use strict";e.exports=function(t,e){var r=t.map;t.prototype.filter=function(t,n){return r(this,t,n,e)},t.filter=function(t,n,i){return r(t,n,i,e)}}},{}],15:[function(t,e,r){"use strict";e.exports=function(e,r){function n(t,e,r){this.promise=t,this.type=e,this.handler=r,this.called=!1,this.cancelPromise=null}function i(t){this.finallyHandler=t}function o(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function a(){return s.call(this,this.promise._target()._settledValue())}function u(t){if(!o(this,t))return f.e=t,f}function s(t){var n=this.promise,s=this.handler;if(!this.called){this.called=!0;var c=this.isFinallyHandler()?s.call(n._boundValue()):s.call(n._boundValue(),t);if(void 0!==c){n._setReturnedNonUndefined();var d=r(c,n);if(d instanceof e){if(null!=this.cancelPromise){if(d._isCancelled()){var p=new l("late cancellation observer");return n._attachExtraTrace(p),f.e=p,f}d.isPending()&&d._attachCancellationCallback(new i(this))}return d._then(a,u,void 0,this,void 0)}}}return n.isRejected()?(o(this),f.e=t,f):(o(this),t)}var c=t("./util"),l=e.CancellationError,f=c.errorObj;return n.prototype.isFinallyHandler=function(){return 0===this.type},i.prototype._resultCancelled=function(){o(this.finallyHandler)},e.prototype._passThrough=function(t,e,r,i){return"function"!=typeof t?this.then():this._then(r,i,void 0,new n(this,e,t),void 0)},e.prototype.lastly=e.prototype.finally=function(t){return this._passThrough(t,0,s,s)},e.prototype.tap=function(t){return this._passThrough(t,1,s)},n}},{"./util":36}],16:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o,a){function u(t,r,n){for(var o=0;o<r.length;++o){n._pushContext();var a=p(r[o])(t);if(n._popContext(),a===d){n._pushContext();var u=e.reject(d.e);return n._popContext(),u}var s=i(a,n);if(s instanceof e)return s}return null}function s(t,r,i,o){if(a.cancellation()){var u=new e(n),s=this._finallyPromise=new e(n);this._promise=u.lastly(function(){return s}),u._captureStackTrace(),u._setOnCancel(this)}else{(this._promise=new e(n))._captureStackTrace()}this._stack=o,this._generatorFunction=t,this._receiver=r,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(h):h,this._yieldedPromise=null,this._cancellationPhase=!1}var c=t("./errors"),l=c.TypeError,f=t("./util"),d=f.errorObj,p=f.tryCatch,h=[];f.inherits(s,o),s.prototype._isResolved=function(){return null===this._promise},s.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},s.prototype._promiseCancelled=function(){if(!this._isResolved()){var t,r=void 0!==this._generator.return;if(r)this._promise._pushContext(),t=p(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var n=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=n,this._promise._attachExtraTrace(n),this._promise._pushContext(),t=p(this._generator.throw).call(this._generator,n),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},s.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=p(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},s.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=p(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},s.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},s.prototype.promise=function(){return this._promise},s.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},s.prototype._continue=function(t){var r=this._promise;if(t===d)return this._cleanup(),this._cancellationPhase?r.cancel():r._rejectCallback(t.e,!1);var n=t.value;if(!0===t.done)return this._cleanup(),this._cancellationPhase?r.cancel():r._resolveCallback(n);var o=i(n,this._promise);if(!(o instanceof e)&&null===(o=u(o,this._yieldHandlers,this._promise)))return void this._promiseRejected(new l("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",n)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));o=o._target();var a=o._bitField;0==(50397184&a)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&a)?e._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&a)?e._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()},e.coroutine=function(t,e){if("function"!=typeof t)throw new l("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=Object(e).yieldHandler,n=s,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new n(void 0,void 0,r,i),a=o.promise();return o._generator=e,o._promiseFulfilled(void 0),a}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new l("expecting a function but got "+f.classString(t));h.push(t)},e.spawn=function(t){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return r("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=new s(t,this),i=n.promise();return n._run(e.spawn),i}}},{"./errors":12,"./util":36}],17:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o,a){var u=t("./util");u.canEvaluate,u.tryCatch,u.errorObj;e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var n}var i=[].slice.call(arguments);t&&i.pop();var n=new r(i).promise();return void 0!==t?n.spread(t):n}}},{"./util":36}],18:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o,a){function u(t,e,r,n){this.constructor$(t),this._promise._captureStackTrace();var i=c();this._callback=null===i?e:l.domainBind(i,e),this._preservedValues=n===o?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=[],p.invoke(this._asyncInit,this,void 0)}function s(t,r,i,o){if("function"!=typeof r)return n("expecting a function but got "+l.classString(r));var a=0;if(void 0!==i){if("object"!=typeof i||null===i)return e.reject(new TypeError("options argument must be an object but it is "+l.classString(i)));if("number"!=typeof i.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+l.classString(i.concurrency)));a=i.concurrency}return a="number"==typeof a&&isFinite(a)&&a>=1?a:0,new u(t,r,a,o).promise()}var c=e._getDomain,l=t("./util"),f=l.tryCatch,d=l.errorObj,p=e._async;l.inherits(u,r),u.prototype._asyncInit=function(){this._init$(void 0,-2)},u.prototype._init=function(){},u.prototype._promiseFulfilled=function(t,r){var n=this._values,o=this.length(),u=this._preservedValues,s=this._limit;if(r<0){if(r=-1*r-1,n[r]=t,s>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(s>=1&&this._inFlight>=s)return n[r]=t,this._queue.push(r),!1;null!==u&&(u[r]=t);var c=this._promise,l=this._callback,p=c._boundValue();c._pushContext();var h=f(l).call(p,t,r,o),v=c._popContext();if(a.checkForgottenReturns(h,v,null!==u?"Promise.filter":"Promise.map",c),h===d)return this._reject(h.e),!0;var y=i(h,this._promise);if(y instanceof e){y=y._target();var _=y._bitField;if(0==(50397184&_))return s>=1&&this._inFlight++,n[r]=y,y._proxy(this,-1*(r+1)),!1;if(0==(33554432&_))return 0!=(16777216&_)?(this._reject(y._reason()),!0):(this._cancel(),!0);h=y._value()}n[r]=h}return++this._totalResolved>=o&&(null!==u?this._filter(n,u):this._resolve(n),!0)},u.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,r=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var n=t.pop();this._promiseFulfilled(r[n],n)}},u.prototype._filter=function(t,e){for(var r=e.length,n=new Array(r),i=0,o=0;o<r;++o)t[o]&&(n[i++]=e[o]);n.length=i,this._resolve(n)},u.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return s(this,t,e,null)},e.map=function(t,e,r,n){return s(t,e,r,n)}}},{"./util":36}],19:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o){var a=t("./util"),u=a.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+a.classString(t));return function(){var n=new e(r);n._captureStackTrace(),n._pushContext();var i=u(t).apply(this,arguments),a=n._popContext();return o.checkForgottenReturns(i,a,"Promise.method",n),n._resolveFromSyncValue(i),n}},e.attempt=e.try=function(t){if("function"!=typeof t)return i("expecting a function but got "+a.classString(t));var n=new e(r);n._captureStackTrace(),n._pushContext();var s;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],l=arguments[2];s=a.isArray(c)?u(t).apply(l,c):u(t).call(l,c)}else s=u(t)();var f=n._popContext();return o.checkForgottenReturns(s,f,"Promise.try",n),n._resolveFromSyncValue(s),n},e.prototype._resolveFromSyncValue=function(t){t===a.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,r){"use strict";function n(t){return t instanceof Error&&l.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(n(t)){e=new c(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var r=l.keys(t),i=0;i<r.length;++i){var o=r[i];f.test(o)||(e[o]=t[o])}return e}return a.markAsOriginatingFromRejection(t),t}function o(t,e){return function(r,n){if(null!==t){if(r){var o=i(u(r));t._attachExtraTrace(o),t._reject(o)}else if(e){var a=[].slice.call(arguments,1);t._fulfill(a)}else t._fulfill(n);t=null}}}var a=t("./util"),u=a.maybeWrapAsError,s=t("./errors"),c=s.OperationalError,l=t("./es5"),f=/^(?:name|message|stack|cause)$/;e.exports=o},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,r){"use strict";e.exports=function(e){function r(t,e){var r=this;if(!o.isArray(t))return n.call(r,t,e);var i=u(e).apply(r._boundValue(),[null].concat(t));i===s&&a.throwLater(i.e)}function n(t,e){var r=this,n=r._boundValue(),i=void 0===t?u(e).call(n,null):u(e).call(n,null,t);i===s&&a.throwLater(i.e)}function i(t,e){var r=this;if(!t){var n=new Error(t+"");n.cause=t,t=n}var i=u(e).call(r._boundValue(),t);i===s&&a.throwLater(i.e)}var o=t("./util"),a=e._async,u=o.tryCatch,s=o.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=n;void 0!==e&&Object(e).spread&&(o=r),this._then(o,i,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,r,n){"use strict";r.exports=function(){function n(){}function i(t,e){if("function"!=typeof e)throw new m("expecting a function but got "+h.classString(e));if(t.constructor!==o)throw new m("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function o(t){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,t!==w&&(i(this,t),this._resolveFromExecutor(t)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function a(t){this.promise._resolveCallback(t)}function u(t){this.promise._rejectCallback(t,!1)}function s(t){var e=new o(w);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}var c,l=function(){return new m("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},f=function(){return new o.PromiseInspection(this._target())},d=function(t){return o.reject(new m(t))},p={},h=t("./util");c=h.isNode?function(){var t=e.domain;return void 0===t&&(t=null),t}:function(){return null},h.notEnumerableProp(o,"_getDomain",c);var v=t("./es5"),y=t("./async"),_=new y;v.defineProperty(o,"_async",{value:_});var g=t("./errors"),m=o.TypeError=g.TypeError;o.RangeError=g.RangeError;var b=o.CancellationError=g.CancellationError;o.TimeoutError=g.TimeoutError,o.OperationalError=g.OperationalError,o.RejectionError=g.OperationalError,o.AggregateError=g.AggregateError;var w=function(){},k={},j={},O=t("./thenables")(o,w),C=t("./promise_array")(o,w,O,d,n),P=t("./context")(o),E=P.create,A=t("./debuggability")(o,P),S=(A.CapturedTrace,t("./finally")(o,O)),x=t("./catch_filter")(j),T=t("./nodeback"),F=h.errorObj,M=h.tryCatch;return o.prototype.toString=function(){return"[object Promise]"},o.prototype.caught=o.prototype.catch=function(t){var e=arguments.length;if(e>1){var r,n=new Array(e-1),i=0;for(r=0;r<e-1;++r){var o=arguments[r];if(!h.isObject(o))return d("expecting an object but got A catch statement predicate "+h.classString(o));n[i++]=o}return n.length=i,t=arguments[r],this.then(void 0,x(n,t,this))}return this.then(void 0,t)},o.prototype.reflect=function(){return this._then(f,f,void 0,this,void 0)},o.prototype.then=function(t,e){if(A.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var r=".then() only accepts functions but was passed: "+h.classString(t);arguments.length>1&&(r+=", "+h.classString(e)),this._warn(r)}return this._then(t,e,void 0,void 0,void 0)},o.prototype.done=function(t,e){this._then(t,e,void 0,void 0,void 0)._setIsFinal()},o.prototype.spread=function(t){return"function"!=typeof t?d("expecting a function but got "+h.classString(t)):this.all()._then(t,void 0,void 0,k,void 0)},o.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},o.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new C(this).promise()},o.prototype.error=function(t){return this.caught(h.originatesFromRejection,t)},o.getNewLibraryCopy=r.exports,o.is=function(t){return t instanceof o},o.fromNode=o.fromCallback=function(t){var e=new o(w);e._captureStackTrace();var r=arguments.length>1&&!!Object(arguments[1]).multiArgs,n=M(t)(T(e,r));return n===F&&e._rejectCallback(n.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},o.all=function(t){return new C(t).promise()},o.cast=function(t){var e=O(t);return e instanceof o||(e=new o(w),e._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},o.resolve=o.fulfilled=o.cast,o.reject=o.rejected=function(t){var e=new o(w);return e._captureStackTrace(),e._rejectCallback(t,!0),e},o.setScheduler=function(t){if("function"!=typeof t)throw new m("expecting a function but got "+h.classString(t));return _.setScheduler(t)},o.prototype._then=function(t,e,r,n,i){var a=void 0!==i,u=a?i:new o(w),s=this._target(),l=s._bitField;a||(u._propagateFrom(this,3),u._captureStackTrace(),void 0===n&&0!=(2097152&this._bitField)&&(n=0!=(50397184&l)?this._boundValue():s===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,u));var f=c();if(0!=(50397184&l)){var d,p,v=s._settlePromiseCtx;0!=(33554432&l)?(p=s._rejectionHandler0,d=t):0!=(16777216&l)?(p=s._fulfillmentHandler0,d=e,s._unsetRejectionIsUnhandled()):(v=s._settlePromiseLateCancellationObserver,p=new b("late cancellation observer"),s._attachExtraTrace(p),d=e),_.invoke(v,s,{handler:null===f?d:"function"==typeof d&&h.domainBind(f,d),promise:u,receiver:n,value:p})}else s._addCallbacks(t,e,u,n,f);return u},o.prototype._length=function(){return 65535&this._bitField},o.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},o.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},o.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},o.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},o.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},o.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},o.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},o.prototype._isFinal=function(){return(4194304&this._bitField)>0},o.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},o.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},o.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},o.prototype._setAsyncGuaranteed=function(){_.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},o.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==p)return void 0===e&&this._isBound()?this._boundValue():e},o.prototype._promiseAt=function(t){return this[4*t-4+2]},o.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},o.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},o.prototype._boundValue=function(){},o.prototype._migrateCallback0=function(t){var e=(t._bitField,t._fulfillmentHandler0),r=t._rejectionHandler0,n=t._promise0,i=t._receiverAt(0);void 0===i&&(i=p),this._addCallbacks(e,r,n,i,null)},o.prototype._migrateCallbackAt=function(t,e){var r=t._fulfillmentHandlerAt(e),n=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=p),this._addCallbacks(r,n,i,o,null)},o.prototype._addCallbacks=function(t,e,r,n,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=r,this._receiver0=n,"function"==typeof t&&(this._fulfillmentHandler0=null===i?t:h.domainBind(i,t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:h.domainBind(i,e));else{var a=4*o-4;this[a+2]=r,this[a+3]=n,"function"==typeof t&&(this[a+0]=null===i?t:h.domainBind(i,t)),"function"==typeof e&&(this[a+1]=null===i?e:h.domainBind(i,e))}return this._setLength(o+1),o},o.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},o.prototype._resolveCallback=function(t,e){if(0==(117506048&this._bitField)){if(t===this)return this._rejectCallback(l(),!1);var r=O(t,this);if(!(r instanceof o))return this._fulfill(t);e&&this._propagateFrom(r,2);var n=r._target();if(n===this)return void this._reject(l());var i=n._bitField;if(0==(50397184&i)){var a=this._length();a>0&&n._migrateCallback0(this);for(var u=1;u<a;++u)n._migrateCallbackAt(this,u);this._setFollowing(),this._setLength(0),this._setFollowee(n)}else if(0!=(33554432&i))this._fulfill(n._value());else if(0!=(16777216&i))this._reject(n._reason());else{var s=new b("late cancellation observer");n._attachExtraTrace(s),this._reject(s)}}},o.prototype._rejectCallback=function(t,e,r){var n=h.ensureErrorObject(t),i=n===t;if(!i&&!r&&A.warnings()){var o="a promise was rejected with a non-error: "+h.classString(t);this._warn(o,!0)}this._attachExtraTrace(n,!!e&&i),this._reject(t)},o.prototype._resolveFromExecutor=function(t){var e=this;this._captureStackTrace(),this._pushContext();var r=!0,n=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,r)});r=!1,this._popContext(),void 0!==n&&e._rejectCallback(n,!0)},o.prototype._settlePromiseFromHandler=function(t,e,r,n){var i=n._bitField;if(0==(65536&i)){n._pushContext();var o;e===k?r&&"number"==typeof r.length?o=M(t).apply(this._boundValue(),r):(o=F,o.e=new m("cannot .spread() a non-array: "+h.classString(r))):o=M(t).call(e,r);var a=n._popContext();i=n._bitField,0==(65536&i)&&(o===j?n._reject(r):o===F?n._rejectCallback(o.e,!1):(A.checkForgottenReturns(o,a,"",n,this),n._resolveCallback(o)))}},o.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},o.prototype._followee=function(){return this._rejectionHandler0},o.prototype._setFollowee=function(t){this._rejectionHandler0=t},o.prototype._settlePromise=function(t,e,r,i){var a=t instanceof o,u=this._bitField,s=0!=(134217728&u);0!=(65536&u)?(a&&t._invokeInternalOnCancel(),r instanceof S&&r.isFinallyHandler()?(r.cancelPromise=t,M(e).call(r,i)===F&&t._reject(F.e)):e===f?t._fulfill(f.call(r)):r instanceof n?r._promiseCancelled(t):a||t instanceof C?t._cancel():r.cancel()):"function"==typeof e?a?(s&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,r,i,t)):e.call(r,i,t):r instanceof n?r._isResolved()||(0!=(33554432&u)?r._promiseFulfilled(i,t):r._promiseRejected(i,t)):a&&(s&&t._setAsyncGuaranteed(),0!=(33554432&u)?t._fulfill(i):t._reject(i))},o.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,r=t.promise,n=t.receiver,i=t.value;"function"==typeof e?r instanceof o?this._settlePromiseFromHandler(e,n,i,r):e.call(n,i,r):r instanceof o&&r._reject(i)},o.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},o.prototype._settlePromise0=function(t,e,r){var n=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(n,t,i,e)},o.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},o.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var r=l();return this._attachExtraTrace(r),this._reject(r)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!=(134217728&e)?this._settlePromises():_.settlePromises(this))}},o.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=t,this._isFinal())return _.fatalError(t,h.isNode);(65535&e)>0?_.settlePromises(this):this._ensurePossibleRejectionHandled()}},o.prototype._fulfillPromises=function(t,e){for(var r=1;r<t;r++){var n=this._fulfillmentHandlerAt(r),i=this._promiseAt(r),o=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(i,n,o,e)}},o.prototype._rejectPromises=function(t,e){for(var r=1;r<t;r++){var n=this._rejectionHandlerAt(r),i=this._promiseAt(r),o=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(i,n,o,e)}},o.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!=(16842752&t)){var r=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,r,t),this._rejectPromises(e,r)}else{var n=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,n,t),this._fulfillPromises(e,n)}this._setLength(0)}this._clearCancellationData()},o.prototype._settledValue=function(){var t=this._bitField;return 0!=(33554432&t)?this._rejectionHandler0:0!=(16777216&t)?this._fulfillmentHandler0:void 0},o.defer=o.pending=function(){return A.deprecated("Promise.defer","new Promise"),{promise:new o(w),resolve:a,reject:u}},h.notEnumerableProp(o,"_makeSelfResolutionError",l),t("./method")(o,w,O,d,A),t("./bind")(o,w,O,A),t("./cancel")(o,C,d,A),t("./direct_resolve")(o),t("./synchronous_inspection")(o),t("./join")(o,C,O,w,_,c),o.Promise=o,o.version="3.4.7",t("./map.js")(o,C,d,O,w,A),t("./call_get.js")(o),t("./using.js")(o,d,O,E,w,A),t("./timers.js")(o,w,A),t("./generators.js")(o,d,w,O,n,A),t("./nodeify.js")(o),t("./promisify.js")(o,w),t("./props.js")(o,C,O,d),t("./race.js")(o,w,O,d),t("./reduce.js")(o,C,d,O,w,A),t("./settle.js")(o,C,A),t("./some.js")(o,C,d),t("./filter.js")(o,w),t("./each.js")(o,w),t("./any.js")(o),h.toFastProperties(o),h.toFastProperties(o.prototype),s({a:1}),s({b:2}),s({c:3}),s(1),s(function(){}),s(void 0),s(!1),s(new o(w)),A.setBounds(y.firstLineError,h.lastLineError),o}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o){function a(t){switch(t){case-2:return[];case-3:return{}}}function u(t){var n=this._promise=new e(r);t instanceof e&&n._propagateFrom(t,3),n._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var s=t("./util");s.isArray;return s.inherits(u,o),u.prototype.length=function(){return this._length},u.prototype.promise=function(){return this._promise},u.prototype._init=function t(r,o){var u=n(this._values,this._promise);if(u instanceof e){u=u._target();var c=u._bitField;if(this._values=u,0==(50397184&c))return this._promise._setAsyncGuaranteed(),u._then(t,this._reject,void 0,this,o);if(0==(33554432&c))return 0!=(16777216&c)?this._reject(u._reason()):this._cancel();u=u._value()}if(null===(u=s.asArray(u))){var l=i("expecting an array or an iterable object but got "+s.classString(u)).reason();return void this._promise._rejectCallback(l,!1)}if(0===u.length)return void(-5===o?this._resolveEmptyArray():this._resolve(a(o)));this._iterate(u)},u.prototype._iterate=function(t){var r=this.getActualLength(t.length);this._length=r,this._values=this.shouldCopyValues()?new Array(r):this._values;for(var i=this._promise,o=!1,a=null,u=0;u<r;++u){var s=n(t[u],i);s instanceof e?(s=s._target(),a=s._bitField):a=null,o?null!==a&&s.suppressUnhandledRejections():null!==a?0==(50397184&a)?(s._proxy(this,u),this._values[u]=s):o=0!=(33554432&a)?this._promiseFulfilled(s._value(),u):0!=(16777216&a)?this._promiseRejected(s._reason(),u):this._promiseCancelled(u):o=this._promiseFulfilled(s,u)}o||i._setAsyncGuaranteed()},u.prototype._isResolved=function(){return null===this._values},u.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},u.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},u.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},u.prototype._promiseFulfilled=function(t,e){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},u.prototype._promiseCancelled=function(){return this._cancel(),!0},u.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},u.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var r=0;r<t.length;++r)t[r]instanceof e&&t[r].cancel()}},u.prototype.shouldCopyValues=function(){return!0},u.prototype.getActualLength=function(t){return t},u}},{"./util":36}],24:[function(t,e,r){"use strict";e.exports=function(e,r){function n(t){return!w.test(t)}function i(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function o(t,e,r){var n=p.getDataPropertyOrDefault(t,e+r,m);return!!n&&i(n)}function a(t,e,r){for(var n=0;n<t.length;n+=2){var i=t[n];if(r.test(i))for(var o=i.replace(r,""),a=0;a<t.length;a+=2)if(t[a]===o)throw new g("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}function u(t,e,r,n){for(var u=p.inheritedDataKeys(t),s=[],c=0;c<u.length;++c){var l=u[c],f=t[l],d=n===k||k(l,f,t);"function"!=typeof f||i(f)||o(t,l,e)||!n(l,f,t,d)||s.push(l,f)}return a(s,e,r),s}function s(t,n,i,o,a,u){function s(){var i=n;n===d&&(i=this);var o=new e(r);o._captureStackTrace();var a="string"==typeof l&&this!==c?this[l]:t,s=h(o,u);try{a.apply(i,v(arguments,s))}catch(t){o._rejectCallback(y(t),!0,!0)}return o._isFateSealed()||o._setAsyncGuaranteed(),o}var c=function(){return this}(),l=t;return"string"==typeof l&&(t=o),p.notEnumerableProp(s,"__isPromisified__",!0),s}function c(t,e,r,n,i){for(var o=new RegExp(j(e)+"$"),a=u(t,e,o,r),s=0,c=a.length;s<c;s+=2){var l=a[s],f=a[s+1],h=l+e;if(n===O)t[h]=O(l,d,l,f,e,i);else{var v=n(f,function(){return O(l,d,l,f,e,i)});p.notEnumerableProp(v,"__isPromisified__",!0),t[h]=v}}return p.toFastProperties(t),t}function l(t,e,r){return O(t,e,void 0,t,null,r)}var f,d={},p=t("./util"),h=t("./nodeback"),v=p.withAppended,y=p.maybeWrapAsError,_=p.canEvaluate,g=t("./errors").TypeError,m={__isPromisified__:!0},b=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],w=new RegExp("^(?:"+b.join("|")+")$"),k=function(t){return p.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t},j=function(t){return t.replace(/([$])/,"\\$")},O=_?f:s;e.promisify=function(t,e){if("function"!=typeof t)throw new g("expecting a function but got "+p.classString(t));if(i(t))return t;e=Object(e);var r=void 0===e.context?d:e.context,o=!!e.multiArgs,a=l(t,r,o);return p.copyDescriptors(t,a,n),a},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new g("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");e=Object(e);var r=!!e.multiArgs,n=e.suffix;"string"!=typeof n&&(n="Async");var i=e.filter;"function"!=typeof i&&(i=k);var o=e.promisifier;if("function"!=typeof o&&(o=O),!p.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=p.inheritedDataKeys(t),u=0;u<a.length;++u){var s=t[a[u]];"constructor"!==a[u]&&p.isClass(s)&&(c(s.prototype,n,i,o,r),c(s,n,i,o,r))}return c(t,n,i,o,r)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){function o(t){var e,r=!1;if(void 0!==u&&t instanceof u)e=f(t),r=!0;else{var n=l.keys(t),i=n.length;e=new Array(2*i);for(var o=0;o<i;++o){var a=n[o];e[o]=t[a],e[o+i]=a}}this.constructor$(e),this._isMap=r,this._init$(void 0,-3)}function a(t){var r,a=n(t);return c(a)?(r=a instanceof e?a._then(e.props,void 0,void 0,void 0,void 0):new o(a).promise(),a instanceof e&&r._propagateFrom(a,2),r):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var u,s=t("./util"),c=s.isObject,l=t("./es5");"function"==typeof Map&&(u=Map);var f=function(){function t(t,n){this[e]=t,this[e+r]=n,e++}var e=0,r=0;return function(n){r=n.size,e=0;var i=new Array(2*n.size);return n.forEach(t,i),i}}(),d=function(t){for(var e=new u,r=t.length/2|0,n=0;n<r;++n){var i=t[r+n],o=t[n];e.set(i,o)}return e};s.inherits(o,r),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){var r;if(this._isMap)r=d(this._values);else{r={};for(var n=this.length(),i=0,o=this.length();i<o;++i)r[this._values[i+n]]=this._values[i]}return this._resolve(r),!0}return!1},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return a(this)},e.props=function(t){return a(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,r){"use strict";function n(t,e,r,n,i){for(var o=0;o<i;++o)r[o+n]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},i.prototype.push=function(t,e,r){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(t),this._pushOne(e),void this._pushOne(r);var i=this._front+n-3;this._checkCapacity(n);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=r,this._length=n},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,n(this,0,this,e,this._front+this._length&e-1)},e.exports=i},{}],27:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){function o(t,o){var s=n(t);if(s instanceof e)return u(s);if(null===(t=a.asArray(t)))return i("expecting an array or an iterable object but got "+a.classString(t));var c=new e(r);void 0!==o&&c._propagateFrom(o,3);for(var l=c._fulfill,f=c._reject,d=0,p=t.length;d<p;++d){var h=t[d];(void 0!==h||d in t)&&e.cast(h)._then(l,f,void 0,c,null)}return c}var a=t("./util"),u=function(t){return t.then(function(e){return o(e,t)})};e.race=function(t){return o(t,void 0)},e.prototype.race=function(){return o(this,void 0)}}},{"./util":36}],28:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o,a){function u(t,r,n,i){this.constructor$(t);var a=d();this._fn=null===a?r:p.domainBind(a,r),void 0!==n&&(n=e.resolve(n),n._attachCancellationCallback(this)),this._initialValue=n,this._currentCancellable=null,this._eachValues=i===o?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function s(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function c(t,e,r,i){return"function"!=typeof e?n("expecting a function but got "+p.classString(e)):new u(t,e,r,i).promise()}function l(t){this.accum=t,this.array._gotAccum(t);var r=i(this.value,this.array._promise);return r instanceof e?(this.array._currentCancellable=r,r._then(f,void 0,void 0,this,void 0)):f.call(this,r)}function f(t){var r=this.array,n=r._promise,i=h(r._fn);n._pushContext();var o;(o=void 0!==r._eachValues?i.call(n._boundValue(),t,this.index,this.length):i.call(n._boundValue(),this.accum,t,this.index,this.length))instanceof e&&(r._currentCancellable=o);var u=n._popContext();return a.checkForgottenReturns(o,u,void 0!==r._eachValues?"Promise.each":"Promise.reduce",n),o}var d=e._getDomain,p=t("./util"),h=p.tryCatch;p.inherits(u,r),u.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==o&&this._eachValues.push(t)},u.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},u.prototype._init=function(){},u.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},u.prototype.shouldCopyValues=function(){return!1},u.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},u.prototype._resultCancelled=function(t){if(t===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel())},u.prototype._iterate=function(t){this._values=t;var r,n,i=t.length;if(void 0!==this._initialValue?(r=this._initialValue,n=0):(r=e.resolve(t[0]),n=1),this._currentCancellable=r,!r.isRejected())for(;n<i;++n){var o={accum:null,value:t[n],index:n,length:i,array:this};r=r._then(l,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(r=r._then(this._eachComplete,void 0,void 0,this,void 0)),r._then(s,s,void 0,r,this)},e.prototype.reduce=function(t,e){return c(this,t,e,null)},e.reduce=function(t,e,r,n){return c(t,e,r,n)}}},{"./util":36}],29:[function(t,i,o){"use strict";var a,u=t("./util"),s=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},c=u.getNativePromise();if(u.isNode&&"undefined"==typeof MutationObserver){var l=r.setImmediate,f=e.nextTick;a=u.isRecentNode?function(t){l.call(r,t)}:function(t){f.call(e,t)}}else if("function"==typeof c&&"function"==typeof c.resolve){var d=c.resolve();a=function(t){d.then(t)}}else a="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?void 0!==n?function(t){n(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:s:function(){var t=document.createElement("div"),e={attributes:!0},r=!1,n=document.createElement("div");new MutationObserver(function(){t.classList.toggle("foo"),r=!1}).observe(n,e);var i=function(){r||(r=!0,n.classList.toggle("foo"))};return function(r){var n=new MutationObserver(function(){n.disconnect(),r()});n.observe(t,e),i()}}();i.exports=a},{"./util":36}],30:[function(t,e,r){"use strict";e.exports=function(e,r,n){function i(t){this.constructor$(t)}var o=e.PromiseInspection;t("./util").inherits(i,r),i.prototype._promiseResolved=function(t,e){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},i.prototype._promiseFulfilled=function(t,e){var r=new o;return r._bitField=33554432,r._settledValueField=t,this._promiseResolved(e,r)},i.prototype._promiseRejected=function(t,e){var r=new o;return r._bitField=16777216,r._settledValueField=t,this._promiseResolved(e,r)},e.settle=function(t){return n.deprecated(".settle()",".reflect()"),new i(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,r){"use strict";e.exports=function(e,r,n){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||e<0)return n("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var r=new i(t),o=r.promise();return r.setHowMany(e),r.init(),o}var a=t("./util"),u=t("./errors").RangeError,s=t("./errors").AggregateError,c=a.isArray,l={};a.inherits(i,r),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=c(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},i.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(l),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new s,e=this.length();e<this._values.length;++e)this._values[e]!==l&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new u(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(t,e,r){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var r=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},n=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},a=e.prototype.isPending=function(){return 0==(50397184&this._bitField)},u=e.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},t.prototype.isPending=function(){return a.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return u.call(this._target())},t.prototype.value=function(){return r.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),n.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,r){"use strict";e.exports=function(e,r){function n(t,n){if(l(t)){if(t instanceof e)return t;var i=o(t);if(i===c){n&&n._pushContext();var s=e.reject(i.e);return n&&n._popContext(),s}if("function"==typeof i){if(a(t)){var s=new e(r);return t._then(s._fulfill,s._reject,void 0,s,null),s}return u(t,i,n)}}return t}function i(t){return t.then}function o(t){try{return i(t)}catch(t){return c.e=t,c}}function a(t){try{return f.call(t,"_promise0")}catch(t){return!1}}function u(t,n,i){function o(t){u&&(u._resolveCallback(t),u=null)}function a(t){u&&(u._rejectCallback(t,f,!0),u=null)}var u=new e(r),l=u;i&&i._pushContext(),u._captureStackTrace(),i&&i._popContext();var f=!0,d=s.tryCatch(n).call(t,o,a);return f=!1,u&&d===c&&(u._rejectCallback(d.e,!0,!0),u=null),l}var s=t("./util"),c=s.errorObj,l=s.isObject,f={}.hasOwnProperty;return n}},{"./util":36}],34:[function(t,e,r){"use strict";e.exports=function(e,r,n){function i(t){this.handle=t}function o(t){return clearTimeout(this.handle),t}function a(t){throw clearTimeout(this.handle),t}var u=t("./util"),s=e.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var c=function(t){return l(+this).thenReturn(t)},l=e.delay=function(t,o){var a,u;return void 0!==o?(a=e.resolve(o)._then(c,null,null,t,void 0),n.cancellation()&&o instanceof e&&a._setOnCancel(o)):(a=new e(r),u=setTimeout(function(){a._fulfill()},+t),n.cancellation()&&a._setOnCancel(new i(u)),a._captureStackTrace()),a._setAsyncGuaranteed(),a};e.prototype.delay=function(t){return l(t,this)};var f=function(t,e,r){var n;n="string"!=typeof e?e instanceof Error?e:new s("operation timed out"):new s(e),u.markAsOriginatingFromRejection(n),t._attachExtraTrace(n),t._reject(n),null!=r&&r.cancel()};e.prototype.timeout=function(t,e){t=+t;var r,u,s=new i(setTimeout(function(){r.isPending()&&f(r,e,u)},t));return n.cancellation()?(u=this.then(),r=u._then(o,a,void 0,s,void 0),r._setOnCancel(s)):r=this._then(o,a,void 0,s,void 0),r}}},{"./util":36}],35:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o,a){function u(t){setTimeout(function(){throw t},0)}function s(t){var e=n(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function c(t,r){function i(){if(a>=c)return l._fulfill();var o=s(t[a++]);if(o instanceof e&&o._isDisposable()){try{o=n(o._getDisposer().tryDispose(r),t.promise)}catch(t){return u(t)}if(o instanceof e)return o._then(i,u,null,null,null)}i()}var a=0,c=t.length,l=new e(o);return i(),l}function l(t,e,r){this._data=t,this._promise=e,this._context=r}function f(t,e,r){this.constructor$(t,e,r)}function d(t){return l.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function p(t){this.length=t,this.promise=null,this[t-1]=null}var h=t("./util"),v=t("./errors").TypeError,y=t("./util").inherits,_=h.errorObj,g=h.tryCatch,m={};l.prototype.data=function(){return this._data},l.prototype.promise=function(){return this._promise},l.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():m},l.prototype.tryDispose=function(t){var e=this.resource(),r=this._context;void 0!==r&&r._pushContext();var n=e!==m?this.doDispose(e,t):null;return void 0!==r&&r._popContext(),this._promise._unsetDisposable(),this._data=null,n},l.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},y(f,l),f.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},p.prototype._resultCancelled=function(){for(var t=this.length,r=0;r<t;++r){var n=this[r];n instanceof e&&n.cancel()}},e.using=function(){var t=arguments.length;if(t<2)return r("you must pass at least 2 arguments to Promise.using");var i=arguments[t-1];if("function"!=typeof i)return r("expecting a function but got "+h.classString(i));var o,u=!0;2===t&&Array.isArray(arguments[0])?(o=arguments[0],t=o.length,u=!1):(o=arguments,t--);for(var s=new p(t),f=0;f<t;++f){var v=o[f];if(l.isDisposer(v)){var y=v;v=v.promise(),v._setDisposable(y)}else{var m=n(v);m instanceof e&&(v=m._then(d,null,null,{resources:s,index:f},void 0))}s[f]=v}for(var b=new Array(s.length),f=0;f<b.length;++f)b[f]=e.resolve(s[f]).reflect();var w=e.all(b).then(function(t){for(var e=0;e<t.length;++e){var r=t[e];if(r.isRejected())return _.e=r.error(),_;if(!r.isFulfilled())return void w.cancel();t[e]=r.value()}k._pushContext(),i=g(i);var n=u?i.apply(void 0,t):i(t),o=k._popContext();return a.checkForgottenReturns(n,o,"Promise.using",k),n}),k=w.lastly(function(){var t=new e.PromiseInspection(w);return c(s,t)});return s.promise=k,k._setOnCancel(s),k},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new f(t,this,i());throw new v}}},{"./errors":12,"./util":36}],36:[function(t,n,i){"use strict";function o(){try{var t=T;return T=null,t.apply(this,arguments)}catch(t){return x.e=t,x}}function a(t){return T=t,o}function u(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function s(t){return"function"==typeof t||"object"==typeof t&&null!==t}function c(t){return u(t)?new Error(g(t)):t}function l(t,e){var r,n=t.length,i=new Array(n+1);for(r=0;r<n;++r)i[r]=t[r];return i[r]=e,i}function f(t,e,r){if(!A.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var n=Object.getOwnPropertyDescriptor(t,e);return null!=n?null==n.get&&null==n.set?n.value:r:void 0}function d(t,e,r){if(u(t))return t;var n={value:r,configurable:!0,enumerable:!1,writable:!0};return A.defineProperty(t,e,n),t}function p(t){throw t}function h(t){try{if("function"==typeof t){var e=A.names(t.prototype),r=A.isES5&&e.length>1,n=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=R.test(t+"")&&A.names(t).length>0;if(r||n||i)return!0}return!1}catch(t){return!1}}function v(t){function e(){}e.prototype=t;for(var r=8;r--;)new e;return t}function y(t){return D.test(t)}function _(t,e,r){for(var n=new Array(t),i=0;i<t;++i)n[i]=e+i+r;return n}function g(t){try{return t+""}catch(t){return"[no string representation]"}}function m(t){return null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function b(t){try{d(t,"isOperational",!0)}catch(t){}}function w(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function k(t){return m(t)&&A.propertyIsWritable(t,"stack")}function j(t){return{}.toString.call(t)}function O(t,e,r){for(var n=A.names(t),i=0;i<n.length;++i){var o=n[i];if(r(o))try{A.defineProperty(e,o,A.getDescriptor(t,o))}catch(t){}}}function C(t){return U?Object({NODE_ENV:"production"})[t]:void 0}function P(){if("function"==typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(t){}}function E(t,e){return t.bind(e)}var A=t("./es5"),S="undefined"==typeof navigator,x={e:{}},T,F="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r?r:void 0!==this?this:null,M=function(t,e){function r(){this.constructor=t,this.constructor$=e;for(var r in e.prototype)n.call(e.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=e.prototype[r])}var n={}.hasOwnProperty;return r.prototype=e.prototype,t.prototype=new r,t.prototype},I=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var r=0;r<t.length;++r)if(t[r]===e)return!0;return!1};if(A.isES5){var r=Object.getOwnPropertyNames;return function(t){for(var n=[],i=Object.create(null);null!=t&&!e(t);){var o;try{o=r(t)}catch(t){return n}for(var a=0;a<o.length;++a){var u=o[a];if(!i[u]){i[u]=!0;var s=Object.getOwnPropertyDescriptor(t,u);null!=s&&null==s.get&&null==s.set&&n.push(u)}}t=A.getPrototypeOf(t)}return n}}var n={}.hasOwnProperty;return function(r){if(e(r))return[];var i=[];t:for(var o in r)if(n.call(r,o))i.push(o);else{for(var a=0;a<t.length;++a)if(n.call(t[a],o))continue t;i.push(o)}return i}}(),R=/this\s*\.\s*\S+\s*=/,D=/^[a-z$_][a-z$_0-9]*$/i,N=function(){return"stack"in new Error?function(t){return k(t)?t:new Error(g(t))}:function(t){if(k(t))return t;try{throw new Error(g(t))}catch(t){return t}}}(),z=function(t){return A.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var B="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,r=[],n=t[Symbol.iterator]();!(e=n.next()).done;)r.push(e.value);return r};z=function(t){return A.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?B(t):null}}var L=void 0!==e&&"[object process]"===j(e).toLowerCase(),U=void 0!==e&&!0,W={isClass:h,isIdentifier:y,inheritedDataKeys:I,getDataPropertyOrDefault:f,thrower:p,isArray:A.isArray,asArray:z,notEnumerableProp:d,isPrimitive:u,isObject:s,isError:m,canEvaluate:S,errorObj:x,tryCatch:a,inherits:M,withAppended:l,maybeWrapAsError:c,toFastProperties:v,filledRange:_,toString:g,canAttachTrace:k,ensureErrorObject:N,originatesFromRejection:w,markAsOriginatingFromRejection:b,classString:j,copyDescriptors:O,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:L,hasEnvVariables:U,env:C,global:F,getNativePromise:P,domainBind:E};W.isRecentNode=W.isNode&&function(){var t=e.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),W.isNode&&W.toFastProperties(e);try{throw new Error}catch(t){W.lastLineError=t}n.exports=W},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(e,r(58),r(45),r(217).setImmediate)},function(t,e,r){function n(t,e){this._id=t,this._clearFn=e}var i=Function.prototype.apply;e.setTimeout=function(){return new n(i.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new n(i.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},r(218),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e,r){(function(t,e){!function(t,r){"use strict";function n(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var n={callback:t,args:e};return c[s]=n,u(s),s++}function i(t){delete c[t]}function o(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(r,n)}}function a(t){if(l)setTimeout(a,0,t);else{var e=c[t];if(e){l=!0;try{o(e)}finally{i(t),l=!1}}}}if(!t.setImmediate){var u,s=1,c={},l=!1,f=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?function(){u=function(t){e.nextTick(function(){a(t)})}}():function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?function(){var e="setImmediate$"+Math.random()+"$",r=function(r){r.source===t&&"string"==typeof r.data&&0===r.data.indexOf(e)&&a(+r.data.slice(e.length))};t.addEventListener?t.addEventListener("message",r,!1):t.attachEvent("onmessage",r),u=function(r){t.postMessage(e+r,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){a(t.data)},u=function(e){t.port2.postMessage(e)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var t=f.documentElement;u=function(e){var r=f.createElement("script");r.onreadystatechange=function(){a(e),r.onreadystatechange=null,t.removeChild(r),r=null},t.appendChild(r)}}():function(){u=function(t){setTimeout(a,0,t)}}(),d.setImmediate=n,d.clearImmediate=i}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,r(45),r(58))},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();!function(){scrivito.PublicPromise=function(){function t(e){n(this,t),this._internalPromise=e}return i(t,null,[{key:"all",value:function(t){return new scrivito.PublicPromise(scrivito.Promise.all(t))}},{key:"race",value:function(t){return new scrivito.PublicPromise(scrivito.Promise.race(t))}},{key:"resolve",value:function(t){return new scrivito.PublicPromise(scrivito.Promise.resolve(t))}},{key:"reject",value:function(t){return new scrivito.PublicPromise(scrivito.Promise.reject(t))}}]),i(t,[{key:"then",value:function(t,e){return new scrivito.PublicPromise(this._internalPromise.then(t,e))}},{key:"catch",value:function(t){return new scrivito.PublicPromise(this._internalPromise.catch(t))}}]),t}()}()},function(t,e,r){"use strict";var n=r(0),i=function(t){return t&&t.__esModule?t:{default:t}}(n);!function(){function t(t,e,n){return r?t:i.default.throttle(t,e,n)}function e(){r=!0}var r=!1;scrivito.throttle=t,scrivito.bypassThrottle=e}()},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=function(){function t(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=r(40),a=n(o),u=r(0),s=n(u),c=r(1);!function(){scrivito.typeInfo={normalize:function(t){if(s.default.isString(t))return[t];if(s.default.isArray(t))return t;throw new c.InternalError("Type Info needs to be a string or an array containing a string and optionally a hash")},normalizeAttrs:function(t){var e=this;return s.default.mapObject(t,function(t,r){var n=i(t,2),o=n[0],u=n[1];return a.default.isSystemAttribute(r)?[o]:[o,e.normalize(u)]})},unwrapAttributes:function(t){return s.default.mapObject(t,function(t){return i(t,1)[0]})}}}()},function(t,e,r){"use strict";function n(t,e){if(!p){var r=(0,s.getComponentForId)(t);if(!r)throw new u.ArgumentError('Component with ID "'+t+'" not found. Please make sure you registered it using "Scrivito.registerComponent".');var n=void 0,i=void 0;e.widgetId?i=(0,c.getWindowContext)().Obj.get(e.objId).widget(e.widgetId):n=(0,c.getWindowContext)().Obj.get(e.objId),p=!0;var o=a((0,l.getDocument)(),r,{obj:n,widget:i});(0,d.default)(o,function(){return scrivito.uiAdapter.notifyDocumentResize()}),scrivito.uiAdapter.notifyDocumentResize()}}function i(){return p}function o(){p=!1}function a(t,e,r){var n=t.createElement("div");return t.body.innerHTML="",t.body.appendChild(n),ReactDOM.render(React.createElement(e,r),n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.reset=e.isComponentMounted=e.mountComponent=void 0;var u=r(1),s=r(74),c=r(52),l=r(56),f=r(290),d=function(t){return t&&t.__esModule?t:{default:t}}(f),p=!1;e.mountComponent=n,e.isComponentMounted=i,e.reset=o},function(t,e,r){"use strict";function n(t){d(t);var e=t.endpoint,r=t.homepage,n=t.routingBasePath,i=t.tenant;scrivito.CmsRestApi.init(e||"api.scrivito.com",i),scrivito.RoutingPath.init(r||function(){return u.default.root()}),scrivito.Routing.init({routingBasePath:n}),l=!0}function i(){return l}function o(){l=!1}Object.defineProperty(e,"__esModule",{value:!0}),e.resetIsConfigured=e.isConfigured=e.configure=void 0;var a=r(3),u=function(t){return t&&t.__esModule?t:{default:t}}(a),s=r(30),c=r(39),l=!1,f=s.tcomb.struct({tenant:s.tcomb.String,endpoint:s.tcomb.maybe(s.tcomb.String),homepage:s.tcomb.maybe(s.tcomb.Function),routingBasePath:s.tcomb.maybe(s.tcomb.String)}),d=(0,c.checkArgumentsFor)("configure",[["options",f]],{docPermalink:"js-sdk/configure"});e.configure=n,e.isConfigured=i,e.resetIsConfigured=o},function(t,e,r){"use strict";function n(t,e){f(t,e);var r=e||{},n=r.query,a=r.fragment,u=(0,i.unwrapAppClassValue)(t),s=n?"?"+n:"",c=a?"#"+a:"";return(0,o.basicUrlFor)(u).concat(s).concat(c)}Object.defineProperty(e,"__esModule",{value:!0}),e.urlFor=n;var i=r(27),o=r(123),a=r(30),u=r(39),s=r(67),c=a.tcomb.union([s.ObjType,s.LinkType,s.BinaryType]),l=a.tcomb.struct({query:a.tcomb.maybe(a.tcomb.String),fragment:a.tcomb.maybe(a.tcomb.String)}),f=(0,u.checkArgumentsFor)("urlFor",[["target",c],["options",a.tcomb.maybe(l)]],{docPermalink:"js-sdk/urlFor"})},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(27),a=function(){function t(e,r){n(this,t),this._registry=e,this._basicObjFacetValue=r}return i(t,[{key:"name",value:function(){return this._basicObjFacetValue.name()}},{key:"count",value:function(){return this._basicObjFacetValue.count()}},{key:"includedObjs",value:function(){var t=this._basicObjFacetValue.includedObjs();return(0,o.wrapInAppClass)(this._registry,t)}}]),t}();e.default=a},function(t,e,r){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function i(){return++f}function o(t){var e=i();d[e]=t;var r=u(),o=r.get()||[];r.set([].concat(n(o),[e]))}function a(t){var e=u().get();if(e){var r=(0,c.find)(e,function(e){return d[e]&&d[e].canEdit(t)});if(r){return{id:r,editorClass:d[r]}}}}function u(){return l.appState.subState("editors")}function s(){f=0,d={},u().clear()}Object.defineProperty(e,"__esModule",{value:!0}),e.registerEditor=e.editorRegistrationFor=e.clearEditorRegistry=void 0;var c=r(0),l=r(5),f=0,d={};e.clearEditorRegistry=s,e.editorRegistrationFor=a,e.registerEditor=o},function(t,e,r){"use strict";function n(t){return"function"==typeof t&&t.prototype&&t.prototype.isReactComponent}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=r(37),c=n(s),l=r(17),f=n(l),d=r(0),p=r(27),h=r(84),v=n(h),y=r(6),_=n(y),g=r(229),m=n(g),b=r(123),w=function(t){function e(t){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r._onClick=r._onClick.bind(r),r}return a(e,t),u(e,[{key:"render",value:function(){return f.default.createElement("a",this._linkProps(),this.props.children)}},{key:"_linkProps",value:function(){var t=(0,d.omit)(this.props,"to");return t.href=this._href(),t.onClick=this._onClick,t.target=this._target(),t}},{key:"_href",value:function(){return this.props.to?(0,b.basicUrlFor)((0,p.unwrapAppClassValue)(this.props.to)):"#"}},{key:"_onClick",value:function(t){if(!(0,m.default)(t)&&(t.preventDefault(),this.props.to)){var e=this._target();e?scrivito.openLocation(this._href(),e):(0,v.default)(this.props.to)}}},{key:"_target",value:function(){return this.props.target?this.props.target:this.props.to&&this.props.to._scrivitoPrivateContent instanceof c.default?this.props.to.target():void 0}}]),e}(f.default.Component);w.displayName="Scrivito.LinkTag",e.default=(0,_.default)(w)},function(t,e,r){"use strict";function n(t){return t.ctrlKey||t.metaKey||t.shiftKey||t.which===i}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var i=2},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=r(75),c=n(s),l=r(41),f=n(l),d=r(0),p=r(17),h=n(p),v=r(1),y=r(27),_=r(231),g=n(_),m=r(6),b=n(m),w=r(226),k=r(232),j=n(k),O=r(314),C=n(O),P=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),u(e,[{key:"render",value:function(){if(!this.props.content)return null;var t=f.default.basicFieldFor(this.props.content,this.props.attribute);if(!t){var e=this.props.attribute;throw new v.ArgumentError('Component "Scrivito.ContentTag" received prop "attribute" with invalid value: Attribute "'+e+'" is not defined for content specified in prop "content".')}var r=void 0,n=void 0,i=(0,w.editorRegistrationFor)({type:t.type(),tag:this.props.tag});return i&&(r=i.id,n=i.editorClass),(0,c.default)()?h.default.createElement(C.default,{key:this._editorKey(r),field:t,editorClass:n,tag:this.props.tag,customProps:this._customProps(),content:this.props.content},this.props.children):h.default.createElement(j.default,{field:t,tag:this.props.tag,customProps:this._customProps()},this.props.children)}},{key:"_customProps",value:function(){return(0,d.omit)(this.props,"content","attribute","tag")}},{key:"_editorKey",value:function(t){var e=(0,y.unwrapAppClassValue)(this.props.content);return[this.props.tag,(0,g.default)(e),this.props.attribute,t].join("|")}}]),e}(h.default.Component);P.displayName="Scrivito.ContentTag",P.defaultProps={tag:"div"},e.default=(0,b.default)(P)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t instanceof a.default)return t.id();if(t instanceof s.default)return t.obj().id()+"|"+t.id();var e=(0,f.default)(t).substr(0,100);throw new c.InternalError('keyForBasicContent called with "'+e+'". Expected an instance of BasicObj or BasicWidget.')}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=r(3),a=n(o),u=r(32),s=n(u),c=r(1),l=r(31),f=n(l)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=r(75),c=n(s),l=r(122),f=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(l),d=r(0),p=r(17),h=n(p),v=r(84),y=n(v),_=r(6),g=n(_),m=r(229),b=n(m),w=r(311),k=n(w),j=r(313),O=n(j),C=function(t){function e(t){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r._onClick=r._onClick.bind(r),r}return a(e,t),u(e,[{key:"render",value:function(){switch(this.props.field.type()){case"html":return this._renderHtml();case"string":return this._renderString();case"widgetlist":return this._renderWidgetlist();default:return this._renderContent({children:this.props.children})}}},{key:"_renderHtml",value:function(){if(this.props.children)return this._renderContent({children:this.props.children});var t=f.transformHTML(this._attributeValue()),e={dangerouslySetInnerHTML:{__html:t},onClick:this._onClick};return this._renderContent({props:e})}},{key:"_onClick",value:function(t){if(!(0,b.default)(t)){var e=f.findTarget(t.target,t.currentTarget);e&&(t.preventDefault(),t.stopPropagation(),(0,y.default)(e))}}},{key:"_renderString",value:function(){return this._renderContent({children:this.props.children||this._attributeValue()})}},{key:"_renderWidgetlist",value:function(){var t=void 0,e=this._attributeValue();return e.length?t=e.map(function(t){return h.default.createElement(k.default,{key:t.id(),widget:t})}):(0,c.default)()&&(t=h.default.createElement(O.default,{field:this.props.field})),this._renderContent({children:t})}},{key:"_renderContent",value:function(t){var e=t.props,r=t.children,n=(0,d.extend)({},this.props.customProps,e,this._editingProps());return h.default.createElement(this.props.tag,n,r)}},{key:"_editingProps",value:function(){return this.props.onClick?{onClick:this.props.onClick}:{}}},{key:"_attributeValue",value:function(){return this.props.field.get()}}]),e}(h.default.Component);C.displayName="Scrivito.ContentTag.AttributeValue",e.default=(0,g.default)(C)},function(t,e){t.exports=PropTypes},function(t,e,r){"use strict";function n(t){t.dataTransfer.effectAllowed="move";try{t.dataTransfer.setData("text/plain",t.target.id)}catch(t){}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=r(17),c=n(s),l=r(6),f=n(l),d=function(t){function e(t){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r._onClick=r._onClick.bind(r),r}return a(e,t),u(e,[{key:"render",value:function(){var t="scrivito_option_marker scrivito_"+this.props.position;return this.props.isAlwaysShown&&(t+=" scrivito_visible"),c.default.createElement("span",{className:t,onClick:this._onClick},c.default.createElement("i",{className:"scrivito_icon scrivito_icon_marker_plus"}))}},{key:"_onClick",value:function(t){t.preventDefault(),t.stopPropagation(),this.props.insertWidget(this.props.widget,this.props.position)}}]),e}(c.default.Component);d.displayName="Scrivito.OptionMarker",e.default=(0,f.default)(d)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="0.1.0-beta"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){t&&(t.setAppAdapter(u.default,scrivito.AppAdapter),scrivito.uiAdapter=t.uiAdapter()),scrivito.client.init({ui:t}),l.default.init(window.Scrivito),document.addEventListener("DOMContentLoaded",function(){return scrivito.BrowserLocation.init()})}function o(){(0,s.loadCss)("/scrivito/scrivito_editing.css"),(0,s.loadJs)("/scrivito/scrivito_editing.js")}Object.defineProperty(e,"__esModule",{value:!0}),e.initializeSdk=i,e.loadEditing=o,r(158),r(285),r(286),r(299),r(302);var a=r(236),u=n(a),s=r(117),c=r(325),l=n(c);window.scrivito||(window.scrivito={})},function(t,e,r){"use strict";r(116),r(27)},function(t,e,r){"use strict";r(287),r(288),r(295),r(296),r(297),r(298),r(224)},function(t,e,r){"use strict";window.scrivito||(window.scrivito={}),window.scrivito.AppSupport={}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=function(){function t(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=r(41),a=n(o),u=r(0),s=r(84),c=n(s),l=r(121),f=r(52),d=r(222),p=r(292),h=n(p),v=r(56),y=r(122),_=r(124),g=r(125),m=n(g),b=r(294);!function(){function t(t,i,o){var s=a.default.forClass(o),c={name:i,type:t,attributes:e(s,(0,u.keys)(s.attributes)),validContainerClasses:s.validContainerClasses};return r(c,i),n(c,i),c}function e(t,e){return e.map(function(e){var r=t.attributeDefinition(e),n=i(r,2),o=n[0],a=n[1],u={name:e,type:o};return a&&(a.only&&(u.only=a.only),a.values&&(u.values=a.values)),u})}function r(t,e){g.forEach(function(r){var n=(0,l.getEditingConfigFor)(e,r);n&&(t[r]=n)})}function n(t,e){var r=(0,l.getEditingConfigFor)(e,"attributes");r&&Object.keys(r).forEach(function(e){var n=(0,u.findWhere)(t.attributes,{name:e});if(n){var i=r[e],o=i.title,a=i.description,s=i.values,c={title:o,description:a};s&&(c.valuesLocalization=s),(0,u.extend)(n,c)}})}function o(t,e){return s(t,(0,f.getWindowContext)().Obj.getIncludingDeleted(e))}function s(t,e){var r=(0,l.getEditingConfigFor)(e.objClass(),t);if(r)return r(e)}function p(t){var e={obj_id:t.obj.id()};return t.url.fragment()&&(e.fragment=t.url.fragment()),t.url.search()&&(e.query=t.url.search()),e}var g=["title","description","thumbnail"],w={contentBrowserConfiguration:function(){return(0,m.default)((0,_.getContentBrowserConfiguration)())},titleForClass:function(t){return(0,l.getEditingConfigFor)(t,"title")},propertiesGroupsForClass:function(t){return(0,l.getEditingConfigFor)(t,"propertiesGroups")},generalPropertiesForClass:function(t){return(0,l.getEditingConfigFor)(t,"properties")},titleForObj:function(t){return o("titleForContent",t)},descriptionForObj:function(t){return o("descriptionForContent",t)},titleForWidget:function(t,e){return s("titleForContent",(0,f.getWindowContext)().Obj.getIncludingDeleted(t).widget(e))},thumbnailForObj:function(t){return o("thumbnailForContent",t)},initializeContentForObj:b.initializeContentForObj,initializeContentForWidget:b.initializeContentForWidget,getClasses:function(){var e=(0,f.getWindowContext)(),r=[];return(0,u.each)(e.allObjClasses(),function(e,n){return r.push(t("Obj",n,e))}),(0,u.each)(e.allWidgetClasses(),function(e,n){return r.push(t("Widget",n,e))}),r},navigateTo:function(t){(0,c.default)(function(){return(0,f.getWindowContext)().Obj.get(t)})},mountComponent:d.mountComponent,resolveUrl:function(t){return(0,h.default)(t).then(function(t){return t&&t.obj?p(t):null})},getDocumentHeight:function(){return(0,v.getDocument)().querySelector("html").getBoundingClientRect().height},transformHTML:function(t){return(0,y.transformHTML)(t)}};scrivito.AppAdapter=w}()},function(t,e,r){"use strict";function n(){window.scrollTo(0,0)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e,r){"use strict";function n(t,e){if(!t._scrivitoResizeListeners){t._scrivitoResizeListeners=[],t.style.position="relative";var r=i();r.resizeElement=t,t._scrivitoResizeTrigger=r,(0,s.default)()&&t.appendChild(r),r.data="about:blank",(0,s.default)()||t.appendChild(r)}t._scrivitoResizeListeners.push(e)}function i(){var t=document.createElement("object");return t.type="text/html",t.onload=o,t.style.display="block",t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.height="100%",t.style.width="100%",t.style.overflow="hidden",t.style.pointerEvents="none",t.style.zIndex=-1,t}function o(){this.contentDocument.defaultView._scrivitoResizeTrigger=this.resizeElement,this.contentDocument.defaultView.addEventListener("resize",a)}function a(t){var e=t.target||t.srcElement,r=e._scrivitoResizeTrigger;r._scrivitoResizeListeners.forEach(function(e){return e(r,t)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var u=r(291),s=function(t){return t&&t.__esModule?t:{default:t}}(u)},function(t,e,r){"use strict";function n(){var t=window.navigator.userAgent;return t.indexOf("MSIE")>=0||t.indexOf("Trident")>=0}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=(0,a.default)(t);return(0,l.isConfigured)()?(0,c.default)(function(){return scrivito.Routing.recognize(t)}).then(function(t){return t.path?(0,u.include)(["/",""],t.path)?null:{obj:t.obj,url:e}:null}):scrivito.Promise.resolve(null)}Object.defineProperty(e,"__esModule",{value:!0});var o=r(53),a=n(o),u=r(0),s=r(19),c=n(s),l=r(223);e.default=i},function(t,e,r){"use strict";function n(t){var e=o.default.get(t);return e?(0,a.basicUrlFor)(e):scrivito.Routing.generateUrl({path:t})}Object.defineProperty(e,"__esModule",{value:!0});var i=r(3),o=function(t){return t&&t.__esModule?t:{default:t}}(i),a=r(123);e.default=n},function(t,e,r){"use strict";function n(t,e){var r=c.getEditingConfigFor(t,"initialContent");if(r){var n=r[e];return u.isFunction(n)?n():n}}function i(t){a(s.default.get(t))}function o(t,e){a(s.default.get(t).widget(e))}function a(t){var e=t.objClass(),r=l.getWindowContext().getClass(e)._scrivitoPrivateSchema,i={};u.each(r.definition.attributes,function(r,o){var a=t.get(o,r);if(u.isEmpty(a)){var s=n(e,o);s&&(i[o]=s)}});var o=f.prepareAttributes(i,r,e);t.update(o)}Object.defineProperty(e,"__esModule",{value:!0});var u=r(0),s=r(3),c=r(121),l=r(52),f=r(85);e.initialContentFor=n,e.initializeContentForObj=i,e.initializeContentForWidget=o},function(t,e,r){"use strict";var n=r(3),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=r(0),a=r(59),u=r(56),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(u);!function(){function t(t){var e=t.obj,r=t.queryParameters,n=t.hash,i={scrivitoObjId:e.id(),scrivitoQueryParameters:r,scrivitoHash:n},a=scrivito.Routing.generate({obj:e,queryParameters:r,hash:n}),u=s.history();u.state&&u.state.scrivitoObjId===e.id()&&(0,o.isEqual)(u.state.scrivitoQueryParameters,r)&&u.state.scrivitoHash===n||u.pushState(i,"",a)}function e(t){var e=t.obj,r=t.queryParameters,n=t.hash,i={scrivitoObjId:e.id(),scrivitoQueryParameters:r,scrivitoHash:n},o=scrivito.Routing.generate({obj:e,queryParameters:r,hash:n});s.history().replaceState(i,"",o)}function r(){s.setOnpopstate(c)}function n(){var t=s.location().toString();(0,a.replaceCurrentPage)(function(){var e=scrivito.Routing.recognize(t),r=e.obj,n=e.queryParameters,i=e.hash;return r?{obj:r,queryParameters:n,hash:i}:{queryParameters:n,hash:i}})}function u(){n(),r()}function c(t){var e=void 0,r=void 0,o=void 0;t.state&&(e=t.state.scrivitoObjId,r=t.state.scrivitoHash,o=t.state.scrivitoQueryParameters),e?(0,a.replaceCurrentPage)(function(){return{obj:i.default.get(e),queryParameters:o,hash:r}}):n()}scrivito.BrowserLocation={},scrivito.BrowserLocation.init=u,scrivito.BrowserLocation.pushWith=t,scrivito.BrowserLocation.replaceWith=e}()},function(t,e,r){"use strict";!function(){function t(t){scrivito.uiAdapter?scrivito.uiAdapter.navigateToExternalUrl(t):scrivito.setWindowLocation(t)}function e(t){window.location=t}function r(t,e){window.open(t,e)}scrivito.setWindowLocation=e,scrivito.changeLocation=t,scrivito.openLocation=r}()},function(t,e,r){"use strict";var n=r(53),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=r(1),a=r(56),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(a);!function(){function t(t){var e=t.routingBasePath;v=!0,h=e||""}function e(){v=!1,h=void 0}function r(t){if(!v)throw scrivito.logError("Error from Scrivito SDK: No application configured, cannot initialize routing."),new o.InternalError(t+" can't be called before init.")}function n(t){var e=t.obj,n=t.queryParameters,i=t.hash;return r("generate"),a({path:scrivito.RoutingPath.generate(e),queryParameters:n,hash:i})}function a(t){var e=t.path,n=t.queryParameters,o=t.hash;r("generateUrl");var a=(0,i.default)(u.location()).origin(),s=("/"+h+"/"+e).replace(/\/+/g,"/"),c=(0,i.default)(a).pathname(s);return n&&c.query(n),o&&c.hash(o),c.toString()}function s(t){r("recognize");var e=null,n=c(t);return(n||""===n)&&(e=l(n)),{path:n,obj:e,queryParameters:p(t),hash:d(t)}}function c(t){var e=(0,i.default)(u.location()).origin(),r=(0,i.default)(t);if(!r.is("absolute")||r.origin()===e)return f(t)}function l(t){return null!==t?scrivito.RoutingPath.recognize(t):null}function f(t){var e=(0,i.default)(t).path();return e.substring(0,h.length)!==h?null:e.substring(h.length)}function d(t){var e=(0,i.default)(t).hash();return""===e?null:e}function p(t){return(0,i.default)(t).query(!0)}var h=void 0,v=!1;scrivito.Routing={},scrivito.Routing.init=t,scrivito.Routing.reset=e,scrivito.Routing.generate=n,scrivito.Routing.recognize=s,scrivito.Routing.generateUrl=a,scrivito.Routing.recognizePath=c}()},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=r(3),o=n(i),a=r(0),u=n(a),s=r(27),c=r(126),l=r(1);!function(){function t(t,e){return t.substring(0,e.length)===e?t.substring(e.length):t}function e(t){if(!f)return!1;var e=scrivito.loadableWithDefault(null,f);return!!e&&e.id()===t.id()}function r(t){if(!(t instanceof o.default))throw new l.ArgumentError("Parameter obj needs to be a BasicObj.")}function n(t){if(!u.default.isString(t))throw new l.ArgumentError("Parameter path needs to be a String.")}function i(t){var e=(0,c.getWindowRegistry)();return(0,s.wrapInAppClass)(e,t).slug()}function a(t){var e=u.default.last(t.split("-"));return u.default.last(e.split("/"))}var f=void 0,d={init:function(t){f=t},generate:function(t){if(r(t),e(t))return"/";if(t.permalink())return"/"+t.permalink();var n=i(t);return n?"/"+n+"-"+t.id():"/"+t.id()},recognize:function(e){if(n(e),u.default.include(["/",""],e))return(0,s.unwrapAppClassValue)(f());var r=t(e,"/"),i=o.default.getByPermalink(r);return i||o.default.get(a(r))},get homepageCallback(){return f},resetHomepageCallback:function(){f=void 0}};scrivito.RoutingPath=d}()},function(t,e,r){"use strict";r(300),r(301)},function(t,e,r){"use strict";window.scrivito||(window.scrivito={})},function(t,e,r){"use strict";!function(){var t=void 0,e=0,r={},n={subscribe:function(t){var n=t.onFocus,i=t.onBlur,o=e;return r[o]={onFocus:n,onBlur:i},e+=1,o},unsubscribe:function(t){delete r[t]},notifyFocus:function(e){t=e,r[t].onFocus()},notifyBlur:function(e){e===t&&r[e].onBlur()},get handlers(){return r},reset:function(){t=void 0,e=0,r={}}};scrivito.WidgetFocus=n}()},function(t,e,r){"use strict";var n=r(303),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(n);window.Scrivito=i},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(29);Object.defineProperty(e,"Binary",{enumerable:!0,get:function(){return n(i).default}});var o=r(51);Object.defineProperty(e,"FutureBinary",{enumerable:!0,get:function(){return n(o).default}});var a=r(225);Object.defineProperty(e,"ObjFacetValue",{enumerable:!0,get:function(){return n(a).default}});var u=r(19);Object.defineProperty(e,"load",{enumerable:!0,get:function(){return n(u).default}});var s=r(1);Object.defineProperty(e,"ArgumentError",{enumerable:!0,get:function(){return s.ArgumentError}}),Object.defineProperty(e,"ResourceNotFoundError",{enumerable:!0,get:function(){return s.ResourceNotFoundError}}),Object.defineProperty(e,"ScrivitoError",{enumerable:!0,get:function(){return s.ScrivitoError}}),Object.defineProperty(e,"TransformationSourceInvalidError",{enumerable:!0,get:function(){return s.TransformationSourceInvalidError}}),Object.defineProperty(e,"TransformationSourceTooLargeError",{enumerable:!0,get:function(){return s.TransformationSourceTooLargeError}});var c=r(223);Object.defineProperty(e,"configure",{enumerable:!0,get:function(){return c.configure}});var l=r(124);Object.defineProperty(e,"configureContentBrowser",{enumerable:!0,get:function(){return n(l).default}});var f=r(59);Object.defineProperty(e,"currentPage",{enumerable:!0,get:function(){return f.currentPage}}),Object.defineProperty(e,"currentPageParams",{enumerable:!0,get:function(){return f.currentPageParams}});var d=r(304);Object.defineProperty(e,"isInPlaceEditingActive",{enumerable:!0,get:function(){return n(d).default}});var p=r(84);Object.defineProperty(e,"navigateTo",{enumerable:!0,get:function(){return n(p).default}});var h=r(305);Object.defineProperty(e,"openContentBrowser",{enumerable:!0,get:function(){return n(h).default}});var v=r(121);Object.defineProperty(e,"provideEditingConfig",{enumerable:!0,get:function(){return v.provideEditingConfig}});var y=r(226);Object.defineProperty(e,"registerEditor",{enumerable:!0,get:function(){return y.registerEditor}});var _=r(224);Object.defineProperty(e,"urlFor",{enumerable:!0,get:function(){return _.urlFor}});var g=r(306);Object.defineProperty(e,"BackgroundImageTag",{enumerable:!0,get:function(){return n(g).default}});var m=r(308);Object.defineProperty(e,"ChildListTag",{enumerable:!0,get:function(){return n(m).default}});var b=r(230);Object.defineProperty(e,"ContentTag",{enumerable:!0,get:function(){return n(b).default}});var w=r(318);Object.defineProperty(e,"CurrentPage",{enumerable:!0,get:function(){return n(w).default}});var k=r(319);Object.defineProperty(e,"ImageTag",{enumerable:!0,get:function(){return n(k).default}});var j=r(321);Object.defineProperty(e,"InternalErrorPage",{enumerable:!0,get:function(){return n(j).default}});var O=r(228);Object.defineProperty(e,"LinkTag",{enumerable:!0,get:function(){return n(O).default}});var C=r(322);Object.defineProperty(e,"NotFoundErrorPage",{enumerable:!0,get:function(){return n(C).default}});var P=r(128);Object.defineProperty(e,"WidgetTag",{enumerable:!0,get:function(){return n(P).default}});var E=r(6);Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return n(E).default}});var A=r(323);Object.defineProperty(e,"provideComponent",{enumerable:!0,get:function(){return n(A).default}});var S=r(324);Object.defineProperty(e,"registerComponent",{enumerable:!0,get:function(){return n(S).default}})},function(t,e,r){"use strict";function n(){return"published"!==scrivito.currentWorkspaceId()&&(!!(0,i.isComponentMounted)()||!!scrivito.uiAdapter&&scrivito.uiAdapter.isEditingMode())}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var i=r(222)},function(t,e,r){"use strict";function n(t){return scrivito.uiAdapter.openContentBrowser((0,a.default)((0,i.extend)({},(0,u.getContentBrowserConfiguration)(),(0,i.pick)(t,"selection","selectionMode"))))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var i=r(0),o=r(125),a=function(t){return t&&t.__esModule?t:{default:t}}(o),u=r(124)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=r(17),l=n(c),f=r(0),d=r(307),p=r(6),h=n(p),v=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){var t=this.props,e=t.style,r=t.tag,n=(0,f.omit)(this.props,"style","tag"),i=(0,d.partitionStyleProperties)(e),o=i.backgrounds,a=i.passThroughStyle,s=o.map(d.backgroundStylesFor).join(","),c={backgroundAttachment:"scroll",backgroundImage:s,backgroundOrigin:"padding-box",backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover"};return l.default.createElement(r,u({},n,{style:(0,f.extend)(c,a)}))}}]),e}(l.default.Component);v.displayName="Scrivito.BackgroundImageTag",v.defaultProps={tag:"div"},e.default=(0,h.default)(v)},function(t,e,r){"use strict";function n(t){var e={backgrounds:[],passThroughStyle:{}};for(var r in t)if(0!==r.indexOf("background"))e.passThroughStyle[r]=t[r];else if("background"===r){var n=t[r];e.backgrounds=a.isArray(n)?n:[n]}return e}function i(t){return o(t)?t.image:t.image instanceof u.default?"url("+t.image.url()+")":t.image?"url("+t.image.get("blob").url()+")":"none"}function o(t){return a.isString(t.image)}Object.defineProperty(e,"__esModule",{value:!0});var a=r(0),u=r(29);e.partitionStyleProperties=n,e.backgroundStylesFor=i},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=r(75),l=n(c),f=r(0),d=r(17),p=n(d),h=r(59),v=r(6),y=n(v),_=r(309),g=n(_),m=r(310),b=n(m),w=function(t){function e(t){o(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.state={hasFocus:!1},r._onMouseOver=r._onMouseOver.bind(r),r._onMouseOut=r._onMouseOut.bind(r),r}return u(e,t),s(e,[{key:"render",value:function(){var t=this,e=this.props.parent||(0,h.currentPage)();if(!e)return null;e=e._scrivitoPrivateContent;var r=(0,f.omit)(this.props,"parent","tag","renderChild"),n=void 0;return(0,l.default)()&&(r.onMouseOver=this._onMouseOver,r.onMouseOut=this._onMouseOut,r["data-scrivito-private-child-list-path"]=!0,this.state.hasFocus&&(r.className="scrivito_active scrivito_entered "+r.className),n=p.default.createElement(b.default,{key:"menuMarker",parent:e})),p.default.createElement(this.props.tag,r,[n].concat(i(e.orderedChildren().map(function(e){return p.default.createElement(g.default,{key:e.id(),child:e,renderChild:t.props.renderChild})}))))}},{key:"_onMouseOver",value:function(t){t.stopPropagation(),this.setState({hasFocus:!0})}},{key:"_onMouseOut",value:function(t){t.stopPropagation(),this.setState({hasFocus:!1})}}]),e}(p.default.Component);w.displayName="Scrivito.ChildListTag",w.defaultProps={tag:"ul"},e.default=(0,y.default)(w)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=t.child,r=t.renderChild,n=(0,u.getWindowContext)().appModelAccessor.wrapInAppClass(e);return r?r(n):a.default.createElement("li",null,a.default.createElement(f.default,{to:n},e.get("title","string")))}Object.defineProperty(e,"__esModule",{value:!0});var o=r(17),a=n(o),u=r(52),s=r(6),c=n(s),l=r(228),f=n(l);i.displayName="Scrivito.ChildListTag.ChildItem",e.default=(0,c.default)(i)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=r(17),c=n(s),l=r(76),f=r(6),d=n(f),p=function(t){function e(t){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r._onClick=r._onClick.bind(r),r}return a(e,t),u(e,[{key:"render",value:function(){var t=this;return c.default.createElement("span",{ref:function(e){return t._menuMarker=e},className:"scrivito_editing_marker",onClick:this._onClick},c.default.createElement("i",{className:"scrivito_icon"}),c.default.createElement("span",{className:"scrivito_editing_marker_title"},this.props.parent.objClass()))}},{key:"_onClick",value:function(t){t.preventDefault(),t.stopPropagation(),this._menuMarker&&scrivito.uiAdapter.showChildListMenu((0,l.findDOMNode)(this._menuMarker),this.props.parent.id())}}]),e}(c.default.Component);p.displayName="Scrivito.ChildListTag.MenuMarker",e.default=(0,d.default)(p)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=r(233),l=n(c),f=r(17),d=n(f),p=r(1),h=r(27),v=r(75),y=n(v),_=r(126),g=r(74),m=r(6),b=n(m),w=r(128),k=n(w),j=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),s(e,[{key:"shouldComponentUpdate",value:function(t){return this.props.widget.equals(t.widget)}},{key:"getChildContext",value:function(){return i({},w.WIDGET_TAG_CONTEXT_KEY,this.props.widget)}},{key:"render",value:function(){var t=(0,h.wrapInAppClass)((0,_.getWindowRegistry)(),this.props.widget);return d.default.createElement(this._getWidgetComponent(),{widget:t})}},{key:"_scrivitoRenderOnError",value:function(){return(0,y.default)()?d.default.createElement(k.default,null,d.default.createElement("div",{className:"content_error"},"Widget could not be rendered due to application error.")):d.default.createElement(k.default,null)}},{key:"_getWidgetComponent",value:function(){var t=this.props.widget.objClass(),e=(0,g.getComponentForAppClass)(t);if(!e)throw new p.ArgumentError('No component registered for widget class "'+t+'"');return e}}]),e}(d.default.Component);j.displayName="Scrivito.ContentTag.WidgetContent",j.childContextTypes=i({},w.WIDGET_TAG_CONTEXT_KEY,l.default.object),e.default=(0,b.default)(j)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=r(17),c=n(s),l=r(76),f=r(129),d=n(f),p=r(234),h=n(p),v=r(6),y=n(v),_=function(t){function e(t){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r._onClick=r._onClick.bind(r),r._onDragStart=r._onDragStart.bind(r),r._onDragEnd=r._onDragEnd.bind(r),r}return a(e,t),u(e,[{key:"render",value:function(){var t=this;return c.default.createElement("span",{ref:function(e){return t._menuMarker=e},className:"scrivito_editing_marker",onClick:this._onClick,onDragStart:this._onDragStart,onDragEnd:this._onDragEnd,draggable:"true"},c.default.createElement("i",{className:"scrivito_icon"}),c.default.createElement("span",{className:"scrivito_editing_marker_title"},this.props.widget.objClass()))}},{key:"_onClick",value:function(t){if(t.preventDefault(),t.stopPropagation(),this._menuMarker){var e=(0,d.default)(this.props.widget),r=e.objId,n=e.widgetId;scrivito.uiAdapter.showWidgetMenu((0,l.findDOMNode)(this._menuMarker),r,n)}}},{key:"_onDragStart",value:function(t){(0,h.default)(t);var e=(0,d.default)(this.props.widget),r=e.objId,n=e.widgetId;scrivito.uiAdapter.onDragStart(r,n),this.props.setDragState(!0)}},{key:"_onDragEnd",value:function(){scrivito.uiAdapter.onDragEnd(),this.props.setDragState(!1)}}]),e}(c.default.Component);_.displayName="Scrivito.ContentTag.MenuMarker",e.default=(0,y.default)(_)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=r(17),c=n(s),l=r(76),f=r(129),d=n(f),p=r(6),h=n(p),v=function(t){function e(t){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r._onClick=r._onClick.bind(r),r}return a(e,t),u(e,[{key:"componentDidMount",value:function(){if(this._widgetPlaceholder){var t=(0,l.findDOMNode)(this._widgetPlaceholder),e=(0,d.default)(this.props.field.container()),r=e.objId,n=e.widgetId,i=this.props.field.name();scrivito.uiAdapter.registerEmptyWidgetlistDropZoneInDom({domNode:t,objId:r,widgetId:n,attributeName:i})}}},{key:"render",value:function(){var t=this;return c.default.createElement("div",{ref:function(e){return t._widgetPlaceholder=e},className:"scrivito_empty_widget_field","data-scrivito-private-dropzone":"true",onClick:this._onClick})}},{key:"_onClick",value:function(t){if(t.preventDefault(),t.stopPropagation(),this._widgetPlaceholder){var e=this.props.field.name(),r=(0,d.default)(this.props.field.container()),n=r.objId,i=r.widgetId;scrivito.uiAdapter.showWidgetlistMenu((0,l.findDOMNode)(this._widgetPlaceholder),{objId:n,widgetId:i,attributeName:e,mousePosition:{x:t.pageX,y:t.pageY}})}}}]),e}(c.default.Component);v.displayName="Scrivito.ContentTag.WidgetlistPlaceholder",e.default=(0,h.default)(v)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=r(17),c=n(s),l=r(76),f=r(0),d=r(232),p=n(d),h=r(315),v=n(h),y=r(317),_=n(y),g=r(6),m=n(g),b=function(t){function e(t){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.state={domMode:"None"},r._onClick=r._onClick.bind(r),r}return a(e,t),u(e,[{key:"componentWillMount",value:function(){var t=this,e=this.props.field,r=e.type(),n=e.typeOptions(),i=this.props.editorClass;if(i){var o=(0,f.extend)({type:r},(0,f.pick)(n,"validClasses","values")),a=new v.default(e,function(e){return t._setDomMode(e)});this._editor=new i({attributeInfo:o,controller:a}),this._editorWillBeActivated()}}},{key:"componentDidMount",value:function(){"Replace"===this.state.domMode&&this._editorDomWasMounted()}},{key:"componentDidUpdate",value:function(t,e){var r=e.domMode,n=this.state.domMode;r!==n&&("Replace"===n?this._editorDomWasMounted():this._editorDomWasUnmounted())}},{key:"componentWillUnmount",value:function(){this._editorWillBeDeactivated()}},{key:"render",value:function(){var t=this;return"Replace"===this.state.domMode?c.default.createElement(this.props.tag,(0,f.extend)((0,f.omit)(this.props.customProps,"children"),{ref:function(e){return t._editorComponent=e}})):c.default.createElement(p.default,{ref:function(e){return t._editorComponent=e},children:this.props.children,customProps:this.props.customProps,field:this.props.field,key:this.state.domMode,tag:this.props.tag,onClick:function(e){return t._onClick(e)}})}},{key:"_onClick",value:function(t){this._editor&&this._editor.onClick&&this._editor.onClick(new _.default(t))}},{key:"_editorWillBeActivated",value:function(){this._editor&&this._editor.editorWillBeActivated&&this._editor.editorWillBeActivated()}},{key:"_editorWillBeDeactivated",value:function(){this._editor&&this._editor.editorWillBeDeactivated&&this._editor.editorWillBeDeactivated()}},{key:"_editorDomWasMounted",value:function(){this._editor&&this._editor.editorDomWasMounted&&this._editorComponent&&this._editor.editorDomWasMounted((0,l.findDOMNode)(this._editorComponent))}},{key:"_editorDomWasUnmounted",value:function(){this._editor&&this._editor.editorDomWasUnmounted&&this._editor.editorDomWasUnmounted()}},{key:"_setDomMode",value:function(t){this.setState({domMode:t})}}]),e}(c.default.Component);b.displayName="Scrivito.ContentTag.Editor",e.default=(0,m.default)(b)},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(316),a=function(t){return t&&t.__esModule?t:{default:t}}(o),u=r(122),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(u),c=function(){function t(e,r){n(this,t),this.setDomMode=r,this._buffer=new a.default({get:function(){return"html"===e.type()?s.transformHTML(e.get()):e.get()},set:function(t){return e.update(t)},flushRate:100})}return i(t,[{key:"content",get:function(){return this._buffer.get()},set:function(t){this._buffer.set(t)}}]),t}();e.default=c},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o={},a=function(){function t(e){var r=e.get,i=e.set,a=e.flushRate;n(this,t),this._getUnderlying=r,this._setUnderlying=i,this._flushRate=a,this._bufferedValue=o}return i(t,[{key:"get",value:function(){var t=this._bufferedValue;return t!==o?t:this._getUnderlying()}},{key:"set",value:function(t){this._bufferedValue=t,this._flushRunning||this._runFlush()}},{key:"_runFlush",value:function(){var t=this;if(this._bufferedValue===o)return void(this._flushRunning=!1);this._setUnderlying(this._bufferedValue),this._bufferedValue=o,setTimeout(function(){return t._runFlush()},this._flushRate),this._flushRunning=!0}}]),t}();e.default=a},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(e){n(this,t),this._internalEvent=e}return i(t,[{key:"preventDefault",value:function(){this._internalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this._internalEvent.stopPropagation()}}]),t}();e.default=o},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(){var t=(0,u.currentPage)(),e=(0,u.currentPageParams)();if(!t)return null;var r=t.objClass(),n=(0,c.getComponentForAppClass)(r);if(!n)throw new s.ArgumentError('No component registered for obj class "'+r+'"');return a.default.createElement(n,{page:t,params:e})}Object.defineProperty(e,"__esModule",{value:!0});var o=r(17),a=n(o),u=r(59),s=r(1),c=r(74),l=r(6),f=n(l);i.displayName="Scrivito.CurrentPage",e.default=(0,f.default)(i)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=r(41),l=n(c),f=r(0),d=r(17),p=n(d),h=r(1),v=r(29),y=n(v),_=r(56),g=r(320),m=n(g),b=r(6),w=n(b),k=r(230),j=n(k),O=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){if(!this.props.content)return null;var t=(0,f.omit)(this.props,"content","attribute");if(this.props.content instanceof y.default)return p.default.createElement("img",u({src:this._urlForBinary(this.props.content)},t));var e=this._getBinary(),r=void 0;return e?r=this._urlForBinary(e):(r=m.default,t["data-scrivito-image-placeholder"]=!0),p.default.createElement(j.default,u({attribute:this.props.attribute,content:this.props.content,tag:"img",src:r},t))}},{key:"_urlForBinary",value:function(t){return this._scaleDownBinary(t).url()}},{key:"_getBinary",value:function(){var t=l.default.forInstance(this.props.content),e=t.attributes[this.props.attribute];if(!e)throw new h.ScrivitoError('Component "Scrivito.ImageTag" received prop "content" with an object missing attribute "'+this.props.attribute+'".');if("binary"===e)return this.props.content.get(this.props.attribute);if("reference"===e)return this._getReferencedBinary();throw new h.ScrivitoError('Component "Scrivito.ImageTag" received prop "content" with an object, whose attribute "'+this.props.attribute+'" is of invalid type "'+e+'". Valid attribute types are "binary" and "reference".')}},{key:"_getReferencedBinary",value:function(){var t=this.props.content.get(this.props.attribute);if(t){var e=t.get("blob");if(e)return e}return null}},{key:"_scaleDownBinary",value:function(t){return t.isRaw()||t.isExplicitlyTransformed()?t:t.transform({width:(0,_.screen)().width*(0,_.devicePixelRatio)()})}}]),e}(p.default.Component);O.displayName="Scrivito.ImageTag",O.defaultProps={attribute:"blob"},e.default=(0,w.default)(O)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="data:image/gif;base64,R0lGODlhyADIAIAAAP///wAAACH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS41LWMwMjEgNzkuMTU0OTExLCAyMDEzLzEwLzI5LTExOjQ3OjE2ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDBEQjBEMDdFODMzMTFFNTg0QzY4MUNBMUVCQUU2MjciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDBEQjBEMDhFODMzMTFFNTg0QzY4MUNBMUVCQUU2MjciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowMERCMEQwNUU4MzMxMUU1ODRDNjgxQ0ExRUJBRTYyNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowMERCMEQwNkU4MzMxMUU1ODRDNjgxQ0ExRUJBRTYyNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAAAALAAAAADIAMgAAAL/hI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8YhMKpfMpvMJjUqn1Kr1is1qt9yu9wsOi8fksvmMTqvX7Lb7DY/L5/S6/Y7P6/f8vv8PGCg4SFhoeIiYqLjI2Oj4CBkpOUlZaXmJmam5ydnp+QkaKjpKWmp6ipqqusra6voKGys7S1tre4ubq7vL2+v7CxwsPExcbHyMnKy8zNzs/AwdLT1NXW19jZ2tvc3d7f0NHi4+Tl5ufo6err7O3u7+Dh8vP09fb3+Pn6+/z9/v/w8woMCBBAsaPIgwocKFDBs6fAgxosSJFCtavIgxo8aNBhw7eixTAAA7"},function(t,e,r){"use strict";function n(t){var e=t.children;return!(0,i.currentPageError)()||(0,i.currentPageError)()instanceof o.CurrentPageNotFoundError?null:e?React.createElement("div",null,e):React.createElement("div",null,React.createElement("h1",null,"We're sorry, but something went wrong."))}Object.defineProperty(e,"__esModule",{value:!0});var i=r(59),o=r(1),a=r(6),u=function(t){return t&&t.__esModule?t:{default:t}}(a);n.displayName="Scrivito.InternalErrorPage",e.default=(0,u.default)(n)},function(t,e,r){"use strict";function n(t){var e=t.children;return(0,i.currentPageError)()instanceof o.CurrentPageNotFoundError?e?React.createElement("div",null,e):React.createElement("div",null,React.createElement("h1",null,"The page you were looking for doesn't exist."),React.createElement("p",null,"You may have mistyped the address or the page may have moved.")):null}Object.defineProperty(e,"__esModule",{value:!0});var i=r(59),o=r(1),a=r(6),u=function(t){return t&&t.__esModule?t:{default:t}}(a);n.displayName="Scrivito.NotFoundErrorPage",e.default=(0,u.default)(n)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e){s(e),c(e),f(e)&&(e.displayName=t);var r=(0,_.default)(e),n=l(r);(0,v.registerComponentForAppClass)(t,n)}function s(t){if("function"!=typeof t)throw new h.ArgumentError("Scrivito.provideComponent expected a valid React component, but received "+(0,m.default)(t))}function c(t){if(t.propTypes)throw new h.ArgumentError("Custom props are not allowed when providing a component.")}function l(t){var e=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),d(e,[{key:"render",value:function(){if(this.props.widget){var t=p(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this);return t&&t.type!==w.default?React.createElement(w.default,{children:t}):t}return p(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this)}}]),e}(t);return e.displayName=(0,j.default)(t),e}function f(t){return!(t.displayName||t.name&&"_class"!==t.name)}Object.defineProperty(e,"__esModule",{value:!0});var d=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),p=function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)};e.default=u;var h=r(1),v=r(74),y=r(6),_=n(y),g=r(31),m=n(g),b=r(128),w=n(b),k=r(127),j=n(k)},function(t,e,r){"use strict";function n(t,e){(0,a.registerComponentForId)(t,(0,o.default)(e))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var i=r(6),o=function(t){return t&&t.__esModule?t:{default:t}}(i),a=r(74)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=r(326),u=n(a),s=r(327),c=n(s),l=r(328),f=n(l),d=r(329),p=n(d),h=r(330),v=n(h),y=r(130),_=n(y),g=r(331),m=function(){function t(){i(this,t),this._registry=new v.default,this._registry.defaultClassForObjs=(0,f.default)(this._registry),this._registry.defaultClassForWidgets=(0,u.default)(this._registry),this._registry.defaultClassForLinks=(0,p.default)(this._registry),this._registry.ObjSearch=(0,c.default)(this._registry),this.appModelAccessor=new _.default(this._registry)}return o(t,null,[{key:"init",value:function(e){var r=new t;e.Obj=r.Obj,e.Widget=r.Widget,e.Link=r.Link,e.ObjSearch=r.ObjSearch,e.appModelAccessor=r.appModelAccessor,e.provideObjClass=function(){return r.provideObjClass.apply(r,arguments)},e.provideWidgetClass=function(){return r.provideWidgetClass.apply(r,arguments)},e.createObjClass=function(){return r.createObjClass.apply(r,arguments)},e.createWidgetClass=function(){return r.createWidgetClass.apply(r,arguments)},e.getClass=function(){return r.getClass.apply(r,arguments)},e.allObjClasses=function(){return r.allObjClasses()},e.allWidgetClasses=function(){return r.allWidgetClasses()},e._privateRealm=r}}]),o(t,[{key:"provideObjClass",value:function(t,e){return(0,g.provideObjClass)(this._registry,t,e)}},{key:"provideWidgetClass",value:function(t,e){return(0,g.provideWidgetClass)(this._registry,t,e)}},{key:"createObjClass",value:function(t){return(0,g.createObjClass)(this._registry,t)}},{key:"createWidgetClass",value:function(t){return(0,g.createWidgetClass)(this._registry,t)}},{key:"getClass",value:function(t){return this._registry.getClass(t)}},{key:"allObjClasses",value:function(){return this._registry.allObjClasses()}},{key:"allWidgetClasses",value:function(){return this._registry.allWidgetClasses()}},{key:"Obj",get:function(){return this._registry.defaultClassForObjs}},{key:"Widget",get:function(){return this._registry.defaultClassForWidgets}},{key:"Link",get:function(){return this._registry.defaultClassForLinks}},{key:"ObjSearch",get:function(){return this._registry.ObjSearch}}]),t}();e.default=m},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t){var e=new v.default(t);return function(e){function r(e){i(this,r);var n=o(this,(r.__proto__||Object.getPrototypeOf(r)).call(this)),a=l.default.forInstance(n),u=t.objClassNameFor(n.constructor);if(!u)throw new p.ArgumentError("Creating widgets is not supported for the class Widget or abstract classes.");if(e.constructor!==Object)throw new p.ArgumentError("The provided attributes are invalid. They have to be an Object with valid Scrivito attribute values.");if(e._objClass)throw new p.ArgumentError('Invalid attribute "_objClass". "new '+e._objClass+'" will automatically set the CMS object class correctly.');e._objClass=u;var s=(0,y.prepareAttributes)(e,a,u);return n._scrivitoPrivateContent=new d.default(s),n}return a(r,e),s(r,[{key:"obj",value:function(){var e=this._scrivitoPrivateContent.obj();return(0,g.wrapInAppClass)(t,e)}},{key:"copy",value:function(){var e=t.widgetClassFor(this.objClass()),r=this._scrivitoPrivateContent.copy();return(0,g.buildAppClassInstance)(r,e)}}]),r}((0,_.default)(e))}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();e.default=u;var c=r(41),l=n(c),f=r(32),d=n(f),p=r(1),h=r(130),v=n(h),y=r(85),_=n(y),g=r(27)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t){var e=function(e){function r(){return i(this,r),o(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return a(r,e),s(r,[{key:"and",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=(0,v.unwrapAppClassValues)(n);return c(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"and",this).call(this,t,e,o,i)}},{key:"andNot",value:function(t,e,n){var i=(0,v.unwrapAppClassValues)(n);return c(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"andNot",this).call(this,t,e,i)}},{key:"facet",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=c(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"facet",this).call(this,e,n);return _.default.map(i,function(e){return new h.default(t,e)})}},{key:"take",value:function(e){return(0,l.arrayFromIterable)(this.batchSize(e),e).map(function(e){return(0,v.wrapInAppClass)(t,e)})}}]),r}(d.default);if("function"==typeof window.Symbol){var r=window.Symbol.iterator;if(r){e.prototype[r]=function(){var e=this.iterator();return{next:function(){var r=e.next(),n=r.done,i=r.value;return n?{done:n}:{done:n,value:(0,v.wrapInAppClass)(t,i)}}}}}}return e}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)};e.default=u;var l=r(113),f=r(64),d=n(f),p=r(225),h=n(p),v=r(27),y=r(0),_=n(y)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t){function e(e){var r=new t.ObjSearch;return e&&r.and("_objClass","equals",e),r}function r(e){return(0,y.wrapInAppClass)(t,e)}var n=new v.default(t);return function(u){function c(){return i(this,c),o(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return a(c,u),s(c,[{key:"lastChanged",value:function(){return this._scrivitoPrivateContent.lastChanged()}},{key:"path",value:function(){return this._scrivitoPrivateContent.path()}},{key:"parent",value:function(){return r(this._scrivitoPrivateContent.parent())}},{key:"ancestors",value:function(){return r(this._scrivitoPrivateContent.ancestors())}},{key:"backlinks",value:function(){return r(this._scrivitoPrivateContent.backlinks())}},{key:"children",value:function(){return r(this._scrivitoPrivateContent.children())}},{key:"orderedChildren",value:function(){return r(this._scrivitoPrivateContent.orderedChildren())}},{key:"permalink",value:function(){return this._scrivitoPrivateContent.permalink()}},{key:"slug",value:function(){return this._scrivitoPrivateContent.slug()}},{key:"isBinary",value:function(){var t=d.default.forInstance(this);return!!t&&t.isBinary()}},{key:"contentLength",value:function(){return this.isBinary()?this._scrivitoPrivateContent.contentLength():0}},{key:"contentType",value:function(){return this.isBinary()?this._scrivitoPrivateContent.contentType():""}},{key:"contentUrl",value:function(){return this.isBinary()?this._scrivitoPrivateContent.contentUrl():""}},{key:"metadata",value:function(){return this.isBinary()?this._scrivitoPrivateContent.metadata():new g.default}},{key:"destroy",value:function(){this._scrivitoPrivateContent.destroy()}},{key:"widget",value:function(t){return r(this._scrivitoPrivateContent.widget(t))}},{key:"widgets",value:function(){return r(this._scrivitoPrivateContent.widgets())}}],[{key:"get",value:function(t){return n.getObj(this,t)}},{key:"getIncludingDeleted",value:function(t){return n.getObjIncludingDeleted(this,t)}},{key:"getByPath",value:function(t){return r(l.default.getByPath(t))}},{key:"getByPermalink",value:function(t){return r(l.default.getByPermalink(t))}},{key:"all",value:function(){return e(t.objClassNameFor(this)).batchSize(1e3)}},{key:"root",value:function(){return r(l.default.root())}},{key:"where",value:function(r,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return e(t.objClassNameFor(this)).and(r,n,i,o)}},{key:"create",value:function(e){var n=d.default.forClass(this),i=t.objClassNameFor(this);if(!i)throw new p.ArgumentError("Creating CMS objects is not supported for the class Obj or abstract classes.");if(e.constructor!==Object)throw new p.ArgumentError("The provided attributes are invalid. They have to be an Object with valid Scrivito attribute values.");if(e._objClass)throw new p.ArgumentError('Invalid attribute "_objClass". "'+e._objClass+'.create" will automatically set the CMS object class correctly.');e._objClass=i;var o=(0,m.prepareAttributes)(e,n,i);return r(l.default.create(o))}}]),c}((0,b.default)(n))}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();e.default=u;var c=r(3),l=n(c),f=r(41),d=n(f),p=r(1),h=r(130),v=n(h),y=r(27),_=r(119),g=n(_),m=r(85),b=n(m)},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){return function(e){function r(t){return n(this,r),i(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t))}return o(r,e),u(r,[{key:"obj",value:function(){return(0,f.wrapInAppClass)(t,s(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"obj",this).call(this))}},{key:"fetchObj",value:function(e){return s(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"fetchObj",this).call(this,e).then(function(e){return(0,f.wrapInAppClass)(t,e)})}},{key:"_scrivitoPrivateContent",get:function(){return l.default.build(this.buildAttributes())}}]),r}(l.default)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)};e.default=a;var c=r(37),l=function(t){return t&&t.__esModule?t:{default:t}}(c),f=r(27)},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(0),a=function(t){return t&&t.__esModule?t:{default:t}}(o),u=function(){function t(){n(this,t),this._mapping={}}return i(t,[{key:"register",value:function(t,e){this._mapping[t]=e}},{key:"getClass",value:function(t){return this._mapping[t]}},{key:"allObjClasses",value:function(){return this._allForBaseClass(this.defaultClassForObjs)}},{key:"allWidgetClasses",value:function(){return this._allForBaseClass(this.defaultClassForWidgets)}},{key:"objClassFor",value:function(t){return this._appClassFor(t,this.defaultClassForObjs)}},{key:"widgetClassFor",value:function(t){return this._appClassFor(t,this.defaultClassForWidgets)}},{key:"objClassNameFor",value:function(t){return a.default.findKey(this._mapping,function(e){return e===t})}},{key:"_appClassFor",value:function(t,e){var r=this.getClass(t);return r&&e.isPrototypeOf(r)?r:e}},{key:"_allForBaseClass",value:function(t){return a.default.pick(this._mapping,function(e){return t.isPrototypeOf(e)})}}]),t}();e.default=u},function(t,e,r){"use strict";function n(t,e){var r=t.defaultClassForObjs;return(0,h.assertValidObjClassDefinition)(e,r),c(e,r)}function i(t,e){var r=t.defaultClassForWidgets;return(0,h.assertValidWidgetClassDefinition)(e,r),c(u(e),r)}function o(t,e,r){if(l(r))return t.register(e,r);var n=t.defaultClassForObjs;return(0,h.assertValidObjClassDefinition)(r,n),s(t,e,r,n)}function a(t,e,r){if(l(r))return t.register(e,r);var n=t.defaultClassForWidgets;return(0,h.assertValidWidgetClassDefinition)(r,n),s(t,e,u(r),n)}function u(t){var e=(0,f.extend)({},t),r=t.onlyInside;return r&&(delete e.onlyInside,e.validContainerClasses=[r]),e}function s(t,e,r,n){var i=c((0,f.extend)(r,{name:e}),n);return t.register(e,i),i}function c(t,e){var r=t.extend||e;return(0,p.default)(t,r)}function l(t){return!(!t||!t._scrivitoPrivateSchema)}Object.defineProperty(e,"__esModule",{value:!0}),e.provideWidgetClass=e.provideObjClass=e.createWidgetClass=e.createObjClass=void 0;var f=r(0),d=r(332),p=function(t){return t&&t.__esModule?t:{default:t}}(d),h=r(333);e.createObjClass=n,e.createWidgetClass=i,e.provideObjClass=o,e.provideWidgetClass=a},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var r=new c.default(t,e);return function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,null,[{key:"_scrivitoPrivateSchema",get:function(){return r}}]),e}(e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();e.default=a;var s=r(41),c=function(t){return t&&t.__esModule?t:{default:t}}(s)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function o(t,e){u(t,v,e,"CMS object")}function a(t,e){u(t,y,e,"widget")}function u(t,e,r,n){var o=l.default.without.apply(l.default,[l.default.keys(t)].concat(i(e)));if(o.length)throw new h.ArgumentError("Invalid key(s) "+(0,d.default)(o)+" given. Valid keys are "+(0,d.default)(e)+".");s(t.attributes);var a=t.extend;if(a&&r!==a&&!r.isPrototypeOf(a))throw new h.ArgumentError('Invalid value for "extend": not a '+n+" class")}function s(t){if(void 0!==t){if(t.constructor!==Object)throw new h.ArgumentError('Required key "attributes" is invalid. Should be an Object.');l.default.each(t,function(t,e){if(!(0,p.isCamelCase)(e))throw new h.ArgumentError('Attribute "'+e+'" is not in camel case.');if(!l.default.isArray(t)&&!l.default.isString(t))throw new h.ArgumentError('Attribute definition for "'+e+'" is invalid. Should be a String or an Array.')})}}Object.defineProperty(e,"__esModule",{value:!0}),e.assertValidWidgetClassDefinition=e.assertValidObjClassDefinition=void 0;var c=r(0),l=n(c),f=r(31),d=n(f),p=r(21),h=r(1),v=["attributes","extend","name"],y=["attributes","extend","name","onlyInside"];e.assertValidObjClassDefinition=o,e.assertValidWidgetClassDefinition=a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";var n=r(157),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=r(284),a=(0,i.default)();(0,o.initializeSdk)(a),a&&(0,o.loadEditing)()}]);